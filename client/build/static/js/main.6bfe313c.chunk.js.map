{"version":3,"sources":["image/profile.jpg","image/Logo1.svg","image/nav_icon/close_btn.svg","image/homepage/Bread.svg","image/homepage/Tomato.svg","image/homepage/Celery.svg","image/homepage/Pork.svg","image/menu-suggestion/notfound-image.svg","image/camera/upload.png","image/camera/swap_camera.png","image/camera/takecamera_Default.svg","image/camera/takecamera_Onpress.svg","image/camera/Retake_Button.svg","image/camera/Next_Button.svg","image/TextLogo.svg","image/searchbar/Back.svg","Icon/Button/Delete_btn.png","image/homepage/Header.svg","image/homepage/List.svg","image/homepage/BreadClick.svg","image/homepage/TomatoClick.svg","image/homepage/CeleryClick.svg","image/homepage/PorkClick.svg","image/nav_icon/icon_home.svg","image/nav_icon/icon_like.svg","image/nav_icon/icon_camera.svg","image/nav_icon/icon_history.svg","image/nav_icon/icon_people.svg","image/ingredient/unknow-ingredient.svg","Icon/Ingredient/Egg, milk, and dairy product.svg","Icon/Ingredient/Grains, nuts, and baking products.svg","Icon/Ingredient/Meat, sausages and fish.svg","Icon/Ingredient/Pasta, rice, and pulses.svg","Icon/Ingredient/Fats and oils.svg","Icon/Ingredient/Herbs and spices.svg","image/chef.png","image/menu-detail/Checkbox.svg","image/menu-detail/Checkbox_check.svg","image/menu-detail/tips.svg","image/menu-detail/heart-filled.svg","image/menu-detail/heart-outline.svg","Icon/Ingredient/Fruits.svg","Icon/Ingredient/Other.svg","Icon/Ingredient/Vegetable.svg","Icon/Button/Edit_btn.png","Icon/Button/Add_btn.svg","image/homepage/Search-Icon.svg","image/homepage/banner/Banner1.svg","image/homepage/banner/Banner2.svg","image/homepage/banner/Banner3.svg","image/homepage/banner/Banner4.svg","image/homepage/random-menu/Random-menu.svg","image/homepage/news/News.svg","image/Logo.svg","image/picAboutMe2.jpg","image/picAboutMe3.svg","Icon/Button/Setting_btn.png","image/searchbar/camera.png","image/shopping_list/Grab.svg","image/shopping_list/Line_man.png","image/Favorite.svg","utils/auth.js","utils/storageUtils.js","components/CameraSharedDish.js","components/MenuDetail.js","components/PreferencesPage.js","components/MenuSuggestion.js","components/IngredientPreview.js","components/HomePage.js","components/AboutMe.js","components/Navbar.js","components/Camera.js","pages/LoginPage.js","pages/ResetPassword.js","components/SignUpPage.js","components/UserDataPage.js","components/FavoriteMenu.js","components/SearchBar.js","components/History.js","components/Setting.js","pages/Newpassword.js","components/MenuReview.js","components/ShoppingList.js","components/cameraSearch.js","components/SmallCommunity.js","App.js","index.js"],"names":["module","exports","getUserId","localStorage","getItem","error","console","setUserId","userId","setItem","isLoggedIn","logout","removeItem","log","saveIngredientsToLocalStorage","ingredients","concat","JSON","stringify","getIngredientsFromLocalStorage","storedIngredients","parse","getCameraIngredientsFromLocalStorage","saveCameraIngredientsToLocalStorage","getShoppingListFromStorage","uid","list","saveShoppingListToStorage","items","CameraSharedDish","_location$state","webcamRef","useRef","capturedImage","setCapturedImage","useState","isHovered","setIsHovered","facingMode","setFacingMode","navigate","useNavigate","menu_id","useLocation","state","capture","useCallback","current","imageSrc","getScreenshot","handleBackNavigation","React","createElement","className","Fragment","src","IconClose","alt","onClick","RetakeButton","handleNext","sharedDishImage","replace","NextButton","Webcam","audio","ref","screenshotFormat","videoConstraints","uploadImage","document","getElementById","click","onMouseEnter","onMouseLeave","CameraButtonHover","CameraButtonDefault","SwapCamera","handleSwapCamera","prev","type","accept","onChange","event","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","id","style","display","fetchMissingImages","async","menuList","ingredientList","storedImages","getImageFromLocalStorage","ingredient","Array","isArray","menu","missingMenuItems","filter","menuItem","some","storedMenu","name","missingIngredients","length","fetchedImages","axios","post","process","data","newImages","map","item","image","_objectSpread","Object","fromEntries","imageUrl","Images_list","abbreviateUnit","quantity","renderStars","rate","numericRating","parseFloat","finalRating","Math","round","starValue","key","showProfle","review","final_profile","defaultProfile","avatarUrl","avatar","Date","now","showDate","updated_at","split","created_at","MenuDetail","_location$state2","_menuData$steps2","_menuData$tips","location","isRandomMenu","menuData","setMenuData","checkedSteps","setCheckedSteps","ingredientImages","setIngredientImages","selectedIngredients","setSelectedIngredients","isLoading","setIsLoading","isFavorite","setIsFavorite","mealCompleted","setMealCompleted","setIngredients","userAllergies","setUserAllergies","allergyAlerts","setAllergyAlerts","showAllergyAlert","setShowAllergyAlert","hasAcknowledgedAllergy","setHasAcknowledgedAllergy","dishImage","setDishImage","require","hasDishPhoto","setHasDishPhoto","isCameraOpen","setIsCameraOpen","dishFileInputRef","isSubmitting","setIsSubmitting","posts","setPosts","dishCaption","setDishCaption","ignoreSharedDish","setIgnoreSharedDish","ratings","setRating","sum_rating","avg_rating","rate_5","rate_4","rate_3","rate_2","rate_1","percent_rate_5","percent_rate_4","percent_rate_3","percent_rate_2","percent_rate_1","setReview","comment","rating","username","avatar_url","formReview","setReviewData","user_id","userData","setUserData","hasReviewed","setHasReview","showUpdatePopup","setShowUpdatePopup","actualMenuId","handleSelectIngredient","ingredientName","find","unknowIngImage","useEffect","handleChangeReview","e","value","isNaN","user","get","prevData","fetchUserData","then","res","catch","err","ingredients_quantity","keys","isCancelled","images","foundMenu","m","menu_name","fetchImages","_err$response","response","message","isInFavorites","includes","checkFavorite","allergyList","allergies","a","toLowerCase","allergyResponse","alerts","allergyError","forEach","ingredientLower","allergy","push","fetchAllergiesAndCheck","fetchReviewData","reviews","review_lenght","foundReview","review_find","String","delete","favorite","notfavorite","unknowMenuImage","index","handleAllergyAcknowledge","prep_time","cooking_time","entries","_ref","_menuData$ingredients","ingredients_type","_ref2","idx","i","title","_ref3","_menuData$ingredients2","_ref4","handleAddToList","updatedList","uniqueList","Map","values","disabled","steps","step","checked","_menuData$steps","newCheckedSteps","stepIndex","totalSteps","handleCheck","checkboxOncheck","checkbox","tips","tip","tipscheck","nutrition","calories","protein","fat","carbohydrates","sodium","sugar","onload","placeholder","dataurl","filename","fetch","blob","File","dataURLtoFile","formData","FormData","append","headers","handleCancel","logo","width","onSubmit","preventDefault","parseInt","rating_int","for","put","LoadingMenuPage","PreferencesPage","selectedCuisines","setSelectedCuisines","selectedDietaryPreferences","setSelectedDietaryPreferences","selectedMealOccasions","setSelectedMealOccasions","storedPreferences","getPreferencesFromLocalStorage","cuisines","dietaryPreferences","mealOccasions","savePreferencesToLocalStorage","toggleSelection","setSelection","selectedItems","prevState","selected","cuisine","preference","occasion","ingredientNames","ingredient_name","method","body","json","menus","recommendations","ItemName","storedItem","parsedItem","printData","MenuSuggestion","setRecommendations","storedRecommendations","getMenuFromLocalStorage","Promise","all","_existingMenu$data","existingMenu","encodeURIComponent","payload","saveMenuToDB","menusWithIds","onBack","menuFromDB","goToMenuDetail","NotFoundImage","IngredientPreview","updatedIngredients","editIndex","setEditIndex","editedName","setEditedName","isReferencePage","setIsReferencePage","iconMap","EggMilkDairy","FatsOils","Fruits","GrainsNutsBaking","HerbsSpices","MeatSausagesFish","PastaRicePulses","Vegetables","getUniqueIngredients","seen","Set","ing","_ing$ingredient_name","trim","has","add","allIngredients","uniqueIngredients","prevIngredients","newIngredientsList","handleSaveEdit","handleCancelEdit","handleBackToIngredientPreview","handleBack","ingredient_type","iconSrc","ingredientType","arguments","undefined","typeLower","Miscellaneous","getIconForIngredientType","handleEdit","editBtn","ingToDelete","normalIngredients","cameraIngredients","_","handleDelete","deleteBtn","handleAddIngredient","addBtn","height","handleConfirm","HomePage","activeImages","setActiveImages","bread","tomato","celery","pork","setUsername","isLoadingRandom","setIsLoadingRandom","isUserLoggedIn","setIsUserLoggedIn","shoppingListCount","setShoppingListCount","chartData","setChartData","statsLoading","setStatsLoading","currentMonthMeals","setCurrentMonthMeals","currentMonthCO2","setCurrentMonthCO2","logSafeUserEvent","details","safeDetails","email","loggedIn","status","hasData","toUpperCase","stats","formattedData","monthly_stats","month","meal_count","current_month","co2_saved","_error$response","_error$response2","_error$response3","errorType","loadShoppingList","window","addEventListener","removeEventListener","minValue","maxValue","getChartBounds","d","maxDataValue","max","niceMax","ceil","gridLines","calculateY","topPadding","chartHeight","calculateX","dataLength","leftPadding","chartWidth","gridValues","getGridValues","header","listicon","handleListIconClick","shoppingList","cursor","searchicon","img","breadclick","tomatoclick","celeryclick","porkclick","toggleImage","viewBox","y","x1","y1","x2","y2","stroke","strokeWidth","x","points","point","join","createPath","fill","strokeLinecap","strokeLinejoin","cx","cy","r","textAnchor","fontSize","fontFamily","fontWeight","toFixed","banner1","banner2","banner3","banner4","randommenu","_response$data$menu","success","alert","news","AboutMe","currentSlide","setCurrentSlide","isDragging","setIsDragging","startX","setStartX","scrollLeft","setScrollLeft","containerRef","slides","description","pic2","pic3","handleStart","clientX","touches","offsetWidth","handleMove","newScrollLeft","slideWidth","newSlideIndex","handleEnd","handleKeyPress","transform","onMouseDown","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","slide","dotIndex","Navbar","currentPath","pathname","handleNavigation","page","IconHome","IconHeart","IconCamera","IconClock","IconUser","LoadingIngredientPage","PopUpIngredientNotFound","isVisible","setIsVisible","FaExclamationTriangle","handleClose","Camera","isIngredientNotFound","setIsIngredientNotFound","ok","Error","detectedIngredients","sendImageToBackend","LoginPage","timeoutRef","setFormData","REACT_APP_API_URL","password","showPassword","setShowPassword","fieldErrors","setFieldErrors","setAlert","isGoogleLoading","setIsGoogleLoading","isGoogleReady","setIsGoogleReady","initializeGoogleSignIn","google","accounts","initialize","client_id","callback","handleGoogleSignIn","auto_select","cancel_on_tap_outside","renderButton","theme","size","text","shape","script","defer","head","appendChild","clearTimeout","userInfo","parseJwt","credential","backendResponse","picture","google_id","sub","timeout","withCredentials","isNewUser","is_new_user","setTimeout","_error$response$data","errorMessage","request","token","base64","jsonPayload","decodeURIComponent","atob","c","charCodeAt","toString","slice","handleChange","isAnyLoading","textlogo","errors","validateForm","validateField","test","_err$response$data","code","noValidate","aria-label","aria-invalid","aria-describedby","autoComplete","role","tabIndex","handleForgotPasswordClick","aria-live","handleSignUpClick","handleGuestClick","ResetPasswordPage","setErrors","touched","setTouched","setMessage","formErrors","newErrors","_res$data","submit","onBlur","fieldName","Link","to","SignUpPage","arai-invalid","UserDataPage","phone_number","birth_date","country","profileImage","setProfileImage","userIdStr","mealStats","setMealStats","total_completed","most_cooked","logUserAction","action","valid","hasAvatar","hasBirthDate","hasPhoneNumber","hasCountry","fetchMealStats","IconSetting","handleSetting","onError","handleImageError","dateStr","date","day","getDate","padStart","getMonth","year","getFullYear","formatDate","cook_count","handleLogout","FavoriteMenu","setSelected","likedMeals","setLikedMeals","formatted","prepTime","cookingTime","fetchFavorites","meal","mealId","handleUnlike","SearchBar","searchText","setSearchText","setAllIngredients","showAddedMessage","setShowAddedMessage","loadAllIngredients","manualIngredients","handleIngredientPreview","currentIngredients","fromSearchBar","newIngredient","source","existingIngredients","handleCameraClick","updatedSelected","handleSearchRecipe","formatTimeAgo","seconds","floor","interval","HistoryScreen","historyItems","setHistoryItems","favoriteMenuIds","f","formattedHistory","history_id","menuId","createdAt","isLiked","sort","b","timeAgo","fetchHistory","prevItems","his","handleLike","Setting","profilePic","setProfilePic","newProfileFile","setNewProfileFile","isDropdownOpen","setIsDropdownOpen","allergyInput","setAllergyInput","showDeleteModal","setShowDeleteModal","formatDateForInput","dateString","countries","backicon","URL","createObjectURL","maxLength","allergiesArray","updatedUser","NewPasswordPage","confirmPassword","handleInputChange","confirmError","handleBlur","getInputClasses","MenuReview","menuIdStr","confirmUpdate","setUpdate","confirmDelete","setDelete","showDeletePopup","setShowDeletePopup","index_review","deleteicon","showDeleteReview","ShoppingList","setShoppingList","showPopup","setShowPopup","savedList","newList","handleRemoveItem","open","linemanLogo","grabLogo","onClose","CameraSearch","updatedCameraIngredients","SmallCommunity","currentUserId","params","p","post_id","image_url","caption","likes","like_count","liked","fetchPosts","capitalize","str","charAt","Header","postId","LikeIcon","toLocaleDateString","App","Routes","Route","path","element","Newpassword","Community","ReactDOM","createRoot","render","StrictMode","Router"],"mappings":"wFAAAA,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,iBCA3CD,EAAOC,QAAU,IAA0B,uC,iBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,iBCA3CD,EAAOC,QAAU,IAA0B,oC,cCA3CD,EAAOC,QAAU,04V,gBCAjBD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,mCCA3CD,EAAOC,QAAU,kvC,gBCAjBD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,iBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,0D,gBCA3CD,EAAOC,QAAU,IAA0B,+D,gBCA3CD,EAAOC,QAAU,IAA0B,qD,gBCA3CD,EAAOC,QAAU,IAA0B,qD,mCCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,8C,kBCA3CD,EAAOC,QAAU,IAA0B,kC,uECA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,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","file":"static/js/main.6bfe313c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/profile.9616aff3.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Logo1.caea3fae.svg\";","module.exports = __webpack_public_path__ + \"static/media/close_btn.f2269fac.svg\";","module.exports = __webpack_public_path__ + \"static/media/Bread.31215a6c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Tomato.b5764a59.svg\";","module.exports = __webpack_public_path__ + \"static/media/Celery.dc6aeedc.svg\";","module.exports = __webpack_public_path__ + \"static/media/Pork.82735d4b.svg\";","module.exports = __webpack_public_path__ + \"static/media/notfound-image.3a0cd269.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload.a25673f8.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/takecamera_Default.5708043c.svg\";","module.exports = __webpack_public_path__ + \"static/media/takecamera_Onpress.d1888e61.svg\";","module.exports = __webpack_public_path__ + \"static/media/Retake_Button.bab926d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/Next_Button.172cd719.svg\";","module.exports = __webpack_public_path__ + \"static/media/TextLogo.b48ca862.svg\";","module.exports = __webpack_public_path__ + \"static/media/Back.d6595286.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABRCAYAAABFTSEIAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM3SURBVHgB7ZzNi05RHMe/4yUSdmrkJW+lMPIyCyWa1SxMNpQNCyULSYZkJcVfYKmUhRU2FkishJ2E2IgwGvKaEE95mcfv5z6mabrnzL33d5/fOfc+v099mrr3Oc89fefee8557jkXMAzDMIyCdEEXPt4AuZOchXL5SZ4hr6HGHCObbfYIaspStD+8/y6AEpOgx0rosRZKaAY4DXqoHUszwFpiAQqJJUDu2nTldAciwM5AIRagkLwjkR5yL7m4QNlucr1j313yPcr7vgfka+TnOXmq9bd0esmv0OsMh/Iz3P8YEfcBNDvEW8hInsvwDzrnnvmbnJrlg3kC+YjO4U3WD05GdhrkFnQGB8mHKBk+W3eTw6jW/SyrI+QQuR+GYXQKeRqR8fAzjaPkILmRfIKkE1oFeETFjxf2kXPIx+QvKMIHfQSlHnzJpI2oeJBQ9kMuL4ch7MEHxDWiUm19LzsqoXoZFIRHVGl1P4cCFB2aucpNQfy46j4dJX6ZkRELUEjIAPnYB8h3SO5LfHPP0opvJu8hud/y0OsQKshVuMeUWRlMKcthrvKUWYKkuyRpQV31vghFygjQ9aPECU+Z044yQ8hOqQGGvITnObYvdxdxznlRmwsznhgbkSJ10p6mN4q1wkIsQCEWoBALUIgFKMQCFGIBCrEAhViAQixAIRagEAtQiAUoxAIUYgEKsQCFWIBCLEAhFqAQC1CIBSgkZIDNnNuZEURGyAA/OLY/dRf5Nws2jVcIRMgAT6Zs4wUuZz1leGbCt5Ttx1ExypjaMXbdCU8UukmuyVBuHXkHyXKsIus6ajM3JhS1mRtTCyxAIRagkKIBNjz7ZiNeZnr2fUcBigY47NnXi3jp9+x7BkX4nS2u1uw64sW1voUdgCJz4V97ux3xsQfu+v4g50MZX1+w0apwLOxCEpKrvlcQgH74z0KWL5lt5Azow43ZViS3lInq2YdAXMLElYvdCwjIIlT7HQo8lu5GYDaQn1Ct4JqtOvcgEnh10UtUJzy+alYjMvhS4F80Yg/vPLkQEdOHpIvj6zZo+4W8QW5CybRzhQ+/Im8FkjfqLoN+V4ZD48cDL8jb5FsYRu34C47j1Fo0dZU7AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/Header.787397f2.svg\";","module.exports = __webpack_public_path__ + \"static/media/List.474b1bd1.svg\";","module.exports = __webpack_public_path__ + \"static/media/BreadClick.ba6cb344.svg\";","module.exports = __webpack_public_path__ + \"static/media/TomatoClick.7a4355c5.svg\";","module.exports = __webpack_public_path__ + \"static/media/CeleryClick.cd91cfd2.svg\";","module.exports = __webpack_public_path__ + \"static/media/PorkClick.e13d6f05.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_home.32ed2c0c.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_like.0e5bb0e6.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_camera.98d90925.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_history.c82c2993.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon_people.a92335a3.svg\";","module.exports = __webpack_public_path__ + \"static/media/unknow-ingredient.ed22726c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Egg, milk, and dairy product.3a0f54a2.svg\";","module.exports = __webpack_public_path__ + \"static/media/Grains, nuts, and baking products.80396d64.svg\";","module.exports = __webpack_public_path__ + \"static/media/Meat, sausages and fish.9e1e351c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Pasta, rice, and pulses.0bdd2188.svg\";","module.exports = __webpack_public_path__ + \"static/media/Fats and oils.ced78b46.svg\";","module.exports = __webpack_public_path__ + \"static/media/Herbs and spices.d50bfc95.svg\";","module.exports = __webpack_public_path__ + \"static/media/chef.c71a47c5.png\";","module.exports = __webpack_public_path__ + \"static/media/Checkbox.00578017.svg\";","module.exports = __webpack_public_path__ + \"static/media/Checkbox_check.9af28406.svg\";","module.exports = __webpack_public_path__ + \"static/media/tips.f9222780.svg\";","module.exports = __webpack_public_path__ + \"static/media/heart-filled.a4fda5e9.svg\";","module.exports = __webpack_public_path__ + \"static/media/heart-outline.bec7e939.svg\";","module.exports = __webpack_public_path__ + \"static/media/Fruits.55d64a89.svg\";","module.exports = __webpack_public_path__ + \"static/media/Other.7dc13f38.svg\";","module.exports = __webpack_public_path__ + \"static/media/Vegetable.cca2d0fe.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABRCAYAAABFTSEIAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUWSURBVHgB7VxXqBVXFF0ppJsCBkII+FI/UiS9J080XWK+QgL5SvkMJoFggvl5P8lPIEX8sH9YURALIjZQsWFDbIhieTbsihULet3LeSOXy5zZe+bOu3rOzIIFj/fmnPvOumvPOnNm5gAVKtxI3ILy4g7hAGE/4XvCXsJ7hOeFncJ5wiXCWcKLqHAd9wkHCY8JawZ2Cv8Q3ooKeFK4DjbhGrle+DhKjPeFJ5BPvJj7hC+ihOgjPIvmxIvJL+EJlAjvIAqBWoHkaeBelACfCQ8jXYyTwr+FXyFKZCbzCOiO/RmBg847g3QRZgp7Oto/imgK42p7HNFUKEi0Qw8MukybmvDvM1P6+AYBog905/1r7w6PICrzpH6GITBYA2MgsmGMo5/NCAgMjEOwpegV4Y+w42tHP6cRCCyBkcTvjf33c7S/jADQjvxXGHTi74bPGOBofw6eg+JpzpsLXcTvlM+Z6Gi7BR7DEhicqnDJrgO6iD85PucxuL+k/+EpPoUeGLF4MX6DLmJjOnMeuDilzZfwEJbA4DwvabFYE5H8oevY2+CevpCdwjvhGdphCwyuJLsG1wHdiYOFk5XjfoVnoHicd9WMnCO83dHXwAz9JHEDPFuhZtleQPaBroZ7saAD+cTjoqpXK9OfwH6FkcSpwrscfQ/K2Bf/D69WpOk8rWzHC/crxywSPuD4DKuI/D+ehUew3MOIpypt0EVcimQnsv1W6M57DR6B4mnOa1ySehq6iLzXWx8sDIJJ0MV7Dh7hbeiB4ZrnUcRdSts1iIKlh3AkdPFehUewBAYHnfZEBUXcp/QxDTbneVW2dJ5Wtn/C9jiKRcTSBYbmvEa0IZ+I3jmPD/ZozvsP+fCUcC+yiRdcYFC8Zp4io4i7EKDziggMC9h+NgIT7y0UFxhpYPtRCCwweM7TAoODLkK8icrn8LGP4AKjiGVyXmFYxHsJHoGBwcdnuzMwCF5hjEBgzvsIemC0qmx5+vAuME6hNYGhXdvyXopX87x3UQVGblA8zXlVYDjAsq0CIyc+xM0VGK/DI1gC4y80f0uQ4mnOY2A8D49gDYwixJuAwMqWd89cj8HGHILmYRUvyMBo1nl8x204AnPeB7AFRivK1svA0Mq2qMDQnMeXYrwKDJ7zWhUY46GXrVfOa2VgWMQLLjB4edaqwPDKeQyMg0gf1GhUZZuIKjCagCUwinLeOATmPH7TmnhFBYZFvBfgEdqER9D9gcE3v4MLDGIKbp6yfQOewfV2Yky+Il+EeMMQWGDE2IT0ge1AtNNPXgTrPIKrGTUDKWLP7N2HGRj1+Ac2AcmNiMLGCgaGVrbeOi8GX5OqZeB22MrZ4jymvtfi0SGXkE3A2Ilp5Rx0YNSDD/+klVaeYKF4YxG482L8guQB8g7Xw4icliVYrOJ5GxiNcL0eP6Pr7xRxJ2zBYgkMivcmAsIeJA90cN0xvWBzonbTOzjxesM92L4Nx1rKOY3c7SKYso3xLZIHy6fo7044nk7UyrkUzosxFMkDXp7ShvtK7UY28XojINS/udjfccyGup+5JRxv4rD8vkD0sGIP2HBU+HlDf8HgIbhdwyTlet1a5NteKeiyjcF9WGrdRJ4nn0GgiNf0+qJ7MF34inAbAsdCFOs67pbRHyXB/Wh+f2We4xYgukfyMkoEpjBT9UFkwwHhCuF8RBNq8hRKCApoWUJaiSiFVyFy2n5UuAYK+HHD7zhf477xyxDtt7Kx63cVEnAVAGnY8UQnk+oAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/Add_btn.92f877a1.svg\";","module.exports = __webpack_public_path__ + \"static/media/Search-Icon.b16c5049.svg\";","module.exports = __webpack_public_path__ + \"static/media/Banner1.8f303be8.svg\";","module.exports = __webpack_public_path__ + \"static/media/Banner2.e052e89e.svg\";","module.exports = __webpack_public_path__ + \"static/media/Banner3.d07d9286.svg\";","module.exports = __webpack_public_path__ + \"static/media/Banner4.17957563.svg\";","module.exports = __webpack_public_path__ + \"static/media/Random-menu.56b3e6e3.svg\";","module.exports = __webpack_public_path__ + \"static/media/News.36be35c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/Logo.79899453.svg\";","module.exports = __webpack_public_path__ + \"static/media/picAboutMe2.c72d9246.jpg\";","module.exports = __webpack_public_path__ + \"static/media/picAboutMe3.7804ca5b.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABTCAQAAACijEiIAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAEwUlEQVRogdWbW0wcVRjHf4MCD9iWtsFeYlv3tIpFbaxaqFEoBe16g0qMbYIxNfHBB43aaoyxXpIqiUmTqok+mGhiY1xDGkMFtAWFUvCCeMGgpWrIV9tqvBCrrfBAq6wPywK7Ozt75izLzP6fZs/+5//9d3Yu5/vON1aYdKBWsJYSLmE5i1lAAXlYnGWEU/zGCYY4Qr8cTyeCZW5QzaeJDRrEw9TJX6ZR0jG4m8c0qbvlcdMo6RjspUyT2ivXmUYxNqjO4zQFmuQRCuU/szjmBov53gW9WH40i2NucAuNLuhbZJ9ZHHODDTzpgt4gT5nFMTfYym0u6K1SYxbH3OAJlrmgn5TlZnEMDaqFDGO52CFMkfxpEsnU4EY6Xe5SJYdMItkaVAv5R8467aa2s8dlpB3yoqNiHnPsjnGCQbWAfVRxhv2E6JB/k8gd4GaXBg/IrUm0zqeaeu5gLp3cJaccDap8PqR88uPvNBIK9x2L+xWqgi5XZyDAOJXSEzsUsKxS6tnKosmhHm6SMSeDb7ItQXqIECH5YZJzPU0UubQHMEydfDKpUkw99axKYO2Ve5MaVA/wSlL5r2hiiPkEqSXHwB7AOM0c5G9WUcc1SVkPyqu2BtVV9JJvGHomMcZ6+Sb6YdKgyudLrvDIUjy+49romThlcBdPe2YoEbvk2cjGhEF1KQO++HujGGNNZIIWNfgetZ4aSkSzbIYJg+oGelLQvUC5fBw1+BHVXruxQYfcCFYYtY4+r70kQZn0WWHU29R77SQJQnK3FSjipK+u3+kYY5kVeIiXvfbhgIetwKcYJ9WzgM+swIh2+u2MX+lmkGGgiBIqWDIjqqNWoI1Nacu8zx66ZHxqQOVQyQ5XeZ892q3AElq5Og2Jn7lP2u2/Upt4g4vS0P6aGiuMKuAt6gwlvuB2+SP51+pCWig11G7iHhmNPElyaOAJA4kBKuS0M0XNo5s1BtovsFPGp0+3tvGay/vhGdaKpKYpRT9zXSmPcb/sjWxOn1GX866rXGO7vKRHVI/gmHLGYZg7p9Kr2JxE0UKJpswvrIzNv5JD5SMs1dQdpGb6/xKf1c2jkaCWkKt6lXqenVrENrbGntWJiXsu7VRqSK2Xz/XMAagyejVohwjKudghm9KHWs2RlGn5OS5wLo7EaeYxQm4KUpgSSaja2tdmBrgyhdhxuVjX3ITmT6xIQflWbG5H9gZTV16Oiu7FFNUcZHUKykG5JXEwG4+guoxBj87By+VoSoMqlzY2asTMxFXcRTD+Z8/WfVB3TcD5PujzJ4nPn8UZnM2spJ85rpTjZzMZnQ8WcjjN+WBaM+o+ahxn1ItoYZ2hdmRGHVhKS8ZykiCvp52TzFRWF+46Ni2rC+RYlTxKkoUHF2jPVF68gcUzojrq98pCbxbUZvxe3fJ9fTCMKsXFvGRWEamwguqgymsvNuiU6myp8oNqxrDpIWNokVrInpUm363VPSfPRDayZ7XT9+vFoLXiXkiQzR6tuINDz8I7U1UTD3sWtLs+yulyfRTDVEp37JBB14d238wH2NRRHGFbeQGXfTMTu/i580gPHvdupYbvu9983z+YDR2Yvu9h9X0XsO/7qP3eie77Xv5seBvC7++TwGy8kfM//dgR2GW1PZUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAApJJREFUSInVlU2ITWEcxn//95475y6MDMVmFvIRCyFfU8IKo/EV6sZ5R9M0K2RhQVkZO2UhTUK6hrnnPWcjlCRZSYopycJXXaysfCQs3Pk4f5urrsl7GNl4lu/znN/zf996zwv/uyTPrFar80SkU0Sm/MpX1a8icsta+3rSBUNDQ4sKhcIw8AL44IlNBxaIyIooil54CyqVSmsYhqtEZHqTtxOYY63t8A0B4Jy7B7wBbvxYU9WP9Xp9uK+v70vgnFsO3ARagfpP7SIX8uAN2F0R2Q9safouDMPwc5qmWyWO4wfAo1qtdrC/vz/7HfBPpKqSJMkpYHUgIstF5FAefHBwsNTS0tIpIksagCcjIyO3e3t7vzXnqtXqNmPMbGDAGBNnWXbAAIGqjvvgcRxvCcOwBjhV3aCqG4EkDMNamqabm7PGmCHgdBzHi7MsGwMCk7dV59x2EbmmqpfHx8dnWWvXWmvXFIvFWVmWVbMsu54kydamozmsqifb29uf/lgT55wCHdba4WZ4pVJpLZVKr4Az1trjngGOAfuKxeK8crn8dYK3FHjs3UGpVNoB0NbWdsKXaXhmdHR0uy+Td0RLgftdXV11X6Dh3QeW/U1BgQn3wqM6EEy6QESeAStV1fs7aXgrgKe+jLcgCIKrwMwkSbp9mSRJ9gIzReTqpAvK5fI74Ahwzjm3+xfwPcBZETkcRdF776A+A8BaezZJkkBVLzrnjgL3GtY6VZ2rqkestefzGAbIjDHec46iaGBsbGy+iMTAVKBVRC4ZY+Z3d3efyWEXgCxQ1Zequh546Ev29PS8BU7mTTpRIrJJVZ+Lc64LuEL+wzJZzQAWquouAUjTdLaqdqrqtH9BF5FPqnon7yn9f/QdA2cE8e6LV5cAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/Grab.d1339392.svg\";","module.exports = __webpack_public_path__ + \"static/media/Line_man.57b497be.png\";","module.exports = __webpack_public_path__ + \"static/media/Favorite.a4fda5e9.svg\";","export const getUserId = () => {\n  try {\n    return localStorage.getItem('user_id');\n  } catch (error) {\n    console.error('Failed to get userId:', error);\n    return null;\n  }\n};\n\nexport const setUserId = (userId) => {\n  try {\n    if (!userId) {\n      console.error('Invalid userId');\n      return false;\n    }\n    localStorage.setItem('user_id', userId);\n    return true;\n  } catch (error) {\n    console.error('Failed to save userId:', error);\n    return false;\n  }\n};\n\nexport const isLoggedIn = () => {\n  return getUserId() !== null;\n};\n\nexport const logout = () => {\n  try {\n    localStorage.removeItem('user_id');\n    console.log('User logged out successfully');\n    return true;\n  } catch (error) {\n    console.error('Failed to logout:', error);\n    return false;\n  }\n};","import { getUserId } from './auth';\n\n// src/utils/storageUtils.js\n// Function to save ingredients to localStorage for a specific user\nexport const saveIngredientsToLocalStorage = (ingredients) => {\n  const userId = getUserId();\n  if (!userId) return;\n  localStorage.setItem(`ingredients_${userId}`, JSON.stringify(ingredients));\n};\n\n// Function to retrieve ingredients from localStorage for a specific user\nexport const getIngredientsFromLocalStorage = () => {\n  const userId = getUserId();\n  if (!userId) return [];\n  const storedIngredients = localStorage.getItem(`ingredients_${userId}`);\n  try {\n    return storedIngredients ? JSON.parse(storedIngredients) : [];\n  } catch (error) {\n    console.error('Error parsing ingredients from localStorage:', error);\n    return [];\n  }\n};\n\n// Function to save menu recommendations to localStorage\nexport const savePreferencesToLocalStorage = (menu) => {\n  const userId = getUserId();\n  if (!userId) return;\n  localStorage.setItem(`Preferences_${userId}`, JSON.stringify(menu));\n};\n\n// Function to retrieve menu recommendations from localStorage\nexport const getPreferencesFromLocalStorage = () => {\n  const userId = getUserId();\n  if (!userId) return [];\n  const storedMenu = localStorage.getItem(`Preferences_${userId}`);\n  try {\n    return storedMenu ? JSON.parse(storedMenu) : [];\n  } catch (error) {\n    console.error('Error parsing menu from localStorage:', error);\n    return [];\n  }\n};\n\nexport const saveMenuToLocalStorage = (menus) => {\n  localStorage.setItem('menus', JSON.stringify(menus));\n};\n\nexport const getMenuFromLocalStorage = () => {\n  const storedMenu = localStorage.getItem('menus');\n  try {\n    return storedMenu ? JSON.parse(storedMenu) : [];\n  } catch (error) {\n    console.error('Error parsing menu recommendations from localStorage:', error);\n    return [];\n  }\n};\n\nexport const saveImageToLocalStorage = (Images_list) => {\n  localStorage.setItem('images', JSON.stringify(Images_list));\n};\n\n\n\nexport const getImageFromLocalStorage = () => {\n  const storedImages = localStorage.getItem('images');\n  try {\n    return storedImages ? JSON.parse(storedImages) : { ingredient: {} };\n  } catch (error) {\n    console.error('Error parsing images from localStorage:', error);\n    return { ingredient: {} };\n  }\n};\n\n// Function to print any data from localStorage by key\nexport const printData = (ItemName) => {\n  const storedItem = localStorage.getItem(ItemName);\n\n  try {\n    const parsedItem = storedItem ? JSON.parse(storedItem) : [];\n    console.log(parsedItem);\n  } catch (error) {\n    console.error(`Error parsing ${ItemName} from localStorage:`, error);\n  }\n};\n\nexport const getCameraIngredientsFromLocalStorage = () => {\n    const userId = getUserId();\n    if (!userId) return [];\n    try {\n        const ingredients = localStorage.getItem(`cameraIngredients_${userId}`);\n        return ingredients ? JSON.parse(ingredients) : [];\n    } catch (error) {\n        console.error('Error getting camera ingredients from localStorage:', error);\n        return [];\n    }\n};\n\nexport const saveCameraIngredientsToLocalStorage = (ingredients) => {\n    const userId = getUserId();\n    if (!userId) return;\n    try {\n        localStorage.setItem(`cameraIngredients_${userId}`, JSON.stringify(ingredients));\n    } catch (error) {\n        console.error('Error saving camera ingredients to localStorage:', error);\n    }\n};\n\nexport const getShoppingListFromStorage = (userId) => {\n    const uid = userId || getUserId();\n    if (!uid) return [];\n    try {\n        const list = localStorage.getItem(`shoppingList_${uid}`);\n        return list ? JSON.parse(list) : [];\n    } catch (error) {\n        console.error('Error getting shopping list:', error);\n        return [];\n    }\n};\n\nexport const saveShoppingListToStorage = (items, userId) => {\n    const uid = userId || getUserId();\n    if (!uid) return;\n    try {\n        localStorage.setItem(`shoppingList_${uid}`, JSON.stringify(items));\n    } catch (error) {\n        console.error('Error saving shopping list:', error);\n    }\n};","import React, { useRef, useCallback, useState } from 'react';\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport Webcam from 'react-webcam';\nimport IconClose from '../image/nav_icon/close_btn.svg';\nimport uploadImage from '../image/camera/upload.png';\nimport SwapCamera from '../image/camera/swap_camera.png';\nimport CameraButtonDefault from '../image/camera/takecamera_Default.svg';\nimport CameraButtonHover from '../image/camera/takecamera_Onpress.svg';\nimport RetakeButton from '../image/camera/Retake_Button.svg';\nimport NextButton from '../image/camera/Next_Button.svg';\nimport '../css/camera.css';\n\nconst CameraSharedDish = () => {\n  const webcamRef = useRef(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isHovered, setIsHovered] = useState(false);\n  const [facingMode, setFacingMode] = useState(\"environment\");\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const menu_id = location.state?.menu_id;\n\n  const handleSwapCamera = () => {\n    setFacingMode(prev => prev === \"environment\" ? \"user\" : \"environment\");\n  };\n\n  // แค่เซ็ต capturedImage ไปหน้า preview\n  const capture = useCallback(() => {\n    if (webcamRef.current) {\n      const imageSrc = webcamRef.current.getScreenshot();\n      setCapturedImage(imageSrc);\n      setIsHovered(false);\n    }\n  }, [webcamRef]);\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setCapturedImage(reader.result);\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleBackNavigation = () => navigate(-1);\n\n  const handleNext = () => {\n    if (capturedImage) {\n      navigate('/menu-detail', {\n        state: {\n          sharedDishImage: capturedImage,\n          menu_id: menu_id,\n          replace: true\n        }\n      });\n    }\n  };\n\n  return (\n    <div className=\"camera-container\">\n      {!capturedImage ? (\n        <>\n          <Webcam\n            audio={false}\n            ref={webcamRef}\n            screenshotFormat=\"image/jpeg\"\n            className=\"webcam-view\"\n            videoConstraints={{ facingMode }}\n          />\n          <div className=\"camera-header\">\n            <span className=\"header-title\">Take your dish photo</span>\n            <img src={IconClose} className=\"close-button\" alt=\"Close\" onClick={handleBackNavigation} />\n          </div>\n          <div className='camera-buttom'>\n            <div className='upload-container'>\n              <img\n                src={uploadImage} \n                alt=\"Upload\"\n                onClick={() => document.getElementById('fileInput').click()}\n                className=\"upload-image\"\n              />\n            </div>\n            <button \n              onClick={capture} \n              className=\"camera-button\"\n              onMouseEnter={() => setIsHovered(true)}\n              onMouseLeave={() => setIsHovered(false)}\n            >\n              <img \n                src={isHovered ? CameraButtonHover : CameraButtonDefault} \n                alt=\"Camera Button\" \n                className=\"camera-button-img\"\n              />\n            </button>\n            <div className=\"swap-container\">\n              <img\n                src={SwapCamera}\n                alt=\"Swap Camera\"\n                className=\"swap-camera\"\n                onClick={handleSwapCamera}\n              />\n            </div>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageUpload}\n              id=\"fileInput\"\n              style={{ display: 'none' }}\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          <div className=\"camera-header\">\n            <span className=\"header-title\">Preview</span>\n            <img src={IconClose} className=\"close-button\" alt=\"Close\" onClick={handleBackNavigation} />\n          </div>\n          <img src={capturedImage} alt=\"Captured\" className=\"captured-image\" />\n          <div className='camera-buttom-preview'>\n            <button onClick={() => setCapturedImage(null)} className=\"retake-button styled-button\">\n              <img src={RetakeButton} alt=\"Retake\" className=\"button-image\" />\n            </button>\n            <button onClick={handleNext} className=\"send-button styled-button\">\n              <img src={NextButton} alt=\"Next\" className=\"button-image\" />\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default CameraSharedDish;\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport '../css/MenuDetail.css';\nimport { getIngredientsFromLocalStorage, getImageFromLocalStorage, saveImageToLocalStorage, saveShoppingListToStorage, getShoppingListFromStorage } from '../utils/storageUtils';\nimport checkbox from '../image/menu-detail/Checkbox.svg';\nimport checkboxOncheck from '../image/menu-detail/Checkbox_check.svg';\nimport axios from 'axios';\nimport unknowIngImage from '../image/ingredient/unknow-ingredient.svg';\nimport unknowMenuImage from '../image/menu-suggestion/notfound-image.svg';\nimport tipscheck from '../image/menu-detail/tips.svg'\nimport { getUserId } from '../utils/auth';\nimport favorite from '../image/menu-detail/heart-filled.svg';\nimport notfavorite from '../image/menu-detail/heart-outline.svg';\nimport Camera from './CameraSharedDish';\nimport logo from '../image/Logo1.svg';\nimport defaultProfile from '../image/profile.jpg';\n\nconst MenuDetail = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { menu, menu_id, isRandomMenu = false } = location.state || {};\n    const sharedDishImage = location.state?.sharedDishImage; \n\n    const [menuData, setMenuData] = useState(menu || null);\n    const [checkedSteps, setCheckedSteps] = useState([]);\n    const [ingredientImages, setIngredientImages] = useState({});\n    const [selectedIngredients, setSelectedIngredients] = useState([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [isFavorite, setIsFavorite] = useState(false);\n    const [mealCompleted, setMealCompleted] = useState(false);\n    const [ingredients, setIngredients] = useState([]);\n\n    // Add new state for allergies and alerts\n    const [userAllergies, setUserAllergies] = useState([]);\n    const [allergyAlerts, setAllergyAlerts] = useState([]);\n    const [showAllergyAlert, setShowAllergyAlert] = useState(false);\n    const [hasAcknowledgedAllergy, setHasAcknowledgedAllergy] = useState(false);\n\n    // for share your dish photo (small community)\n    const [dishImage, setDishImage] = useState(sharedDishImage || require('../image/chef.png'));\n    const [hasDishPhoto, setHasDishPhoto] = useState(!!sharedDishImage);\n    const [isCameraOpen, setIsCameraOpen] = useState(false);\n    const dishFileInputRef = useRef(null);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [posts, setPosts] = useState([]);\n    const capturedImage = location.state?.image || null; //select photo\n    const [dishCaption, setDishCaption] = useState('');  \n    const [ignoreSharedDish, setIgnoreSharedDish] = useState(false); \n    \n    // for review\n    // const [avgRating, setRating] = useState(0);\n    const [ratings, setRating] = useState({\n        sum_rating: 0,\n        avg_rating: 0,\n        rate_5: 0,\n        rate_4: 0,\n        rate_3: 0,\n        rate_2: 0,\n        rate_1: 0,\n        percent_rate_5: 0,\n        percent_rate_4: 0,\n        percent_rate_3: 0,\n        percent_rate_2: 0,\n        percent_rate_1: 0\n    });\n\n    const [review, setReview] = useState({\n        menu_id: '',\n        comment: '',\n        rating: '',\n        created_at: '',\n        updated_at: '',\n        username: '',\n        avatar: '',\n        avatar_url: defaultProfile\n    });\n\n    const [formReview, setReviewData] = useState({\n        user_id: '',\n        menu_id: '',\n        comment: '',\n        rating: ''\n    });\n\n    const [userData, setUserData] = useState({\n        username: '',\n        avatar: '',\n        avatar_url: defaultProfile\n    });   \n\n    const [hasReviewed, setHasReview] = useState(false);\n    const [showUpdatePopup, setShowUpdatePopup] = useState(false);\n\n    const userId = getUserId();\n\n    const actualMenuId = menu_id || menuData?.menu_id;\n\n    // Back navigation\n    const handleBackNavigation = () => {\n        navigate(-1);\n    };\n\n    const handleCheck = async (index) => {\n        let newCheckedSteps;\n\n        if (checkedSteps.includes(index)) {\n            newCheckedSteps = checkedSteps.filter(stepIndex => stepIndex !== index);\n        } else {\n            newCheckedSteps = [...checkedSteps, index];\n        }\n\n        setCheckedSteps(newCheckedSteps);\n\n        // Check if all steps are now checked\n        const totalSteps = menuData.steps?.length || 0;\n        if (newCheckedSteps.length === totalSteps && totalSteps > 0 && !mealCompleted) {\n            // All steps completed! Save to database\n            const userId = getUserId();\n            if (userId && actualMenuId) {\n                try {\n                    await axios.post(`${process.env.REACT_APP_BACKEND_URL}/meal-completions`, {\n                        user_id: userId,\n                        menu_id: actualMenuId\n                    });\n\n                    setMealCompleted(true);\n                    console.log('Congratulations! Meal completed!');\n\n                } catch (err) {\n                    console.error('Error saving meal completion:', err);\n                }\n            }\n        }\n    };\n\n    const handleSelectIngredient = (ingredientName, quantity) => {\n        setSelectedIngredients((prev) => {\n            const alreadySelected = prev.find((item) => item.name === ingredientName);\n            if (alreadySelected) {\n                return prev.filter((item) => item.name !== ingredientName);\n            } else {\n                return [\n                    ...prev,\n                    {\n                        name: ingredientName,\n                        quantity,\n                        image: ingredientImages[ingredientName] || unknowIngImage,\n                    },\n                ];\n            }\n        });\n    };\n\n    const handleToggleFavorite = async () => {\n        const userId = getUserId();\n        if (!userId || !actualMenuId) {\n            console.error(\"Missing userId or menu_id for favorite\");\n            return;\n        }\n\n        try {\n            if (isFavorite) {\n                await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/favorites`, {\n                    data: { user_id: userId, menu_id: actualMenuId }\n                });\n                setIsFavorite(false);\n            } else {\n                await axios.post(`${process.env.REACT_APP_BACKEND_URL}/favorites`, {\n                    user_id: userId,\n                    menu_id: actualMenuId\n                });\n                setIsFavorite(true);\n            }\n        } catch (err) {\n            console.error(\"Error toggling favorite:\", err);\n        }\n    };\n\n    const handleAllergyAcknowledge = () => {\n        setShowAllergyAlert(false);\n        setHasAcknowledgedAllergy(true);\n    };\n\n    const handleAddToList = () => {\n        const userId = getUserId();\n        if (!userId) {\n            navigate('/login');\n            return;\n        }\n\n        if (selectedIngredients.length > 0) {\n            const currentList = getShoppingListFromStorage(userId);\n            const updatedList = [...currentList, ...selectedIngredients];\n\n            // remove duplicates\n            const uniqueList = [\n                ...new Map(updatedList.map(item => [item.name, item])).values(),\n            ];\n\n            saveShoppingListToStorage(uniqueList);\n\n            navigate('/shoppinglist', {\n                state: { missingIngredients: selectedIngredients },\n            });\n        }\n    };\n\n    // Share dish picture\n    const handleCancel = () => {\n        setDishImage(require('../image/chef.png'));\n        setHasDishPhoto(false);\n        setDishCaption('');\n        setIgnoreSharedDish(true);\n    };\n\n    const handleChooseDishFile = (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        const reader = new FileReader();\n        reader.onload = () => {\n            setDishImage(reader.result);\n            setHasDishPhoto(true);\n        };\n        reader.readAsDataURL(file);\n    };\n\n    // แปลง base64 เป็น File\n    const dataURLtoFile = async (dataurl, filename) => {\n        const res = await fetch(dataurl);\n        const blob = await res.blob();\n        return new File([blob], filename, { type: blob.type });\n    };\n\n    // Submit รูปไป community\n    const handleSubmitDish = async () => {\n        if (!dishImage || !actualMenuId) return;\n        const userId = getUserId();\n        if (!userId) return;\n\n        try {\n            const file = await dataURLtoFile(dishImage, 'dish.png');\n            const formData = new FormData();\n            formData.append('image', file);\n            formData.append('user_id', userId);\n            formData.append('menu_id', actualMenuId);\n            formData.append('caption', dishCaption);\n\n            await axios.post(`${process.env.REACT_APP_BACKEND_URL}/community`, formData, {\n                headers: { 'Content-Type': 'multipart/form-data' }\n            });\n\n            navigate('/community', { state: { dishImage, menu_id: actualMenuId } });\n        } catch (err) {\n            console.error(\"Upload failed:\", err);\n        }\n    };\n\n    useEffect(() => {\n        const storedIngredients = getIngredientsFromLocalStorage();\n        setIngredients(storedIngredients);\n    }, []);\n\n    // Change Review\n    const handleChangeReview = (e) => {\n        setReviewData({ ...formReview, [e.target.name]: e.target.value });\n    };\n\n    // Submit Review\n    const handleReview = async (e) => {\n        e.preventDefault();\n\n        setReviewData(prevData => ({\n            ...prevData,\n            user_id: parseInt(userId, 10),\n            menu_id: actualMenuId\n        }));\n\n        // console.log(\"information of formReview\", formReview);\n\n        const rating_int = parseInt(formReview.rating, 10);\n        console.log('has review?', hasReviewed);\n\n        if (hasReviewed) {\n            setShowUpdatePopup(true); \n        } else {\n            if (rating_int < 1 || rating_int > 5) {\n            console.error(\"rate should be in 1 - 5\")\n            return;\n        }\n\n        if (!actualMenuId) {\n            console.error(\"Cannot submit review: menu_id is missing.\");\n            // setError(\"Menu ID not set. Please refresh.\"); // ถ้าคุณมี setError\n            return; \n        }\n\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/menu-detail/${actualMenuId}/reviews`, formReview);\n            setReviewData({\n                comment: '',\n                rating: ''\n            });\n            fetchReviewData(); \n        } catch (error) {\n            console.error('Error for post review:', error);\n        }\n        }\n        \n    };\n\n    const handleUpdateReview = async (e) => {\n        e.preventDefault();\n            try {\n                const response = await axios.put(`${process.env.REACT_APP_BASE_URL}/api/reviews`, formReview);\n                // setUpdate(false);\n                setShowUpdatePopup(false);\n                setReviewData({\n                    comment: '',\n                    rating: ''\n                });\n                fetchReviewData(); \n            } catch (error) {\n                console.error('Error for put review:', error);\n            }\n    };\n\n    // Fetch User data\n    useEffect(() => {\n        if (!userId || isNaN(userId)) {\n            console.error('Invalid userId:', userId);\n            navigate('/login');\n            return;\n        }\n        const fetchUserData = async () => {\n            try {\n                const response = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/users/${userId}`);\n                const user = response.data.user;        \n                setUserData(user);\n                if (user.avatar_url) {\n                    setUserData(prevData => ({\n                        ...prevData,\n                        avatar_url: `${user.avatar_url}?t=${Date.now()}` // แล้วอัปเดตเฉพาะ avatar_url\n                    }));\n                }\n            } catch (error) {\n                console.error('Error fetching user data:', error);\n            }\n        };\n        \n        fetchUserData();\n    }, [userId, navigate]);\n\n    // Fetch menu if coming from History\n    useEffect(() => {\n        if (!menuData && menu_id) {\n            console.log(\"Fetching menu by ID:\", menu_id);\n            axios.get(`${process.env.REACT_APP_BACKEND_URL}/menus/${menu_id}`)\n                .then(res => {\n                    console.log(\"Menu fetched:\", res.data);\n                    setMenuData(res.data);\n                })\n                .catch(err => console.error(\"Error fetching menu by ID:\", err));\n        }\n    }, [menu_id, menuData]);\n\n    // Load ingredient and menu images\n    useEffect(() => {\n        if (!menuData || !menuData.ingredients_quantity) return;\n\n        const ingredientList = Object.keys(menuData.ingredients_quantity);\n        const menuList = [menuData];\n        let isCancelled = false;\n\n        const fetchImages = async () => {\n            setIsLoading(true);\n            try {\n                const images = await fetchMissingImages(menuList, ingredientList);\n                if (!isCancelled) {\n                    setIngredientImages(images.ingredient || {});\n                    const foundMenu = images.menu.find(m => m.menu_name === menuData.menu_name);\n                    if (foundMenu && foundMenu.image) {\n                        setMenuData(prev => ({ ...prev, image: foundMenu.image }));\n                    }\n                }\n            } catch (error) {\n                console.error('Error fetching images:', error);\n            } finally {\n                if (!isCancelled) setIsLoading(false);\n            }\n        };\n\n        fetchImages();\n        return () => { isCancelled = true; };\n    }, [menuData?.menu_name]);\n\n    // Save history\n    useEffect(() => {\n        if (!actualMenuId) return;\n\n        const userId = getUserId();\n        if (!userId) return;\n\n        console.log(\"Saving to history - userId:\", userId, \"menu_id:\", actualMenuId);\n\n        axios.post(`${process.env.REACT_APP_BACKEND_URL}/history`, {\n            user_id: userId,\n            menu_id: actualMenuId\n        })\n            .then(res => {\n                console.log(\"History saved successfully:\", res.data);\n            })\n            .catch(err => {\n                console.error(\"Error saving history:\", err.response?.data || err.message);\n            });\n    }, [actualMenuId]);\n\n    // Check favorite status\n    useEffect(() => {\n        const checkFavorite = async () => {\n            const userId = getUserId();\n            if (!userId || !actualMenuId) return;\n\n            try {\n                const res = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/favorites/${userId}`);\n                const favIds = res.data.map(item => item.menu_id);\n                const isInFavorites = favIds.includes(actualMenuId);\n                setIsFavorite(isInFavorites);\n            } catch (err) {\n                console.error(\"Error fetching favorites:\", err);\n            }\n        };\n\n        checkFavorite();\n    }, [actualMenuId]);\n\n    // Fetch user allergies and check for alerts - COMBINED INTO ONE EFFECT\n    useEffect(() => {\n        const fetchAllergiesAndCheck = async () => {\n            const userId = getUserId();\n            if (!userId || !menuData?.ingredients_quantity) return;\n\n            try {\n                // Fetch user allergies\n                const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/users/${userId}`);\n                const allergies = response.data.user.allergies || [];\n                const allergyList = allergies.map(a => a.toLowerCase());\n                setUserAllergies(allergyList);\n\n                // Only check allergies if we have them and haven't acknowledged yet\n                if (allergyList.length === 0 || hasAcknowledgedAllergy) return;\n\n                const ingredients = Object.keys(menuData.ingredients_quantity);\n\n                try {\n                    // Call the backend to analyze allergies using GPT\n                    const allergyResponse = await axios.post(\n                        `${process.env.REACT_APP_BACKEND_URL}/analyze-allergies`,\n                        {\n                            ingredients: ingredients,\n                            allergies: allergyList\n                        }\n                    );\n\n                    const { alerts } = allergyResponse.data;\n\n                    if (alerts && alerts.length > 0) {\n                        setAllergyAlerts(alerts);\n                        setShowAllergyAlert(true);\n                    }\n                } catch (allergyError) {\n                    console.error('Error checking allergies with GPT, using fallback:', allergyError);\n                    \n                    // Fallback to simple string matching if API fails\n                    const alerts = [];\n                    ingredients.forEach(ingredient => {\n                        const ingredientLower = ingredient.toLowerCase();\n                        if (allergyList.some(allergy => ingredientLower.includes(allergy))) {\n                            alerts.push(ingredient);\n                        }\n                    });\n\n                    if (alerts.length > 0) {\n                        setAllergyAlerts(alerts);\n                        setShowAllergyAlert(true);\n                    }\n                }\n            } catch (error) {\n                console.error('Error fetching user allergies:', error);\n            }\n        };\n\n        fetchAllergiesAndCheck();\n    }, [menuData?.ingredients_quantity, hasAcknowledgedAllergy]); // Only depend on what's necessary\n\n    // share dish\n    useEffect(() => {\n        if (sharedDishImage && !ignoreSharedDish && !isSubmitting) {\n            setDishImage(sharedDishImage);\n            setHasDishPhoto(true);\n        }\n    }, [sharedDishImage, ignoreSharedDish, isSubmitting]);\n\n    // Fetch review\n    const fetchReviewData = async () => {\n        try {\n            const response = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/menu-detail/${actualMenuId}/reviews`);\n            const { reviews, menu_id, sum_rating, avg_rating, rate_5, rate_4, rate_3, rate_2, rate_1 } = response.data;\n            if (!actualMenuId) { \n                console.error(\"Backend did not return a valid menu_id.\");\n                return; \n            }\n            setReview(reviews[0]);\n            setRating({\n                review_lenght: reviews.length,\n                sum_rating: sum_rating || 0,\n                avg_rating: avg_rating || 0,\n                rate_5: rate_5 || 0,\n                rate_4: rate_4 || 0,\n                rate_3: rate_3 || 0,\n                rate_2: rate_2 || 0,\n                rate_1: rate_1 || 0,\n                percent_rate_5: (reviews.length > 0 ? (rate_5 / reviews.length) * 100 : 0),\n                percent_rate_4: (reviews.length > 0 ? (rate_4 / reviews.length) * 100 : 0),\n                percent_rate_3: (reviews.length > 0 ? (rate_3 / reviews.length) * 100 : 0),\n                percent_rate_2: (reviews.length > 0 ? (rate_2 / reviews.length) * 100 : 0),\n                percent_rate_1: (reviews.length > 0 ? (rate_1 / reviews.length) * 100 : 0)\n            });\n            const foundReview = reviews && Array.isArray(reviews) ? \n            reviews.some(review_find => String(review_find.user_id) === userId) : false; \n            setHasReview(foundReview);\n            console.log('check has review in fetch', foundReview, userId)\n            // console.log('type of userId:', typeof userId);\n\n        } catch (error) {\n            console.error('Error fetching review data:', error);\n            \n        }\n    };\n\n    useEffect(() => {\n        fetchReviewData();\n    }, [actualMenuId]);\n\n\n    if (!menuData) {\n        return (\n            <div className=\"menu-detail-container\">\n                <p>Loading menu details...</p>\n                <button className=\"back-button\" onClick={handleBackNavigation}>← Back</button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"menu-detail-container\">\n            <div className='image-header'>\n                <button className=\"back-button\" onClick={handleBackNavigation}></button>\n\n                <button className=\"favorite-button\" onClick={handleToggleFavorite}>\n                    <img\n                        src={isFavorite ? favorite : notfavorite}\n                        alt=\"Favorite\"\n                    />\n                </button>\n\n                <img\n                    src={menuData.image || unknowMenuImage}\n                    alt={menuData.menu_name}\n                    className=\"menu-image-large\"\n                />\n            </div>\n\n            {showAllergyAlert && allergyAlerts.length > 0 && (\n                <div className=\"allergy-popup-overlay\">\n                    <div className=\"allergy-popup\">\n                        <div className=\"allergy-popup-content\">\n                            <h2>⚠️ Food Allergy Alert</h2>\n                            <p>This recipe contains :</p>\n                            <ul className=\"allergy-list\">\n                                {allergyAlerts.map((ingredient, index) => (\n                                    <li key={index}><strong>{ingredient}</strong></li>\n                                ))}\n                            </ul>\n                            <button \n                                className=\"allergy-confirm-btn\"\n                                onClick={handleAllergyAcknowledge}\n                            >\n                                I Understand\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"text-container\">\n                <div className='menu-header'>\n                    <h1>{menuData.menu_name}</h1>\n                    <p>Prep time: {menuData.prep_time || 'N/A'}</p>\n                    <p>Cooking time: {menuData.cooking_time || 'N/A'}</p>\n                </div>\n\n                <h2>Ingredients</h2>\n                <div className=\"ingredientAndSeasoning-container\">\n                    {menuData.ingredients_quantity && Object.entries(menuData.ingredients_quantity)\n                        .filter(([name]) => {\n                            const type = menuData.ingredients_type?.[name];\n                            return type && type.toLowerCase() !== 'miscellaneous items';\n                        })\n                        .map(([name, quantity], idx) => (\n                            <div\n                                key={idx}\n                                className={`ingredient-item${selectedIngredients.some(i => i.name === name) ? ' selected' : ''}`}\n                                onClick={() => handleSelectIngredient(name, quantity)}\n                            >\n                                <img\n                                    src={ingredientImages[name] || unknowIngImage}\n                                    alt={name}\n                                    className=\"ingredients-image\"\n                                />\n                                <p className='header' title={name}>{name}</p>\n                                <p>{abbreviateUnit(quantity)}</p>\n                            </div>\n                        ))}\n                </div>\n\n                <h2>Seasoning/Dressing</h2>\n                <div className=\"ingredientAndSeasoning-container\">\n                    {menuData.ingredients_quantity && Object.entries(menuData.ingredients_quantity)\n                        .filter(([name]) => {\n                            const type = menuData.ingredients_type?.[name];\n                            return type && type.toLowerCase() === 'miscellaneous items';\n                        })\n                        .map(([name, quantity], idx) => (\n                            <div\n                                key={idx}\n                                className={`ingredient-item${selectedIngredients.some(i => i.name === name) ? ' selected' : ''}`}\n                                onClick={() => handleSelectIngredient(name, quantity)}\n                            >\n                                <img\n                                    src={ingredientImages[name] || unknowIngImage}\n                                    alt={name}\n                                    className=\"ingredients-image\"\n                                />\n                                <p className='header' title={name}>{name}</p>\n                                <p>{abbreviateUnit(quantity)}</p>\n                            </div>\n                        ))}\n                </div>\n\n                <div className=\"missing-ingredients\">\n                    <p className=\"missing-text\">Missing some ingredients?</p>\n                    <button\n                        className=\"add-to-list-button\"\n                        onClick={handleAddToList}\n                        disabled={selectedIngredients.length === 0}\n                    >\n                        Add to list\n                    </button>\n                </div>\n\n                <h2>Instructions</h2>\n                <ul className=\"instructions-list\">\n                    {menuData.steps?.map((step, idx) => (\n                        <li key={idx} className={checkedSteps.includes(idx) ? 'checked-step' : ''}>\n                            <label className=\"checkbox-label\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={checkedSteps.includes(idx)}\n                                    onChange={() => handleCheck(idx)}\n                                    className=\"custom-checkbox\"\n                                />\n                                <span className=\"custom-checkbox-styled\">\n                                    <img\n                                        src={checkedSteps.includes(idx) ? checkboxOncheck : checkbox}\n                                        alt=\"Checkbox\"\n                                    />\n                                </span>\n                                {step}\n                            </label>\n                        </li>\n                    ))}\n                </ul>\n\n                <h2>Tips</h2>\n                <div className=\"tips-container\">\n                    {menuData.tips?.length > 0 ? (\n                        <ul className=\"tips-list\">\n                            {menuData.tips.map((tip, idx) => (\n                                <li key={idx} className=\"tip-item\">\n                                    <img src={tipscheck} alt=\"tip icon\" className=\"tip-icon\" />\n                                    <span>{tip}</span>\n                                </li>\n                            ))}\n                        </ul>\n                    ) : (\n                        <p>No tips needed, just follow along and bon appétit!</p>\n                    )}\n                </div>\n\n                <h2>Nutrition (per serving)</h2>\n                <div className=\"nutrition-container\">\n                    {menuData.nutrition ? (\n                        <ul>\n                            <li>Calories: {menuData.nutrition.calories || 'N/A'}</li>\n                            <li>Protein: {menuData.nutrition.protein || 'N/A'}</li>\n                            <li>Fat: {menuData.nutrition.fat || 'N/A'}</li>\n                            <li>Carbohydrates: {menuData.nutrition.carbohydrates || 'N/A'}</li>\n                            <li>Sodium: {menuData.nutrition.sodium || 'N/A'}</li>\n                            <li>Sugar: {menuData.nutrition.sugar || 'N/A'}</li>\n                        </ul>\n                    ) : <p>No nutrition data available.</p>}\n                </div>\n            </div>\n            {/* share your dish section */}\n            <div className=\"share-dish-container\">\n                <img src={dishImage} alt=\"dish\" className=\"chef\" />\n\n                <h3>Share your dish</h3>\n\n                {!hasDishPhoto && (\n                    <div className=\"dish-photo-buttons\">\n                    <button className=\"dish-take-photo-button\" onClick={() => navigate(\"/camera-share-dish\", { state: { menu_id: actualMenuId }, replace: true })}>\n                    Take a photo\n                    </button>\n                    <button className=\"dish-select-photo-button\" onClick={() => dishFileInputRef.current.click()}>\n                    Select photo\n                    </button>\n\n                    <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        ref={dishFileInputRef}\n                        style={{ display: 'none' }}\n                        onChange={handleChooseDishFile}\n                    />\n                    </div>\n                )}\n\n                {hasDishPhoto && (\n                    <div className=\"dish-submit-buttons\">\n                        <textarea\n                            placeholder=\"Write a caption...\"\n                            value={dishCaption}\n                            onChange={(e) => setDishCaption(e.target.value)}\n                            className=\"dish-caption-box\"\n                        />\n                        <div className=\"dish-button-row\">\n                            <button className=\"dish-share-button\" onClick={handleSubmitDish}>\n                                Submit\n                            </button>\n                            <button className=\"dish-retake-button\" onClick={handleCancel}>\n                                Cancel\n                            </button>\n                        </div>\n                    </div>\n                )}\n                </div>\n                <div className=\"go-community-container\">\n                    <button \n                    className=\"go-community-button\" \n                    onClick={() => navigate('/community', { state: { dishImage, menu_id: actualMenuId } })}\n                    >\n                    See the Community\n                    </button>\n            </div>\n\n            {/* ส่วนของ review */}\n            <div className=\"review-container-in-menu\">\n                <div className=\"rating-container\">\n                    <div className=\"top-blank\">\n                    </div>\n                    <div className=\"pic-logo\">\n                        <img src={logo} id=\"logo-review\" alt=\"Sous Cook Logo\"/>\n                        <div className=\"caption-review\">Review this recipe</div>\n                        <div className=\"star-rating menu-rate\">\n                            {renderStars(ratings.avg_rating)}\n                        </div>\n                    </div>\n                </div>  \n\n                <div className=\"review-container menu-detail-review-container\">\n                    <div className=\"rw-rt\">\n                        <div className=\"rw\">{ratings.review_lenght} reviews</div>\n                        <div className=\"rt\">{ratings.sum_rating} ratings</div>\n                    </div>\n                    <div className=\"detail-rating\">\n                        <div className=\"left-rating\">\n                            <div className=\"rating-this-menu\">{ratings.avg_rating}</div>\n                            <div>out of 5</div>\n                        </div>\n                        <div className=\"right-rating\">\n                            {/* <div className=\"row\"> */}\n                            <div className=\"row-rate-right\">\n                                <div className=\"right-star\">\n                                    {renderStars(5)}\n                                </div>\n                                <div className=\"all-rate\">\n                                    <div className=\"progress-bar-rate\">\n                                        <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_5}%`}}></div>\n                                    </div>\n                                    \n                                </div>\n                                <div className=\"num-rate\">\n                                    <div className=\"num-review\">{ratings.rate_5}</div>\n                                </div>\n                            </div>\n                            <div className=\"row-rate-right\">\n                                <div className=\"right-star\">\n                                    {renderStars(4)}\n                                </div>\n                                <div className=\"all-rate\">\n                                    <div className=\"progress-bar-rate\">\n                                        <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_4}%`}}></div>\n                                    </div>\n                                    \n                                </div>\n                                <div className=\"num-rate\">\n                                    <div className=\"num-review\">{ratings.rate_4}</div>\n                                </div>\n                            </div>\n                            <div className=\"row-rate-right\">\n                                <div className=\"right-star\">\n                                    {renderStars(3)}\n                                </div>\n                                <div className=\"all-rate\">\n                                    <div className=\"progress-bar-rate\">\n                                        <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_3}%`}}></div>\n                                    </div>\n                                    \n                                </div>\n                                <div className=\"num-rate\">\n                                    <div className=\"num-review\">{ratings.rate_3}</div>\n                                </div>\n                            </div>\n                            <div className=\"row-rate-right\">\n                                <div className=\"right-star\">\n                                    {renderStars(2)}\n                                </div>\n                                <div className=\"all-rate\">\n                                    <div className=\"progress-bar-rate\">\n                                        <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_2}%`}}></div>\n                                    </div>\n                                    \n                                </div>\n                                <div className=\"num-rate\">\n                                    <div className=\"num-review\">{ratings.rate_2}</div>\n                                </div>\n                            </div>\n                            <div className=\"row-rate-right\">\n                                <div className=\"right-star\">\n                                    {renderStars(1)}\n                                </div>\n                                <div className=\"all-rate\">\n                                    <div className=\"progress-bar-rate\">\n                                        <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_1}%`}}></div>\n                                    </div>\n                                    \n                                </div>\n                                <div className=\"num-rate\">\n                                    <div className=\"num-review\">{ratings.rate_1}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <hr></hr>\n\n                        <div className=\"review-profile\">\n                            <div className=\"review-pro-pic\">\n                                {showProfle(review)}\n                            </div>\n                            <div className=\"review-pro-rate\">\n                                <div className=\"review-username\">{review.username}</div>\n                                <div className=\"review-rate my-rate\">\n                                    <div className=\"star-rating all-users-review\">\n                                        {renderStars(review.rating)}\n                                    </div>\n                                </div> \n                            </div>\n                        </div>\n                        <div className=\"comment-box\">\n                            <div className=\"review-text\">{review.comment}</div>\n                            {showDate(review)}\n                        </div>\n\n                        <hr></hr>\n\n                        <form className=\"review-form\" onSubmit={handleReview}>\n                            <div className=\"review-profile\">\n                                <div className=\"review-pro-pic\">\n                                    <img\n                                        src={userData.avatar_url\n                                            ? `${userData.avatar_url}`\n                                            : defaultProfile\n                                        }\n                                        className=\"my-review-pro\"\n                                        alt=\"avatar\"\n                                    />\n                                </div>\n                                <div className=\"review-pro-rate\">\n                                    <div className=\"review-username\">{userData.username}</div>\n                                    <div className=\"review-rate my-rate\">\n                                        <div className=\"star-rating\">\n                                            <input type=\"radio\" name=\"rating\" value={'5'} id=\"star5\" checked={formReview.rating === '5'} onChange={handleChangeReview}/><label for=\"star5\"></label>\n                                            <input type=\"radio\" name=\"rating\" value={'4'} id=\"star4\" checked={formReview.rating === '4'} onChange={handleChangeReview}/><label for=\"star4\"></label>\n                                            <input type=\"radio\" name=\"rating\" value={'3'} id=\"star3\" checked={formReview.rating === '3'} onChange={handleChangeReview}/><label for=\"star3\"></label>\n                                            <input type=\"radio\" name=\"rating\" value={'2'} id=\"star2\" checked={formReview.rating === '2'} onChange={handleChangeReview}/><label for=\"star2\"></label>\n                                            <input type=\"radio\" name=\"rating\" value={'1'} id=\"star1\" checked={formReview.rating === '1'} onChange={handleChangeReview}/><label for=\"star1\"></label>\n                                        </div>\n                                    </div> \n                                </div>\n                            </div>\n                            <div className=\"review-message-box\">\n                                <textarea name=\"comment\" placeholder=\"Add a comment...\" id=\"review-message-textarea\" value={formReview.comment} onChange={handleChangeReview}></textarea>\n                            </div>\n                            <div className=\"review-button-box\">\n                                <button type=\"submit\" className=\"post-review-button\">Post</button>\n                            </div>\n                        </form>\n                        {showUpdatePopup && (\n                            <div className=\"popup-overlay\">\n                                <div className=\"popup-content\">\n                                    <h2>Update Reiview</h2>\n                                    <p>Are you sure you want to update your review?</p>\n                                    <div className=\"popup-buttons\">\n                                        <button\n                                            className=\"cancel-button-review\"\n                                            onClick={() => setShowUpdatePopup(false)}\n                                        >\n                                            Cancel\n                                        </button>\n                                        <button\n                                            className=\"confirm-button-review\"\n                                            onClick={handleUpdateReview}\n                                        >\n                                            Update\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n              )}  \n                </div>\n                <button className=\"go-community-button\" \n                    onClick={() => navigate('/reviews', { state: { menu_id: actualMenuId } })}\n                    >\n                    See All Reviews\n                </button>\n            </div>\n            \n\n\n        </div>\n    );\n};\n\nconst fetchMissingImages = async (menuList, ingredientList) => {\n    let storedImages = getImageFromLocalStorage();\n\n    if (!storedImages || !Array.isArray(storedImages.menu)) {\n        storedImages = { menu: [], ingredient: {} };\n    }\n\n    const missingMenuItems = menuList.filter(menuItem => \n        !storedImages.menu.some(storedMenu => storedMenu.name === menuItem.name)\n    );\n\n    const missingIngredients = ingredientList.filter(ingredient => \n        !(ingredient in storedImages.ingredient)\n    );\n\n    console.log(\"missingMenuItems:\", missingMenuItems);\n    console.log(\"missingIngredients:\", missingIngredients);\n\n    if (missingMenuItems.length > 0 || missingIngredients.length > 0) {\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/get_ingredient_image`, { ingredients: missingIngredients });\n            const fetchedImages = response.data;\n\n            const newImages = {\n                menu: [...storedImages.menu, ...missingMenuItems.map(item => ({ name: item.name, image: item.image }))],\n                ingredient: { ...storedImages.ingredient, ...Object.fromEntries(fetchedImages.map(ingredient => [ingredient.ingredient, ingredient.imageUrl])) },\n            };\n\n            saveImageToLocalStorage(newImages);\n            console.log(\"Fetched images:\", newImages);\n            return newImages;\n        } catch (error) {\n            console.error('Error fetching images:', error);\n            return storedImages;\n        }\n    }\n\n    return storedImages;\n};\n\nconst abbreviateUnit = (quantity) => {\n    if (!quantity) return quantity;\n    return quantity\n        .replace(/\\btablespoons?\\b/gi, \"tbsp\")\n        .replace(/\\bteaspoons?\\b/gi, \"tsp\")\n        .replace(/\\bgrams?\\b/gi, \"g\")\n        .replace(/\\bmilliliters?\\b/gi, \"ml\");\n};\n\nconst renderStars = (rate) => {\n    const numericRating = parseFloat(rate) || 0;\n    const finalRating = Math.round(numericRating); \n    \n    const STAR_VALUES = [5, 4, 3, 2, 1];\n    \n    return STAR_VALUES.map((starValue) => (\n        <span \n            key={starValue} \n            className={`fa fa-star fa-1x star-base ${\n                starValue <= finalRating\n                    ? 'star-check' \n                    : '' \n            }`}\n        >\n        </span>\n    ));\n};\n\nconst showProfle = (review) => {\n    let final_profile = defaultProfile;\n    let avatarUrl = `${process.env.REACT_APP_BASE_URL}/uploads/avatars/${review.avatar}`\n    final_profile = `${avatarUrl}?t=${Date.now()}`;\n    return  (\n        <img\n            src={final_profile\n            ? `${final_profile}`\n            : defaultProfile\n            }  \n            className=\"my-review-pro\"\n            alt=\"avatar\"\n        />\n    );\n};\n\nconst showDate = (review) => {\n    if (review.updated_at) {\n        review.updated_at = review.updated_at.split('T')[0];\n        return (<div className=\"show-date-review\">{review.updated_at}</div>);\n    } else {\n        review.created_at = review.created_at.split('T')[0];\n        return (<div className=\"show-date-review\">{review.created_at}</div>);\n    }\n};\n\nexport default MenuDetail;\n","import React, { useState, useEffect } from 'react';\nimport { getIngredientsFromLocalStorage, savePreferencesToLocalStorage, getPreferencesFromLocalStorage,saveMenuToLocalStorage,printData } from '../utils/storageUtils';\nimport '../css/PreferencesPage.css';\nimport { useNavigate } from 'react-router-dom'; \n\nconst PreferencesPage = () => {\n    const [selectedCuisines, setSelectedCuisines] = useState([]);\n    const [selectedDietaryPreferences, setSelectedDietaryPreferences] = useState([]);\n    const [selectedMealOccasions, setSelectedMealOccasions] = useState([]);\n    const [ingredients, setIngredients] = useState([]);\n    const [isLoading, setIsLoading] = useState(false); // Loading state\n    const navigate = useNavigate();\n  \n    // Load stored preferences and ingredients on component mount\n    useEffect(() => {\n    const storedPreferences = getPreferencesFromLocalStorage();\n    if (storedPreferences) {\n        setSelectedCuisines(storedPreferences.cuisines || []);\n        setSelectedDietaryPreferences(storedPreferences.dietaryPreferences || []);\n        setSelectedMealOccasions(storedPreferences.mealOccasions || []);\n    }\n\n    const storedIngredients = getIngredientsFromLocalStorage();\n    setIngredients(storedIngredients || []);\n    }, []);\n\n    // Save preferences to local storage whenever a selection is made\n    useEffect(() => {\n        const preferences = {\n            cuisines: selectedCuisines,\n            dietaryPreferences: selectedDietaryPreferences,\n            mealOccasions: selectedMealOccasions,\n        };\n    savePreferencesToLocalStorage(preferences);\n    }, [selectedCuisines, selectedDietaryPreferences, selectedMealOccasions]);\n\n    const cuisines = ['Southeast Asian', 'American', 'Italian', 'Mexican', 'Indian', 'Fusion', 'South American', 'Middle Eastern', 'Mediterranean'];\n    const dietaryPreferences = ['Vegetarian', 'Lactose Intolerance', 'Pescatarian', 'Gluten intolerance', 'No red meat', 'Keto', 'Diabetes', 'Dairy-free', 'Low carb', 'High carb', 'High protein', 'Nuts Allergies', 'Healthy'];\n    const mealOccasions = ['Breakfast', 'Lunch', 'Dinner', 'Snack', 'Side Dish', 'Party'];\n\n    const toggleSelection = (item, setSelection, selectedItems) => {\n    setSelection(prevState =>\n        prevState.includes(item)\n        ? prevState.filter(selected => selected !== item)\n        : [...prevState, item]\n        );\n    };\n\n    const handleConfirm = async () => {\n        const ingredientNames = ingredients\n          .filter((i) => i && i.ingredient_name)\n          .map((i) => i.ingredient_name);\n      \n        console.log('Ingredient names being sent:', ingredientNames);\n        try {\n          setIsLoading(true);\n          const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/menu-recommendations`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              ingredients: ingredientNames, \n              cuisines: selectedCuisines,\n              dietaryPreferences: selectedDietaryPreferences,\n              mealOccasions: selectedMealOccasions,\n            }),\n          });\n      \n          const data = await response.json();\n          console.log('Menu recommendations:', data);\n      \n          // Save the menu recommendations to local storage\n          saveMenuToLocalStorage(data.recommendations);\n          printData('menus');\n          setIsLoading(false);\n          navigate('/menu-suggestion')\n        } catch (error) {\n          console.error('Error getting menu recommendations:', error);\n          setIsLoading(false);\n        }\n      };\n      \n    \n\n    return (\n    <>\n    {isLoading && <LoadingMenuPage />}\n    <div className=\"preferences-container\">\n        <div className='menu-header-container'>\n            <button className=\"back-button\" onClick={()=>navigate('/ingredient-preview')}></button>\n            <h1>Preferences</h1>\n        </div>\n        <h1 className=\"header\">Cuisines</h1>\n        <div className=\"preference-list\">\n        {cuisines.map(cuisine => (\n            <button\n            key={cuisine}\n            className={`preference-item ${selectedCuisines.includes(cuisine) ? 'selected' : ''}`}\n            onClick={() => toggleSelection(cuisine, setSelectedCuisines, selectedCuisines)}\n            >\n            {cuisine}\n            </button>\n        ))}\n        </div>\n\n        <div className='spliteline'></div>\n\n        <h1 className=\"header\">Dietary Preferences <span className=\"permanent-filter\">(This filter is permanent)</span></h1>\n        <div className=\"preference-list\">\n        {dietaryPreferences.map(preference => (\n            <button\n            key={preference}\n            className={`preference-item ${selectedDietaryPreferences.includes(preference) ? 'selected' : ''}`}\n            onClick={() => toggleSelection(preference, setSelectedDietaryPreferences, selectedDietaryPreferences)}\n            >\n            {preference}\n            </button>\n        ))}\n        </div>\n\n        <div className='spliteline'></div>\n\n        <h1 className=\"header\">Meal Occasions</h1>\n        <div className=\"preference-list\">\n        {mealOccasions.map(occasion => (\n            <button\n            key={occasion}\n            className={`preference-item ${selectedMealOccasions.includes(occasion) ? 'selected' : ''}`}\n            onClick={() => toggleSelection(occasion, setSelectedMealOccasions, selectedMealOccasions)}\n            >\n            {occasion}\n            </button>\n        ))}\n        </div>\n\n        <button className=\"search-button\" onClick={handleConfirm}>SEARCH FOR RECIPE</button>\n    </div>\n    </>\n    );\n    };\n    const LoadingMenuPage = () => {\n    return (\n        <div className=\"loading-overlay\">\n        <div className=\"loading-popup\">\n            <div className=\"spinner\"></div>\n            <p>Creating your menu, just a moment!</p>\n        </div>\n        </div>\n    );\n};\nexport default PreferencesPage;\n","// MenuSuggestion.js\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; \nimport { getMenuFromLocalStorage } from '../utils/storageUtils';\nimport '../css/MenuSuggestion.css';\nimport NotFoundImage from '../image/menu-suggestion/notfound-image.svg';\nimport axios from 'axios';\n\nconst MenuSuggestion = () => {\n  const [recommendations, setRecommendations] = useState([]);\n  const navigate = useNavigate();\n\nconst saveMenuToDB = async (menu) => {\n  try {\n    // First, check if menu already exists by name\n    const existingMenu = await axios.get(\n      `${process.env.REACT_APP_BACKEND_URL}/menus/by-name/${encodeURIComponent(menu.menu_name)}`\n    ).catch(() => null); // Return null if not found\n\n    if (existingMenu?.data?.menu_id) {\n      console.log(`Menu \"${menu.menu_name}\" already exists with ID: ${existingMenu.data.menu_id}`);\n      return { ...menu, menu_id: existingMenu.data.menu_id };\n    }\n\n    // If not exists, create new\n    const payload = {\n      menu_name: menu.menu_name,\n      prep_time: menu.prep_time || null,\n      cooking_time: menu.cooking_time || null,\n      steps: menu.steps || [],\n      ingredients_quantity: menu.ingredients_quantity || [],\n      ingredients_type: menu.ingredients_type || [],\n      nutrition: menu.nutrition || [],\n      tips: menu.tips || [],\n      image: menu.image || null,\n    };\n\n    const res = await axios.post(\n      `${process.env.REACT_APP_BACKEND_URL}/menus`,\n      payload\n    );\n\n    console.log(\"Save menu response:\", res.data);\n\n    if (res.data && res.data.menu && res.data.menu.menu_id) {\n      return { ...menu, menu_id: res.data.menu.menu_id };\n    }\n\n    return menu;\n\n  } catch (err) {\n    console.error(\"Error saving menu to DB:\", err);\n    return menu;\n  }\n};\n\n  useEffect(() => {\n    const storedRecommendations = getMenuFromLocalStorage();\n    console.log(\"storedRecommendations:\", storedRecommendations);\n\n    if (storedRecommendations && storedRecommendations.menus && Array.isArray(storedRecommendations.menus)) {\n      // Save menus to DB and get IDs, then set state once\n      Promise.all(storedRecommendations.menus.map(menu => saveMenuToDB(menu)))\n        .then((menusWithIds) => {\n          setRecommendations(menusWithIds);\n          console.log(\"Recommendations with IDs:\", menusWithIds);\n        })\n        .catch(err => {\n          console.error(\"Error processing recommendations:\", err);\n          // Fallback to showing menus without IDs\n          setRecommendations(storedRecommendations.menus);\n        });\n    } else {\n      console.error(\"Recommendations are not in a valid format:\", storedRecommendations);\n      setRecommendations([]);\n    }\n  }, []);\n\n  const goToMenuDetail = (menu) => {\n    // The menu_id should now be present in the menu object.\n    if (menu.menu_id) {\n      navigate('/menu-detail', { state: { menu, menu_id: menu.menu_id } });\n    } else {\n      console.error('Cannot navigate to details, menu_id is missing.', menu);\n      // Optional: Fallback to fetch by name if ID is still missing for some reason\n      axios.get(`${process.env.REACT_APP_BACKEND_URL}/menus/by-name/${encodeURIComponent(menu.menu_name)}`)\n        .then(res => {\n          const menuFromDB = res.data;\n          navigate('/menu-detail', { state: { menu, menu_id: menuFromDB.menu_id } });\n        })\n        .catch(err => console.error('Fallback to get menu_id from DB failed', err));\n    }\n  };\n\n  const onBack = () => {\n    navigate('/preferences');\n  };\n\n  return (\n    <div className=\"menu-suggestion-container\">\n      <div className='menu-header-container'>\n        <button className=\"back-button\" onClick={onBack}></button>\n        <h1>Menu Suggestions</h1>\n      </div>\n      \n      {recommendations.length > 0 ? (\n        <ul className=\"menu-list\">\n          {recommendations.map((menu, index) => (\n            <li key={index} className=\"menu-item\" onClick={() => goToMenuDetail(menu)}>\n              <img\n                src={menu.image || NotFoundImage}\n                alt={menu.menu_name}\n                className=\"menu-image\"\n              />\n              <div className=\"menu-details\">\n                <h2>{menu.menu_name}</h2>\n                <p>Prep time: {menu.prep_time || 'N/A'}</p>\n                <p>Cooking time: {menu.cooking_time || 'N/A'}</p>\n              </div>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>No recommendations available.</p>\n      )}\n    </div>\n  );\n};\n\nexport default MenuSuggestion;","// IngredientPreview.js\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { saveIngredientsToLocalStorage, getIngredientsFromLocalStorage,getCameraIngredientsFromLocalStorage,saveCameraIngredientsToLocalStorage} from '../utils/storageUtils';\nimport '../css/IngredientPreview.css';\nimport PreferencesPage from './PreferencesPage';\n\n// Importing SVG icons\nimport EggMilkDairy from '../Icon/Ingredient/Egg, milk, and dairy product.svg';\nimport FatsOils from '../Icon/Ingredient/Fats and oils.svg';\nimport Fruits from '../Icon/Ingredient/Fruits.svg';\nimport GrainsNutsBaking from '../Icon/Ingredient/Grains, nuts, and baking products.svg';\nimport HerbsSpices from '../Icon/Ingredient/Herbs and spices.svg';\nimport MeatSausagesFish from '../Icon/Ingredient/Meat, sausages and fish.svg';\nimport Miscellaneous from '../Icon/Ingredient/Other.svg';\nimport PastaRicePulses from '../Icon/Ingredient/Pasta, rice, and pulses.svg';\nimport Vegetables from '../Icon/Ingredient/Vegetable.svg';\n\nimport editBtn from '../Icon/Button/Edit_btn.png';\nimport deleteBtn from '../Icon/Button/Delete_btn.png';\nimport addBtn from '../Icon/Button/Add_btn.svg';\n\nconst IngredientPreview = ({ updatedIngredients }) => {\n  const location = useLocation();\n  const [ingredients, setIngredients] = useState([]);\n  const [editIndex, setEditIndex] = useState(null);\n  const [editedName, setEditedName] = useState('');\n  const [isReferencePage, setIsReferencePage] = useState(false);\n  const navigate = useNavigate();\n\n  const iconMap = {\n    \"egg\": EggMilkDairy, \"dairy products\": EggMilkDairy, \"milk\": EggMilkDairy,\n    \"fats\": FatsOils, \"oils\": FatsOils,\n    \"fruits\": Fruits,\n    \"grains\": GrainsNutsBaking, \"nuts\": GrainsNutsBaking, \"baking\": GrainsNutsBaking,\n    \"herbs\": HerbsSpices, \"spices\": HerbsSpices,\n    \"meat\": MeatSausagesFish, \"sausages\": MeatSausagesFish, \"fish\": MeatSausagesFish,\n    \"pasta\": PastaRicePulses, \"rice\": PastaRicePulses, \"pulses\": PastaRicePulses,\n    \"vegetables\": Vegetables,\n  };\n\n  const getIconForIngredientType = (ingredientType = \"\") => {\n    const typeLower = ingredientType.toLowerCase();\n    for (const key in iconMap) {\n      if (typeLower.includes(key)) {\n        return iconMap[key];\n      }\n    }\n    return Miscellaneous;\n  };\n\n  const getUniqueIngredients = (ingredients) => {\n    const seen = new Set();\n    return ingredients.filter(ing => {\n      if (!ing || typeof ing !== 'object') return false;\n      const name = ing.ingredient_name?.trim().toLowerCase();\n      if (!name || seen.has(name)) return false;\n      seen.add(name);\n      return true;\n    });\n  };\n\nuseEffect(() => {\n  const normalIngredients = getIngredientsFromLocalStorage();\n  const cameraIngredients = getCameraIngredientsFromLocalStorage();\n  const allIngredients = [...normalIngredients, ...cameraIngredients];\n  const uniqueIngredients = getUniqueIngredients(allIngredients);\n  setIngredients(uniqueIngredients);\n}, []);\n\n  useEffect(() => {\n    if (updatedIngredients) {\n      setIngredients(prevIngredients => {\n        const newIngredientsList = [...prevIngredients, ...updatedIngredients];\n        const uniqueList = getUniqueIngredients(newIngredientsList);\n        saveIngredientsToLocalStorage(uniqueList);\n        return uniqueList;\n      });\n    }\n  }, [updatedIngredients]);\n\n  const handleConfirm = () => setIsReferencePage(true);\n  const handleBackToIngredientPreview = () => setIsReferencePage(false);\n\n  const handleEdit = (index) => {\n    setEditIndex(index);\n    setEditedName(ingredients[index].ingredient_name);\n  };\n\n  const saveIngredients = (updatedList) => {\n    setIngredients(updatedList);\n    saveIngredientsToLocalStorage(updatedList);\n  };\n\n  const handleSaveEdit = (index) => {\n    const updatedIngredients = [...ingredients];\n    updatedIngredients[index].ingredient_name = editedName;\n    saveIngredients(updatedIngredients);\n    setEditIndex(null);\n    setEditedName('');\n  };\n\n  const handleCancelEdit = () => setEditIndex(null);\n\n  const handleDelete = (index) => {\n    const ingToDelete = ingredients[index];\n\n    // ลบจาก normal ingredients\n    const normalIngredients = getIngredientsFromLocalStorage().filter(ing => ing.ingredient_name !== ingToDelete.ingredient_name);\n    saveIngredientsToLocalStorage(normalIngredients);\n\n    // ลบจาก camera ingredients\n    const cameraIngredients = getCameraIngredientsFromLocalStorage().filter(ing => ing.ingredient_name !== ingToDelete.ingredient_name);\n    saveCameraIngredientsToLocalStorage(cameraIngredients);\n\n    // อัพเดต state\n    setIngredients(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleAddIngredient = () => navigate('/search');\n  const handleBack = () => navigate('/search');\n\n  return (\n    <>\n      {isReferencePage ? (\n        <PreferencesPage onBack={handleBackToIngredientPreview} />\n      ) : (\n        <div className=\"ingredient-preview-container\">\n          <div className='menu-header-container'>\n            <button className=\"back-button\" onClick={handleBack}></button>\n            <h1>Ingredient List</h1>\n          </div>\n          <ul className=\"ingredient-list\">\n            {ingredients.length === 0 ? (\n              <li className=\"no-ingredients\">No ingredients detected</li>\n            ) : (\n              ingredients.map((ingredient, index) => {\n                if (!ingredient || !ingredient.ingredient_name || !ingredient.ingredient_type) {\n                  return null;\n                }\n                const iconSrc = getIconForIngredientType(ingredient.ingredient_type);\n                return (\n                  <li key={`${ingredient.ingredient_name}-${index}`} className=\"ingredient-items\">\n                    <img src={iconSrc} alt={`${ingredient.ingredient_type} icon`} className=\"ingredient-icon\" />\n                    {editIndex === index ? (\n                      <>\n                        <input \n                          type=\"text\" \n                          value={editedName} \n                          onChange={(e) => setEditedName(e.target.value)} \n                          className=\"ingredient-edit-input\"\n                        />\n                        <button className=\"save-btn\" onClick={() => handleSaveEdit(index)}>Save</button>\n                        <button className=\"cancel-btn\" onClick={handleCancelEdit}>Cancel</button>\n                      </>\n                    ) : (\n                      <>\n                        <span>{ingredient.ingredient_name}</span>\n                        <div className='ingredient-actions'>\n                          <button className=\"edit-btn\" onClick={() => handleEdit(index)}>\n                            <img src={editBtn} alt=\"Edit\" />\n                          </button>\n                          <button className=\"delete-btn\" onClick={() => handleDelete(index)}>\n                            <img src={deleteBtn} alt=\"Delete\" />\n                          </button>\n                        </div>\n                      </>\n                    )}\n                  </li>\n                );\n              })\n            )}\n          </ul>\n          \n          <button className=\"plus-btn\" onClick={handleAddIngredient}>\n            <img src={addBtn} alt=\"Add ingredient\" style={{width: '32px', height: '32px'}} />\n          </button>\n          \n          <button className=\"confirm-btn\" onClick={handleConfirm}>CONFIRM</button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default IngredientPreview;","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport '../css/HomePage.css';\nimport { getUserId, isLoggedIn } from '../utils/auth';\nimport { getShoppingListFromStorage } from '../utils/storageUtils';\nimport header from '../image/homepage/Header.svg';\nimport listicon from '../image/homepage/List.svg';\nimport searchicon from '../image/homepage/Search-Icon.svg'\nimport bread from '../image/homepage/Bread.svg';\nimport tomato from '../image/homepage/Tomato.svg';\nimport celery from '../image/homepage/Celery.svg';\nimport pork from '../image/homepage/Pork.svg';\nimport breadclick from '../image/homepage/BreadClick.svg';\nimport tomatoclick from '../image/homepage/TomatoClick.svg';\nimport celeryclick from '../image/homepage/CeleryClick.svg';\nimport porkclick from '../image/homepage/PorkClick.svg';\nimport banner1 from '../image/homepage/banner/Banner1.svg';\nimport banner2 from '../image/homepage/banner/Banner2.svg';\nimport banner3 from '../image/homepage/banner/Banner3.svg';\nimport banner4 from '../image/homepage/banner/Banner4.svg';\nimport randommenu from '../image/homepage/random-menu/Random-menu.svg';\nimport news from '../image/homepage/news/News.svg'\n\n\nconst HomePage = () => {\n  const navigate = useNavigate();\n  const [activeImages, setActiveImages] = useState([bread, tomato, celery, pork]);\n  const [username, setUsername] = useState(\"USER\");\n  const [isLoadingRandom, setIsLoadingRandom] = useState(false);\n  const [isUserLoggedIn, setIsUserLoggedIn] = useState(false);\n  const [shoppingListCount, setShoppingListCount] = useState(0);\n\n  // State สำหรับข้อมูลสถิติ\n  const [chartData, setChartData] = useState([]);\n  const [statsLoading, setStatsLoading] = useState(true);\n  const [currentMonthMeals, setCurrentMonthMeals] = useState(0);\n  const [currentMonthCO2, setCurrentMonthCO2] = useState(0);\n\n  const logSafeUserEvent = (event, details = {}) => {\n    const safeDetails = { ...details };\n    if (safeDetails.userId) safeDetails.userId = '****';\n    if (safeDetails.username) safeDetails.username = '****';\n    if (safeDetails.email) safeDetails.email = '****';\n    console.log(`Event: ${event}`, safeDetails);\n  };\n\n  useEffect(() => {\n    const userId = getUserId();\n    const loggedIn = isLoggedIn();\n    setIsUserLoggedIn(loggedIn);\n\n    const fetchUserData = async () => {\n      try {\n        if (!userId) {\n          logSafeUserEvent('auth_check', { status: 'not_authenticated' });\n          setUsername(\"USER\");\n          setStatsLoading(false);\n          return;\n        }\n\n        // ดึงข้อมูล user\n        const userResponse = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/users/${userId}`);\n        const user = userResponse.data.user;\n\n        logSafeUserEvent('user_data_fetch', {\n          status: 'success',\n          hasData: !!user\n        });\n\n        if (user && user.username) {\n          setUsername(user.username.toUpperCase() + \"!\");\n        }\n\n        // ดึงข้อมูลสถิติรายเดือน\n        const statsResponse = await axios.get(\n          `${process.env.REACT_APP_BACKEND_URL}/users/${userId}/monthly-meal-stats`\n        );\n\n        const stats = statsResponse.data;\n\n        // แปลงข้อมูลให้เป็นรูปแบบสำหรับกราฟ\n        const formattedData = stats.monthly_stats.map(item => ({\n          month: item.month,\n          value: item.meal_count\n        }));\n\n        setChartData(formattedData);\n        setCurrentMonthMeals(stats.current_month.meal_count);\n        setCurrentMonthCO2(parseFloat(stats.current_month.co2_saved));\n        setStatsLoading(false);\n\n      } catch (error) {\n        logSafeUserEvent('user_data_fetch', {\n          status: 'error',\n          errorType: error.response?.status === 401 ? 'unauthorized' : 'fetch_failed'\n        });\n\n        if (error.response?.status === 401 || error.response?.status === 403) {\n          logSafeUserEvent('guest_access');\n        }\n        setStatsLoading(false);\n      }\n    };\n\n    fetchUserData();\n  }, []);\n\n  // Add useEffect to load shopping list count\n  useEffect(() => {\n    const loadShoppingList = () => {\n      const list = getShoppingListFromStorage();\n      setShoppingListCount(list.length);\n    };\n\n    loadShoppingList();\n    window.addEventListener('storage', loadShoppingList);\n    \n    return () => window.removeEventListener('storage', loadShoppingList);\n  }, []);\n\n  const toggleImage = (index) => {\n    const newImages = [...activeImages];\n    switch (index) {\n      case 0:\n        newImages[0] = newImages[0] === bread ? breadclick : bread;\n        break;\n      case 1:\n        newImages[1] = newImages[1] === tomato ? tomatoclick : tomato;\n        break;\n      case 2:\n        newImages[2] = newImages[2] === celery ? celeryclick : celery;\n        break;\n      case 3:\n        newImages[3] = newImages[3] === pork ? porkclick : pork;\n        break;\n      default:\n        break;\n    }\n    setActiveImages(newImages);\n  };\n\n  // ค่าคงที่สำหรับกราฟ - ขยายความสูงโดยลด bottomPadding\n  const chartWidth = 314;\n  const chartHeight = 220;  // เพิ่มจาก 180 เป็น 220\n  const leftPadding = 35;\n  const rightPadding = 15;\n  const topPadding = 15;\n  const bottomPadding = 28;  // ลดจาก 35 เป็น 28 เพื่อไม่ดันข้อความ\n\n  const getChartBounds = () => {\n    if (chartData.length === 0) {\n      return { minValue: 0, maxValue: 20 };\n    }\n\n    const values = chartData.map(d => d.value);\n    const maxDataValue = Math.max(...values);\n\n    if (maxDataValue === 0) {\n      return { minValue: 0, maxValue: 5 };\n    }\n\n    // กำหนด maxValue ให้เป็นค่าที่หารลงตัว\n    let niceMax;\n    if (maxDataValue <= 5) {\n      niceMax = 5;\n    } else if (maxDataValue <= 10) {\n      niceMax = 10;\n    } else if (maxDataValue <= 20) {\n      niceMax = 20;\n    } else if (maxDataValue <= 50) {\n      niceMax = Math.ceil(maxDataValue / 10) * 10;\n    } else {\n      niceMax = Math.ceil(maxDataValue / 20) * 20;\n    }\n\n    return {\n      minValue: 0,\n      maxValue: niceMax\n    };\n  };\n\n  const { minValue, maxValue } = getChartBounds();\n\n  const plotWidth = chartWidth - leftPadding - rightPadding;\n  const plotHeight = chartHeight - topPadding - bottomPadding;\n\n  // กำหนดจำนวน Grid Lines ตาม maxValue\n  const getGridCount = (max) => {\n    if (max <= 5) return 6;    \n    if (max <= 10) return 6;   \n    if (max <= 20) return 5;  \n    if (max <= 50) return 6;   \n    return 5;\n  };\n\n  const gridLines = getGridCount(maxValue);\n\n  // ฟังก์ชันคำนวณตำแหน่ง Y ที่แม่นยำ\n  const calculateY = (value) => {\n    return topPadding + plotHeight - ((value / maxValue) * plotHeight);\n  };\n\n  // ฟังก์ชันคำนวณตำแหน่ง X\n  const calculateX = (index, dataLength) => {\n    if (dataLength === 1) {\n      return leftPadding + plotWidth / 2;\n    }\n    return leftPadding + (index * plotWidth) / (dataLength - 1);\n  };\n\n  const createPath = (data) => {\n    if (data.length === 0) return '';\n\n    const points = data.map((point, index) => {\n      const x = calculateX(index, data.length);\n      const y = calculateY(point.value);\n      return `${x},${y}`;\n    });\n\n    return `M ${points.join(' L ')}`;\n  };\n\n  // สร้าง array ของค่า Grid\n  const getGridValues = () => {\n    const values = [];\n    const step = maxValue / (gridLines - 1);\n    \n    for (let i = 0; i < gridLines; i++) {\n      values.push(Math.round(step * i));\n    }\n    \n    return values;\n  };\n\n  const gridValues = getGridValues();\n\n  const handleRandomMenu = async () => {\n    setIsLoadingRandom(true);\n\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/random-menu`);\n\n      if (response.data.success && response.data.menu?.menu_id) {\n        navigate('/menu-detail', {\n          state: {\n            menu: response.data.menu,\n            menu_id: response.data.menu.menu_id,\n            isRandomMenu: true\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert(\"Failed to generate menu. Please try again.\");\n    } finally {\n      setIsLoadingRandom(false);\n    }\n  };\n\n  // Update list icon click handler\n  const handleListIconClick = () => {\n    const shoppingList = getShoppingListFromStorage();\n    navigate(\"/shoppinglist\", { state: { missingIngredients: shoppingList } });\n  };\n\n  return (\n    <div className=\"homepage-container\">\n      <img src={header} alt=\"Header\" className=\"header-image\" />\n      <div className=\"second-container\">\n        <p className=\"greet-user\">HELLO <span className=\"username\">{username}</span></p>\n        <div className=\"list-icon-container\">\n          <img \n            src={listicon} \n            alt=\"List\" \n            className=\"list-icon\" \n            onClick={handleListIconClick}\n            style={{ cursor: \"pointer\" }} \n          />\n          {shoppingListCount > 0 && (\n            <span className=\"list-badge\">{shoppingListCount}</span>\n          )}\n        </div>\n      </div>\n\n      <p className=\"question-text\">What's on your mind today chef?</p>\n      <div className=\"search-box\" onClick={() => navigate(\"/search\")}>\n        <img src={searchicon} alt=\"search\" className=\"search-icon\" />\n        <p className=\"search-text\">Search your ingredients here</p>\n      </div>\n\n      <div className=\"most-searched\">\n        <p className=\"most-searched-text\">Most Searched Ingredients</p>\n        <div className=\"ingredients-scroll\">\n          {activeImages.map((img, idx) => (\n            <img\n              key={idx}\n              src={img}\n              alt={`Ingredient ${idx}`}\n              onClick={() => toggleImage(idx)}\n              style={{ cursor: \"pointer\" }}\n            />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"food-waste-stat\">\n        <p className=\"food-waste-text\">Food Waste Reduction Stat</p>\n        <div className=\"chart-box\">\n          <svg className=\"chart-svg\" viewBox={`0 0 ${chartWidth} ${chartHeight}`}>\n            {/* Horizontal grid lines */}\n            {gridValues.map((value, i) => {\n              const y = calculateY(value);\n              return (\n                <line\n                  key={`h-${i}`}\n                  x1={leftPadding}\n                  y1={y}\n                  x2={chartWidth - rightPadding}\n                  y2={y}\n                  stroke=\"#f0f0f0\"\n                  strokeWidth=\"1\"\n                />\n              );\n            })}\n\n            {/* Vertical grid lines */}\n            {chartData.map((_, i) => {\n              const x = calculateX(i, chartData.length);\n              return (\n                <line\n                  key={`v-${i}`}\n                  x1={x}\n                  y1={topPadding}\n                  x2={x}\n                  y2={chartHeight - bottomPadding}\n                  stroke=\"#f0f0f0\"\n                  strokeWidth=\"1\"\n                />\n              );\n            })}\n\n            {/* Chart line */}\n            <path\n              d={createPath(chartData)}\n              fill=\"none\"\n              stroke=\"#CCDA46\"\n              strokeWidth=\"3\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n\n            {/* Data points */}\n            {chartData.map((point, index) => {\n              const x = calculateX(index, chartData.length);\n              const y = calculateY(point.value);\n              return (\n                <circle\n                  key={index}\n                  cx={x}\n                  cy={y}\n                  r=\"4\"\n                  fill=\"#B0BD39\"\n                  stroke=\"#fff\"\n                  strokeWidth=\"2\"\n                />\n              );\n            })}\n\n            {/* Y-axis labels - ใช้ค่าจาก gridValues */}\n            {gridValues.map((value, i) => {\n              const y = calculateY(value);\n              return (\n                <text\n                  key={`y-label-${i}`}\n                  x={leftPadding - 10}\n                  y={y + 4}\n                  textAnchor=\"end\"\n                  style={{\n                    fontSize: '13px',\n                    fill: '#6D6C6C',\n                    fontFamily: 'Quicksand',\n                    fontWeight: 500\n                  }}\n                >\n                  {value}\n                </text>\n              );\n            })}\n\n            {/* X-axis labels */}\n            {chartData.map((point, index) => {\n              const x = calculateX(index, chartData.length);\n              return (\n                <text\n                  key={index}\n                  x={x}\n                  y={chartHeight - bottomPadding + 20}\n                  textAnchor=\"middle\"\n                  style={{\n                    fontSize: '13px',\n                    fill: '#6D6C6C',\n                    fontFamily: 'Quicksand',\n                    fontWeight: 500\n                  }}\n                >\n                  {point.month}\n                </text>\n              );\n            })}\n          </svg>\n\n          <div className=\"stat-info\">\n            <p className=\"stat-text\">\n              You made <span className=\"highlight-orange\">{currentMonthMeals} {currentMonthMeals === 1 ? 'dish' : 'dishes'}</span> this month\n            </p>\n            <p className=\"stat-text\">\n              Around <span className=\"highlight-orange\">{currentMonthCO2.toFixed(1)} kg</span> of CO2 saved!\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"banner-container\">\n        <div className=\"banner-row\">\n          <img src={banner1} alt=\"BANNER1\" className=\"banner-scroll\" />\n          <img src={banner2} alt=\"BANNER2\" className=\"banner-scroll\" />\n          <img src={banner3} alt=\"BANNER3\" className=\"banner-scroll\" />\n          <img src={banner4} alt=\"BANNER4\" className=\"banner-scroll\" />\n        </div>\n      </div>\n\n      <div className=\"random-container\">\n        <div className=\"random-box\">\n          <img src={randommenu} alt=\"RANDOM\" className=\"random-menu\" />\n          <button\n            className={`random-btn ${isLoadingRandom ? 'loading' : ''}`}\n            style={{ cursor: isLoadingRandom ? \"not-allowed\" : \"pointer\" }}\n            onClick={handleRandomMenu}\n            disabled={isLoadingRandom}\n          >\n            {isLoadingRandom ? 'GENERATING...' : 'START RANDOM'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"news-container\">\n        <img src={news} alt=\"NEWS\" className=\"news\" />\n      </div>\n    </div>\n  );\n};\n\nexport default HomePage;","import React, { useState, useRef, useEffect } from 'react';\nimport '../css/AboutMe.css';\nimport logo from '../image/Logo.svg'; // page 1\nimport pic2 from '../image/picAboutMe2.jpg'; // page 2\nimport pic3 from '../image/picAboutMe3.svg'; // page 3\nimport { useNavigate } from 'react-router-dom';\n\nconst AboutMe = () => {\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startX, setStartX] = useState(0);\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const containerRef = useRef(null);\n  const navigate = useNavigate();\n\n  const slides = [\n    {\n      id: 1,\n      image: logo,\n      description:\n        'Sous cook is your little cooking helper, he will suggest whip-up delicious recipes based on your ingredients!',\n      type: 'logo',\n    },\n    {\n      id: 2,\n      image: pic2,\n      title: 'OUR MISSION',\n      description:'\"Provide a proper cooking and food preparation techniques to significantly minimize food waste.\"',\n      type: 'circle',\n    },\n    {\n      id: 3,\n      image: pic3,\n      title: 'Join Us Now!',\n      description:\n        '\\\"Cutting down on food waste not only positively impacts the world but also puts money back in your pocket by eliminating unnecessary spending.\\\"\\n\\nLet’s be a part of eco-conscious together !',\n      type: 'banner',\n    },\n  ];\n\n  const nextSlide = () => {\n    setCurrentSlide((prev) => (prev + 1) % slides.length);\n  };\n\n  const prevSlide = () => {\n    setCurrentSlide((prev) => (prev - 1 + slides.length) % slides.length);\n  };\n\n  const goToSlide = (index) => {\n    setCurrentSlide(index);\n  };\n\n  // Touch/Mouse handlers for swiping\n  const handleStart = (e) => {\n    setIsDragging(true);\n    const clientX =\n      e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;\n    setStartX(clientX);\n    setScrollLeft(currentSlide * containerRef.current.offsetWidth);\n  };\n\n  const handleMove = (e) => {\n    if (!isDragging) return;\n    e.preventDefault();\n    const clientX =\n      e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;\n    const walk = (startX - clientX) * 2;\n    const newScrollLeft = scrollLeft + walk;\n\n    // Update slide based on scroll position\n    const slideWidth = containerRef.current.offsetWidth;\n    const newSlideIndex = Math.round(newScrollLeft / slideWidth);\n\n    if (\n      newSlideIndex !== currentSlide &&\n      newSlideIndex >= 0 &&\n      newSlideIndex < slides.length\n    ) {\n      setCurrentSlide(newSlideIndex);\n    }\n  };\n\n  const handleEnd = () => {\n    setIsDragging(false);\n  };\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      if (e.key === 'ArrowRight') {\n        nextSlide();\n      } else if (e.key === 'ArrowLeft') {\n        prevSlide();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [currentSlide]);\n\n  return (\n    <div className=\"onboarding-container\">\n      {/* Slides Container */}\n      <div\n        ref={containerRef}\n        className=\"slides-wrapper\"\n        style={{ transform: `translateX(-${currentSlide * 100}%)` }}\n        onMouseDown={handleStart}\n        onMouseMove={handleMove}\n        onMouseUp={handleEnd}\n        onMouseLeave={handleEnd}\n        onTouchStart={handleStart}\n        onTouchMove={handleMove}\n        onTouchEnd={handleEnd}\n      >\n        {slides.map((slide) => (\n          <div\n            key={slide.id}\n            className={`slide ${\n              slide.type === 'banner' ? 'slide-banner' : ''\n            }`}\n          >\n            \n            {/* Top Section with Icon/Image */}\n            <div className=\"slide-content\">\n\n              {/* IMAGE AREA */}\n            {slide.type === \"circle\" && (\n              <div className=\"image-circle\">\n                <img src={slide.image} alt={slide.title || 'slide image'} className=\"circle-img\" />\n              </div>\n            )}\n\n            {slide.type === \"logo\" && (\n              <div className=\"image-logo\">\n                <img src={slide.image} alt=\"SousCook Logo\" className=\"logo-img\" />\n              </div>\n            )}\n\n            {slide.type === \"banner\" && (\n              <div className=\"image-banner\">\n                <img src={slide.image} alt={slide.title || 'slide image'} className=\"banner-img\" />\n              </div>\n            )}\n\n              {/* TEXT AREA */}\n              <div className=\"text-content\">\n                {slide.title && (\n                  <h1 className=\"slide-title\">{slide.title}</h1>\n                )}\n                <p className=\"slide-description\">{slide.description}</p>\n              </div>\n            </div>\n\n            {/* FOOTER */}\n            <div className=\"slide-footer\">\n              <div className=\"dot-indicators\">\n                {slides.map((_, dotIndex) => (\n                  <button\n                    key={dotIndex}\n                    onClick={() => goToSlide(dotIndex)}\n                    className={`dot ${\n                      dotIndex === currentSlide ? 'dot-active' : ''\n                    }`}\n                  />\n                ))}\n              </div>\n\n              <button\n                className=\"get-started-btn\"\n                onClick={() => navigate('/login')}\n              >\n                GET STARTED\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default AboutMe;","import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom'; // Import useNavigate for routing\nimport '../css/Navbar.css';\nimport IconHome from '../image/nav_icon/icon_home.svg';\nimport IconHeart from '../image/nav_icon/icon_like.svg';\nimport IconCamera from '../image/nav_icon/icon_camera.svg';\nimport IconClock from '../image/nav_icon/icon_history.svg';\nimport IconUser from '../image/nav_icon/icon_people.svg';\n\nconst Navbar = () => {\n    const navigate = useNavigate(); // Initialize navigation hook\n    const location = useLocation();\n\n    const currentPath = location.pathname.replace('/', '') || 'home';\n\n    const handleNavigation = (page) => {\n        navigate(`/${page}`); // Navigate to the selected page\n    };\n\n    return (\n        <div className=\"navbar\">\n            <a className={`home nav-item ${currentPath === 'home' ? 'selected' : ''}`} \n               onClick={() => handleNavigation('home')}>\n                <img src={IconHome} alt=\"home\" />\n            </a>\n            <a className={`heart nav-item ${currentPath === 'favorites' ? 'selected' : ''}`} \n               onClick={() => handleNavigation('favorites')}>\n                <img src={IconHeart} alt=\"favorites\" />\n            </a>\n            <a className={`camera nav-item ${currentPath === 'camera' ? 'selected' : ''}`} \n               onClick={() => handleNavigation('camera')}>\n                <img src={IconCamera} alt=\"camera\" />\n            </a>\n            <a className={`history nav-item ${currentPath === 'history' ? 'selected' : ''}`} \n               onClick={() => handleNavigation('history')}>\n                <img src={IconClock} alt=\"history\" />\n            </a>\n            <a className={`account nav-item ${currentPath === 'account' ? 'selected' : ''}`} \n               onClick={() => handleNavigation('account')}>\n                <img src={IconUser} alt=\"account\" />\n            </a>\n        </div>\n    );\n}\n\nexport default Navbar;\n","import React, { useRef, useCallback, useState } from 'react';\nimport Webcam from 'react-webcam';\nimport { saveIngredientsToLocalStorage } from '../utils/storageUtils';\nimport IconClose from '../image/nav_icon/close_btn.svg';\nimport { FaExclamationTriangle } from 'react-icons/fa'; \nimport { useNavigate } from \"react-router-dom\";\nimport uploadImage from '../image/camera/upload.png';\nimport SwapCamera from '../image/camera/swap_camera.png';\nimport CameraButtonDefault from '../image/camera/takecamera_Default.svg';\nimport CameraButtonHover from '../image/camera/takecamera_Onpress.svg';\nimport RetakeButton from '../image/camera/Retake_Button.svg';\nimport NextButton from '../image/camera/Next_Button.svg';\nimport '../css/camera.css';\nimport '../css/LoadingPage.css';\nimport '../css/PopUpIngedientNotFound.css';\n\nconst Camera = () => {\n  const webcamRef = useRef(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isLoading, setIsLoading] = useState(false); // Loading state\n  const [isIngredientNotFound, setIsIngredientNotFound] = useState(false);\n  const [isHovered, setIsHovered] = useState(false);\n  const [facingMode, setFacingMode] = useState(\"environment\"); // Default to back camera\n  const navigate = useNavigate();\n\n  const handleSwapCamera = () => {\n    setFacingMode((prevState) =>\n      prevState === \"environment\" ? \"user\" : \"environment\"\n    );\n  };\n\n  const capture = useCallback(() => {\n\n      if (webcamRef.current) {\n        const imageSrc = webcamRef.current.getScreenshot();\n        setIsHovered(false);\n        setCapturedImage(imageSrc);\n      }\n    }, [webcamRef]);\n\n  const sendImageToBackend = async (imageSrc) => {\n    try {\n      setIsLoading(true);  // Start loading before sending the image\n\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/upload`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ image: imageSrc }),  // Send imageSrc, which is a base64 string\n      });\n\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n\n      const data = await response.json();\n      console.log('Response from backend:', data);\n\n      // Ensure `ingredients` field exists in the response and is not empty\n      if (data && data.ingredients && data.ingredients.length > 0) {\n        const detectedIngredients = data.ingredients;\n        console.log('detectedIngredients:', JSON.stringify(detectedIngredients, null, 2));\n        if (detectedIngredients.length > 0) {\n          // Save ingredients to localStorage and state\n          saveIngredientsToLocalStorage(detectedIngredients);\n          navigate(\"/ingredient-preview\");\n        } else{\n          setIsIngredientNotFound(true);\n        }\n      } else {\n        console.error('No ingredients detected in the backend response');\n        setIsIngredientNotFound(true);\n        setCapturedImage(null);\n      }\n      setIsLoading(false); // Stop loading\n\n    } catch (error) {\n      console.error('Error sending image to backend:', error);\n      setIsLoading(false);  // Stop loading even if there's an error\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCapturedImage(reader.result);  // Set the uploaded image as capturedImage (base64 format)\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    \n    <div>\n      {/* Show the loading popup when `isLoading` is true */}\n      {isLoading && <LoadingIngredientPage />}\n\n      {/* Show the ingredient not found popup when `isIngredientNotFound` is true */}\n      {isIngredientNotFound && <PopUpIngredientNotFound />}\n      {/* When ingredients are found, show IngredientPreview */}\n\n      <div className=\"camera-container\">\n        {!capturedImage ? (\n          <>\n            <Webcam\n              audio={false}\n              ref={webcamRef}\n              screenshotFormat=\"image/jpeg\" // Capture image in JPEG format\n              className=\"webcam-view\"\n              videoConstraints={{\n                facingMode: facingMode, // Use the state for camera mode\n              }}\n            />\n            <div className=\"camera-header\">\n              <span className=\"header-title\">Identify the Ingredient</span>\n              <img src={IconClose} className=\"close-button\" alt=\"Close\" onClick={()=>navigate('/home')} />\n            </div>\n            <div className='camera-buttom'>\n              <div className='upload-container'>\n                <img\n                  src={uploadImage} \n                  alt=\"Upload\"\n                  onClick={() => document.getElementById('fileInput').click()} // Trigger file input on image click\n                  className=\"upload-image\"\n                />\n              </div>\n              <button \n                onClick={capture} \n                className=\"camera-button\"\n                onMouseEnter={() => setIsHovered(true)}\n                onMouseLeave={() => setIsHovered(false)}\n              >\n                <img \n                  src={isHovered ? CameraButtonHover : CameraButtonDefault} \n                  alt=\"Camera Button\" \n                  className=\"camera-button-img\"\n                />\n              </button>\n              <div className=\"swap-container\">\n                <img\n                  src={SwapCamera}\n                  alt=\"Swap Camera\"\n                  className=\"swap-camera\"\n                  onClick={handleSwapCamera}\n                />\n              </div>\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleImageUpload}\n                className=\"upload-button\"\n                id=\"fileInput\"\n                style={{ display: 'none' }} // Hide the default input\n              />\n              \n            </div>\n\n            \n          </>\n        ) : (\n          <>\n            <div className=\"camera-header\">\n            <span className=\"header-title\">Identify the Ingredient</span>\n              <img src={IconClose} className=\"close-button\" alt=\"Close\" onClick={()=>navigate('/home')} />\n            </div>\n            <img src={capturedImage} alt=\"Captured\" className=\"captured-image\" />\n            <div className='camera-buttom-preview'>\n            <button onClick={() => setCapturedImage(null)} className=\"retake-button styled-button\">\n              <img src={RetakeButton} alt=\"Retake\" className=\"button-image\" />\n              </button>\n              <button onClick={() => sendImageToBackend(capturedImage)} className=\"send-button styled-button\">\n                <img src={NextButton} alt=\"Next\" className=\"button-image\" />\n              </button>\n            </div>\n          </>\n        )}\n\n        \n      </div>\n      \n    </div>\n  );\n};\n\nconst LoadingIngredientPage = () => {\n  return (\n    <div className=\"loading-overlay\">\n      <div className=\"loading-popup\">\n        <div className=\"spinner\"></div>\n        <p>Processing your image, please wait...</p>\n      </div>\n    </div>\n  );\n};\n\nconst PopUpIngredientNotFound = () => {\n  const [isVisible, setIsVisible] = useState(true); // Track visibility\n\n  const handleClose = () => {\n    setIsVisible(false); // Hide the popup when close button is clicked\n  };\n\n  if (!isVisible) return null; // Don't render the popup if it's hidden\n\n  return (\n    <div className=\"notfound-overlay\">\n      <div className=\"notfound-popup\">\n        <FaExclamationTriangle className=\"error-icon\" />\n        <p>Error Please try agian</p>\n        <button className=\"close-button\" onClick={handleClose}>Close</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Camera;","import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../css/LoginPage.css';\nimport logo from '../image/Logo1.svg';\nimport textlogo from '../image/TextLogo.svg';\nimport axios from 'axios';\nimport { getUserId, setUserId } from '../utils/auth';\n\nconst LoginPage = () => {\n  const navigate = useNavigate();\n  const timeoutRef = useRef(null);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://172.23.144.1:5050';\n\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [fieldErrors, setFieldErrors] = useState({});\n  const [alert, setAlert] = useState({ type: '', message: '' });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isGoogleLoading, setIsGoogleLoading] = useState(false);\n  const [isGoogleReady, setIsGoogleReady] = useState(false);\n\n  // Initialize Google Sign-In\n  useEffect(() => {\n    const initializeGoogleSignIn = () => {\n      if (window.google && window.google.accounts) {\n        window.google.accounts.id.initialize({\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          callback: handleGoogleSignIn,\n          auto_select: false,\n          cancel_on_tap_outside: true,\n        });\n        window.google.accounts.id.renderButton(\n          document.getElementById('google-signin-button'),\n          {\n            theme: 'outline',\n            size: 'large',\n            width: '300',\n            text: 'signin_with',\n            shape: 'rectangular',\n          }\n        );\n        setIsGoogleReady(true);\n      }\n    };\n\n    // Load Google Identity Services script\n    if (!window.google) {\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      script.onload = initializeGoogleSignIn;\n      document.head.appendChild(script);\n    } else {\n      initializeGoogleSignIn();\n    }\n\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Handle Google Sign-In response\n  const handleGoogleSignIn = async (response) => {\n    setIsGoogleLoading(true);\n    setAlert({ type: '', message: '' });\n    try {\n      const userInfo = parseJwt(response.credential);\n\n      const backendResponse = await axios.post(`${process.env.REACT_APP_BASE_URL}/google-auth`, {\n        credential: response.credential,\n        email: userInfo.email,\n        username: userInfo.name,\n        avatar: userInfo.picture,\n        google_id: userInfo.sub\n      }, {\n        timeout: 10000,\n        withCredentials: true\n      });\n\n      if (backendResponse.data.user_id) {\n        setUserId(backendResponse.data.user_id);\n        // Replace console.log with a more secure message\n        console.log('Google authentication successful');\n      }\n\n      const isNewUser = backendResponse.data.is_new_user;\n      setAlert({\n        type: 'success',\n        message: isNewUser\n          ? 'Account created successfully'\n          : 'Login successfully'\n      });\n\n      timeoutRef.current = setTimeout(() => {\n        navigate('/home');\n      }, 1000);\n    } catch (error) {\n      let errorMessage = 'Google sign-in failed. Please try again.'\n      if (error.response?.data?.message) {\n        errorMessage = error.response.data.message;\n      } else if (error.request) {\n        errorMessage = 'Cannot connect to server. Please check your connection';\n      }\n      setAlert({ type: 'error', message: errorMessage });\n    } finally {\n      setIsGoogleLoading(false);\n    }\n  };\n\n  // Parse JWT token\n  const parseJwt = (token) => {\n    try {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      return JSON.parse(jsonPayload);\n    } catch (error) {\n      return {};\n    }\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear field error\n    if (fieldErrors[name]) {\n      setFieldErrors(prev => ({ ...prev, [name]: '' }));\n    }\n\n    // Clear alert\n    if (alert.message) {\n      setAlert({ type: '', message: '' });\n    }\n  };\n\n  // Validation\n  const validateField = (name, value) => {\n    switch (name) {\n      case 'username':\n        if (!value.trim()) return 'Username is required';\n        if (value.length < 3) return 'Username must be at least 3 characters';\n        if (!/^[a-zA-Z0-9_]+$/.test(value)) return 'Username can only contain letters, numbers, and underscores';\n        return '';\n      case 'password':\n        if (!value) return 'Password is required';\n        if (value.length < 4) return 'Password must be at least 4 characters';\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    ['username', 'password'].forEach(key => {\n      const error = validateField(key, formData[key]);\n      if (error) errors[key] = error;\n    });\n    return errors;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Validate all fields\n    const errors = validateForm();\n    if (Object.keys(errors).length > 0) {\n      setFieldErrors(errors);\n      setAlert({\n        type: 'error',\n        message: 'Please fix the errors above'\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n    setAlert({ type: '', message: '' });\n\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_BASE_URL}/login`, {\n        username: formData.username,\n        password: formData.password\n      }, {\n        timeout: 10000,\n        withCredentials: true\n      });\n\n      if (response.data.user_id) {\n        setUserId(response.data.user_id);\n        // Replace console.log with a more secure message\n        console.log('Login successful');\n      }\n\n      setAlert({\n        type: 'success',\n        message: response.data.message || 'Login successful'\n      });\n      setFieldErrors({});\n\n      timeoutRef.current = setTimeout(() => {\n        navigate('/home');\n      }, 1000);\n    } catch (err) {\n      let errorMessage = 'An error occured. Please try again.';\n\n      if (err.response) {\n        if (err.response.status === 401) {\n          errorMessage = 'Invalid username or password';\n        } else if (err.response.status === 429) {\n          errorMessage = 'Too many login attempts. Please try again later';\n        } else if (err.response.data?.message) {\n          errorMessage = err.response.data.message;\n        }\n      } else if (err.request) {\n        errorMessage = 'Cannot connect to server. Please check your connection';\n      } else if (err.code === 'ECONNABORTED') {\n        errorMessage = 'Request timeout. Please try again';\n      }\n\n      setAlert({ type: 'error', message: errorMessage });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleGuestClick = () => {\n    navigate('/home');\n  };\n\n  const handleSignUpClick = () => {\n    navigate('/signup');\n  };\n\n  const handleForgotPasswordClick = () => {\n    navigate('/reset-password');\n  };\n\n  const isAnyLoading = isSubmitting || isGoogleLoading;\n\n  return (\n    <div className=\"page-container\">\n      <img src={logo} alt=\"Sous Cook Logo\" className=\"logo-image\" />\n      <img src={textlogo} alt=\"Text Logo\" className=\"textlogo-image\" />\n\n      <div className=\"login-container\">\n        <p className=\"login-text\">Sign In</p>\n        <form className=\"login-form\" onSubmit={handleSubmit} noValidate>\n          <div className=\"form-field\">\n            <input\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"Username\"\n              className={`input ${fieldErrors.username ? 'input-error' : ''}`}\n              value={formData.username}\n              onChange={handleChange}\n              disabled={isAnyLoading}\n              aria-label=\"Username\"\n              aria-invalid={!!fieldErrors.username}\n              aria-describedby={fieldErrors.username ? \"username-error\" : undefined}\n              autoComplete=\"username\"\n            />\n            {fieldErrors.username && (\n              <p id=\"username-error\" className=\"field-error\" role=\"alert\">\n                {fieldErrors.username}\n              </p>\n            )}\n          </div>\n\n          <div className=\"form-field\">\n            <input\n              type={showPassword ? \"text\" : \"password\"}\n              name=\"password\"\n              placeholder=\"Password\"\n              className={`input ${fieldErrors.password ? 'input-error' : ''}`}\n              value={formData.password}\n              onChange={handleChange}\n              disabled={isAnyLoading}\n              aria-label=\"Password\"\n              aria-invalid={!!fieldErrors.password}\n              aria-describedby={fieldErrors.password ? \"password-error\" : undefined}\n              autoComplete=\"current-password\"\n            />\n\n            {formData.password && (\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(prev => !prev)}\n                className=\"show-password-button\"\n                tabIndex={-1}\n                aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n                disabled={isAnyLoading}\n              >\n                {showPassword ? \"Hide\" : \"Show\"}\n              </button>\n            )}\n\n            {fieldErrors.password && (\n              <p id=\"password-error\" className=\"field-error\" role=\"alert\">\n                {fieldErrors.password}\n              </p>\n            )}\n          </div>\n\n          <div className=\"form-options\">\n            <button\n              type=\"button\"\n              className=\"forgot-password-link\"\n              onClick={handleForgotPasswordClick}\n              disabled={isAnyLoading}\n            >\n              Forgot Password?\n            </button>\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"submit-button\"\n            disabled={isAnyLoading}\n          >\n            {isSubmitting ? 'SIGNING IN...' : 'SIGN IN'}\n          </button>\n        </form>\n\n        {alert.message && (\n          <div\n            className={`alert alert-${alert.type}`}\n            role=\"alert\"\n            aria-live=\"polite\"\n          >\n            {alert.message}\n          </div>\n        )}\n\n        {/* Divider */}\n        <div className=\"divider-login\">\n          <div className=\"divider-line\"></div>\n          <span className=\"divider-text\">Or continue with</span>\n        </div>\n\n        {/* Google Sign-In Button */}\n        <div className=\"google-signin-container\">\n          <div id=\"google-signin-button\"></div>\n          {isGoogleLoading && (\n            <div className=\"google-loading\">Signing in with Google...</div>\n          )}\n        </div>\n\n        <div className=\"signup-link\">\n          <span className=\"signup-text-small\">Don't have an account? </span>\n          <button\n            type=\"button\"\n            className=\"signup-link-button\"\n            onClick={handleSignUpClick}\n            disabled={isAnyLoading}\n          >\n            Sign Up\n          </button>\n        </div>\n      </div>\n\n      <p className=\"guest-text\">Or you want to take a look first?</p>\n      <button\n        className=\"guest-button\"\n        onClick={handleGuestClick}\n        disabled={isAnyLoading}\n      >\n        CONTINUE AS GUEST\n      </button>\n    </div>\n  );\n};\n\nexport default LoginPage;","import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport '../css/ResetPassword.css';\nimport logo from '../image/Logo1.svg';\nimport axios from 'axios';\n\nconst ResetPasswordPage = () => {\n  const [formData, setFormData] = useState({ email: '' });\n  const [errors, setErrors] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [touched, setTouched] = useState({});\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  // Validation rules\n  const validateField = (name, value) => {\n    if (name === 'email') {\n      if (!value.trim()) return 'Email is required';\n      if (!/\\S+@\\S+\\.\\S+/.test(value)) return 'Please enter a valid email address';\n      return '';\n    }\n    return '';\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    Object.keys(formData).forEach((key) => {\n      const error = validateField(key, formData[key]);\n      if (error) newErrors[key] = error;\n    });\n    return newErrors;\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n    if (errors[name]) {\n      setErrors((prev) => ({ ...prev, [name]: '' }));\n    }\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setErrors((prev) => ({ ...prev, [name]: error }));\n    }\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    setTouched((prev) => ({ ...prev, [name]: true }));\n    const error = validateField(name, value);\n    setErrors((prev) => ({ ...prev, [name]: error }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const formErrors = validateForm();\n    if (Object.keys(formErrors).length > 0) {\n      setErrors(formErrors);\n      setTouched({ email: true });\n      return;\n    }\n\n    setIsLoading(true);\n    setErrors({});\n    setMessage('');\n    try {\n      const res = await axios.post('/api/auth/reset-password', {\n        email: formData.email,\n      });\n\n      setMessage(res.data?.message || 'Password reset link sent to your email.');\n      setFormData({ email: '' });\n      setTouched({});\n    } catch (error) {\n      setErrors({\n        submit: error.response?.data?.message || 'An error occurred. Please try again.',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getInputClasses = (fieldName) => {\n    const baseClasses = 'login-input';\n    const hasError = errors[fieldName];\n    return hasError ? `${baseClasses} login-input-error` : baseClasses;\n  };\n\n  return (\n    <div className=\"reset-container\">\n      <button\n        className=\"back-arrow\"\n        onClick={() => navigate('/login')}\n        aria-label=\"Go back to login\"\n      >\n        ‹\n      </button>\n\n      <div className=\"logo-header\">\n        <div className=\"logo-circle\">\n          <img\n            src={logo}\n            alt=\"Company Logo\"\n            className=\"Logo\"\n          />\n        </div>\n      </div>\n\n      <div className=\"reset-card\">\n        <div className=\"reset-header\">\n          <h1 className=\"reset-title\">RESET YOUR PASSWORD</h1>\n          <p className=\"reset-subtitle\">\n            Don't worry! It happens. Please enter your email, You will soon receive a Password Reset link.\n          </p>\n        </div>\n\n        <form className=\"reset\" onSubmit={handleSubmit}>\n          {/* Input Wrapper to contain error message */}\n          <div className=\"input-wrapper\">\n            <input\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={handleInputChange}\n              onBlur={handleBlur}\n              placeholder=\"Email\"\n              className={getInputClasses('email')}\n              aria-describedby={errors.email ? 'email-error' : undefined}\n              aria-invalid={errors.email ? 'true' : 'false'}\n              autoComplete=\"email\"\n              disabled={isLoading}\n            />\n            {errors.email && (\n              <div id=\"email-error\" className=\"login-error\" role=\"alert\">\n                {errors.email}\n              </div>\n            )}\n          </div>\n\n          {/* Success Message */}\n          {message && (\n            <div className=\"login-success\" role=\"alert\">\n              {message}\n            </div>\n          )}\n\n          {/* Submit Error */}\n          {errors.submit && (\n            <div className=\"login-error\" role=\"alert\">\n              {errors.submit}\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            className=\"send-reset-button\"\n            disabled={!formData.email || !!errors.email || isLoading}\n          >\n            {isLoading ? 'Sending...' : 'Send Reset Link'}\n          </button>\n\n          <div className=\"reset-link\">\n            <Link to=\"/login\" className=\"login-link-text\">\n              Back to Sign In\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPasswordPage;","import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../css/SignUpPage.css';\nimport logo from '../image/Logo1.svg';\nimport textlogo from '../image/TextLogo.svg';\nimport axios from 'axios';\n\nconst SignUpPage = () => {\n    const navigate = useNavigate();\n    const timeoutRef = useRef(null);\n\n    const [formData, setFormData] = useState({\n        username: '',\n        email: '',\n        password: '',\n    });\n\n    const [showPassword, setShowPassword] = useState(false);\n\n    const [fieldErrors, setFieldErrors] = useState({});\n    const [alert, setAlert] = useState({ type: '', message: '' });\n    const [isSubmitting, setIsSubmitting] = useState(false)\n\n    useEffect(() => {\n        return () => {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n        };\n    }, []);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n\n        // clear field error\n        if (fieldErrors[name]) {\n            setFieldErrors(prev => ({ ...prev, [name]: '' }));\n        }\n\n        // clear alert\n        if (alert.message) {\n            setAlert({ type: '', message: '' });\n        }\n    };\n\n    const validateField = (name, value) => {\n        switch (name) {\n            case 'username':\n                if (!value.trim()) return 'Username is required';\n                if (value.length < 3) return 'Username must be at least 3 characters';\n                if (value.length > 20) return 'Username must not exceed 20 characters'\n                if (!/^[a-zA-Z0-9_]+$/.test(value)) return 'Username can only contain letters, numbers, and underscores';\n                return '';\n            case 'email':\n                if (!value.trim()) return 'Email is required';\n                const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n                if (!emailRegex.test(value)) return 'Please enter a valid email address';\n                return '';\n            case 'password':\n                if (!value) return 'Password is required';\n                if (value.length < 8) return 'Password must be at least 8 characters';\n                if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(value)) return 'Password must contain uppercase, lowercase, and number';\n                return '';\n            default:\n                return '';\n        }\n    };\n\n    const validateForm = () => {\n        const errors = {};\n        Object.keys(formData).forEach(key => {\n            const error = validateField(key, formData[key]);\n            if (error) errors[key] = error;\n        });\n        return errors;\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        \n        // validate all fields\n        const errors = validateForm();\n        if (Object.keys(errors).length > 0) {\n            setFieldErrors(errors);\n            setAlert({\n                type: 'error',\n                message: 'Please fix the error above'\n            });\n            return;\n        }\n\n        setIsSubmitting(true);\n        setAlert({ type: '', message: '' });\n\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_BASE_URL}/signup`, formData);\n\n            setAlert({\n                type: 'success',\n                message: response.data.message || 'Account created successfully.'\n            });\n            setFieldErrors({});\n\n            timeoutRef.current = setTimeout(() => {\n                navigate('/login');\n            }, 1500);\n        } catch (err) {\n            let errorMessage = 'An error occured. Please try again.';\n\n            if (err.response?.data?.message){\n                errorMessage = err.response.data.message;\n            } else if (err.request) {\n                errorMessage = 'Cannot connect to server. Please check your connection.';\n            }\n\n            setAlert({ type: 'error', message: errorMessage});\n        } finally {\n            setIsSubmitting(false);\n        }\n        \n    };\n\n\n    const handleGuestClick = () => {\n        navigate('/home');\n    };\n\n    return (\n        <div className=\"page-container\">\n            <img src={logo} alt=\"Sous Cook Logo\" className=\"logo-image\"/>\n            <img src={textlogo} alt=\"Text Logo\" className=\"textlogo-image\"/>\n\n            <div className=\"signup-container\">\n                <p className=\"signup-text\">Sign Up</p>\n                <form className=\"signup-form\" onSubmit={handleSubmit} noValidate>\n                    <div className=\"form-field\">\n                        <input \n                            type=\"text\" \n                            name=\"username\" \n                            placeholder=\"Username\" \n                            className={`input ${fieldErrors.username ? 'input-error' : ''}`} \n                            value={formData.username} \n                            onChange={handleChange}\n                            disabled={isSubmitting}\n                            aria-label=\"Username\"\n                            arai-invalid={!!fieldErrors.username}\n                            aria-describedby={fieldErrors.username ? \"username-error\" : undefined}\n                        /> \n                        {fieldErrors.username && (\n                            <p id=\"username-error\" className=\"field-error\" role=\"alert\">\n                                {fieldErrors.username}\n                            </p>\n                        )}\n                    </div>\n\n                    <div className=\"form-field\">\n                        <input \n                            type=\"email\" \n                            name=\"email\" \n                            placeholder=\"Email\" \n                            className={`input ${fieldErrors.email ? 'input-error' : ''}`} \n                            value={formData.email} \n                            onChange={handleChange}\n                            disabled={isSubmitting}\n                            aria-label=\"Email\"\n                            arai-invalid={!!fieldErrors.email}\n                            aria-describedby={fieldErrors.email ? \"email-error\" : undefined}\n                        /> \n                        {fieldErrors.email && (\n                            <p id=\"email-error\" className=\"field-error\" role=\"alert\">\n                                {fieldErrors.email}\n                            </p>\n                        )}\n                    </div>\n                    \n\n                    <div className=\"form-field\">\n                        <input \n                            type={showPassword ? \"text\" : \"password\"} \n                            name=\"password\" \n                            placeholder=\"Password\" \n                            className={`input ${fieldErrors.password ? 'input-error' : ''}`} \n                            value={formData.password} \n                            onChange={handleChange}\n                            disabled={isSubmitting}\n                            aria-label=\"Password\"\n                            arai-invalid={!!fieldErrors.password}\n                            aria-describedby={fieldErrors.password ? \"password-error\" : undefined}\n                        /> \n\n                        {formData.password && (\n                        <button\n                            type=\"button\"\n                            onClick={() => setShowPassword(prev => !prev)}\n                            className=\"show-password-button\"\n                            tabIndex={-1}\n                        >\n                            {showPassword ? \"Hide\" : \"Show\"}\n                        </button>\n                        )}\n                        \n                        {fieldErrors.password && (\n                            <p id=\"password-error\" className=\"field-error\" role=\"alert\">\n                                {fieldErrors.password}\n                            </p>\n                        )}\n                    </div>\n                    \n                    <button \n                        type=\"submit\" \n                        className=\"summit-button\"\n                        disabled={isSubmitting}\n                    >\n                        {isSubmitting ? 'CREATING ACCOUNT...' : 'CREATE AN ACOUNT'}\n                    </button>\n                </form>\n\n                {alert.message && (\n                    <div\n                        className={`alert alert-${alert.type}`}\n                        role=\"alert\"\n                        aria-live=\"polite\"\n                    >\n                        {alert.message}\n                    </div>\n                )}\n            </div>\n\n            <p className=\"guest-text\">Or you want to take a look first?</p>\n            <button \n                className=\"guest-button\" \n                onClick={handleGuestClick}\n                disabled={isSubmitting}\n            >\n                CONTINUE AS GUEST\n            </button>\n        </div>\n    );\n};\nexport default SignUpPage;","import React, { useState, useEffect } from 'react';\r\nimport '../css/UserDataPage.css';  // Import the CSS file\r\nimport IconSetting from '../Icon/Button/Setting_btn.png';\r\nimport defaultProfile from '../image/profile.jpg';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { getUserId, logout } from '../utils/auth';\r\n\r\nconst UserDataPage = () => {\r\n    const navigate = useNavigate();\r\n    const [userData, setUserData] = useState({\r\n        username: '',\r\n        email: '',\r\n        avatar: '',\r\n        avatar_url: '',\r\n        phone_number: '',\r\n        birth_date: '',\r\n        country: ''\r\n    });\r\n\r\n    const [profileImage, setProfileImage] = useState(defaultProfile);\r\n\r\n    const userIdStr = getUserId();\r\n    const userId = parseInt(userIdStr, 10);\r\n\r\n    const [mealStats, setMealStats] = useState({\r\n        total_completed: null,\r\n        most_cooked: null\r\n    });\r\n\r\n    // Add this utility function after the imports\r\n    const logUserAction = (action, details = {}) => {\r\n        // Create a sanitized copy of details\r\n        const safeDetails = { ...details };\r\n        \r\n        // Remove or mask sensitive fields\r\n        if (safeDetails.userId) safeDetails.userId = '****';\r\n        if (safeDetails.email) safeDetails.email = '****@****.***';\r\n        if (safeDetails.username) safeDetails.username = '****';\r\n        if (safeDetails.phone_number) safeDetails.phone_number = '****';\r\n        \r\n        console.log(`UserData - ${action}:`, safeDetails);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!userId || isNaN(userId)) {\r\n            logUserAction('auth_check_failed', { valid: false });\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const fetchUserData = async () => {\r\n            try {\r\n                const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/users/${userId}`);\r\n                const user = response.data.user;\r\n\r\n                logUserAction('data_fetch_success', {\r\n                    hasAvatar: !!user.avatar_url,\r\n                    hasBirthDate: !!user.birth_date,\r\n                    hasPhoneNumber: !!user.phone_number,\r\n                    hasCountry: !!user.country\r\n                });\r\n\r\n                if (user.birth_date) {\r\n                    user.birth_date = user.birth_date.split('T')[0];\r\n                }\r\n\r\n                setUserData(user);\r\n\r\n                if (user.avatar_url) {\r\n                    setProfileImage(`${user.avatar_url}?t=${Date.now()}`);\r\n                } else {\r\n                    setProfileImage(defaultProfile);\r\n                }\r\n\r\n            } catch (error) {\r\n                logUserAction('data_fetch_error', {\r\n                    status: error.response?.status,\r\n                    error: error.message\r\n                });\r\n                setProfileImage(defaultProfile);\r\n            }\r\n        };\r\n\r\n        fetchUserData();\r\n    }, [userId, navigate, userIdStr]);\r\n\r\n    useEffect(() => {\r\n        if (!userId || isNaN(userId)) {\r\n            return;\r\n        }\r\n\r\n        const fetchMealStats = async () => {\r\n            try {\r\n                const response = await axios.get(\r\n                    `${process.env.REACT_APP_BACKEND_URL}/users/${userId}/meal-stats`\r\n                );\r\n                setMealStats(response.data);\r\n                console.log('Meal stats:', response.data);\r\n            } catch (error) {\r\n                console.error('Error fetching meal stats:', error);\r\n            }\r\n        };\r\n\r\n        fetchMealStats();\r\n    }, [userId]);\r\n\r\n    const formatDate = (dateStr) => {\r\n        if (!dateStr) return '-';\r\n        const date = new Date(dateStr);\r\n        const day = String(date.getDate()).padStart(2, '0');\r\n        const month = String(date.getMonth() + 1).padStart(2, '0');\r\n        const year = date.getFullYear();\r\n        return `${day}/${month}/${year}`;\r\n    };\r\n\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n        navigate(\"/login\");\r\n    }\r\n\r\n    const handleSetting = () => {\r\n        navigate(\"/setting\")\r\n    }\r\n\r\n    const handleImageError = () => {\r\n        logUserAction('avatar_load_error');\r\n        setProfileImage(defaultProfile);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"profile-container\">\r\n                {/* setting button */}\r\n                <div className=\"setting-container\">\r\n                    <img src={IconSetting} alt=\"setting\" onClick={handleSetting} style={{ cursor: \"pointer\" }} />\r\n                </div>\r\n                <div className=\"profile-pic\">\r\n                    <div className=\"border-box\"></div>\r\n                    <div className=\"pic-con\">\r\n                        <img\r\n                            src={profileImage}\r\n                            id=\"pic-pro\"\r\n                            alt=\"avatar\"\r\n                            onError={handleImageError}\r\n                        />\r\n                        <div id=\"pic-border\"></div>\r\n                        <div className=\"nameplace\">{userData.username}</div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"userData-container\">\r\n                <div className=\"data-box-top\">\r\n                    <div className=\"title\">Email</div>\r\n                    <div className=\"data\">{userData.email}</div>\r\n                    <div className=\"title\">Phone number</div>\r\n                    <div className=\"data\">{userData.phone_number || '-'}</div>\r\n                    <div className=\"title\">Date of Birth</div>\r\n                    <div className=\"data\">{formatDate(userData.birth_date)}</div>\r\n                    <div className=\"title\">Country</div>\r\n                    <div className=\"data\">{userData.country || '-'}</div>\r\n                </div>\r\n                <div className=\"separator\"></div>\r\n                <div className=\"data-box-bottom\">\r\n                    <div className=\"title\">Meal Complete</div>\r\n                    <div className=\"data\">\r\n                        {mealStats.total_completed !== null && mealStats.total_completed > 0\r\n                            ? mealStats.total_completed\r\n                            : '-'\r\n                        }\r\n                    </div>\r\n                    <div className=\"title\">Frequently Cooked</div>\r\n                    <div className=\"data\">\r\n                        {mealStats.most_cooked\r\n                            ? `${mealStats.most_cooked.menu_name} (${mealStats.most_cooked.cook_count})`\r\n                            : '-'\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"logout-place\">\r\n                    <button className=\"logout-button\" onClick={handleLogout}>\r\n                        LOG OUT\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserDataPage;","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/FavoriteMenu.css';\nimport '../css/Navbar.css';\nimport unknowMenuImage from '../image/menu-suggestion/notfound-image.svg';\n\nconst FavoriteMenu = () => {\n  const [selected, setSelected] = useState('favorites');\n  const [likedMeals, setLikedMeals] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      const userId = localStorage.getItem(\"user_id\");\n      if (!userId) return;\n\n      try {\n        const res = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/favorites/${userId}`);\n        const formatted = res.data.map(item => ({\n          id: item.menu_id,\n          title: item.menu_name,\n          prepTime: item.prep_time,\n          cookingTime: item.cooking_time,\n          image: item.image || unknowMenuImage,\n          alt: item.menu_name\n        }));\n        setLikedMeals(formatted);\n      } catch (err) {\n        console.error(\"Error fetching favorites:\", err);\n      }\n    };\n\n    fetchFavorites();\n  }, []);\n\n  const handleUnlike = async (mealId) => {\n    const userId = localStorage.getItem(\"user_id\");\n    if (!userId) return;\n\n    try {\n      await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/favorites`, {\n        data: { user_id: userId, menu_id: mealId }\n      });\n      setLikedMeals(prev => prev.filter(meal => meal.id !== mealId));\n    } catch (err) {\n      console.error(\"Error removing favorite:\", err);\n    }\n  };\n\n  return (\n    <div className=\"favorite-menu-container\">\n      <div className=\"header\">\n        <h1 className=\"title-meal\">Liked Meals</h1>\n      </div>\n\n      <div className=\"meal-list\">\n        {likedMeals.length === 0 ? (\n          <div className=\"empty-state\">\n            <p>No liked meals yet</p>\n          </div>\n        ) : (\n          likedMeals.map((meal, index) => (\n            <div key={meal.id}>\n              <div className=\"meal-card\">\n                <div className=\"meal-content\" onClick={() => navigate('/menu-detail', { state: { menu_id: meal.id } })}>\n                  <div className=\"meal-image\">\n                    <img src={meal.image} alt={meal.alt} />\n                  </div>\n                  <div className=\"meal-info\">\n                    <h3 className=\"meal-title\">{meal.title}</h3>\n                    <div className=\"meal-times\">\n                      <p>Prep time: {meal.prepTime}</p>\n                      <p>Cooking time: {meal.cookingTime}</p>\n                    </div>\n                  </div>\n                </div>\n                <button className=\"favorite-heart\" onClick={() => handleUnlike(meal.id)}>\n                  <i className=\"fas fa-heart heart-fav\"></i>\n                </button>\n              </div>\n              {index < likedMeals.length - 1 && <div className=\"meal-separator\"></div>}\n            </div>\n          ))\n        )}\n      </div>\n\n    </div>\n  );\n};\n\nexport default FavoriteMenu;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n    saveIngredientsToLocalStorage,\n    getIngredientsFromLocalStorage,\n    getCameraIngredientsFromLocalStorage\n} from '../utils/storageUtils';\nimport '../css/SearchBar.css';\nimport backicon from '../image/searchbar/Back.svg';\nimport bread from '../image/homepage/Bread.svg';\nimport tomato from '../image/homepage/Tomato.svg';\nimport celery from '../image/homepage/Celery.svg';\nimport pork from '../image/homepage/Pork.svg';\nimport breadclick from '../image/homepage/BreadClick.svg';\nimport tomatoclick from '../image/homepage/TomatoClick.svg';\nimport celeryclick from '../image/homepage/CeleryClick.svg';\nimport porkclick from '../image/homepage/PorkClick.svg';\nimport IconCamera from '../image/searchbar/camera.png';\nimport listicon from '../image/homepage/List.svg';\nimport logo from '../image/Logo1.svg';\nimport textlogo from '../image/TextLogo.svg';\n\nconst SearchBar = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const [activeImages, setActiveImages] = useState([bread, tomato, celery, pork]);\n    const [searchText, setSearchText] = useState(\"\");\n    const [selectedIngredients, setSelectedIngredients] = useState([]);\n    const [allIngredients, setAllIngredients] = useState([]);\n    const [showAddedMessage, setShowAddedMessage] = useState(false);\n\n    // filter duplicate ingredient names\n    const getUniqueIngredients = (ingredients) => {\n        const seen = new Set();\n        return ingredients.filter(ing => {\n            if (!ing || typeof ing !== 'object') return false;\n            const name = ing.ingredient_name?.trim().toLowerCase();\n            if (!name || seen.has(name)) return false; // Check only for duplicates\n            seen.add(name);\n            return true;\n        });\n    };\n\n    // Separate function to load ingredients\n    const loadAllIngredients = () => {\n        const manualIngredients = getIngredientsFromLocalStorage();\n        const cameraIngredients = getCameraIngredientsFromLocalStorage();\n        setAllIngredients(getUniqueIngredients([...manualIngredients, ...cameraIngredients]));\n    };\n\n    useEffect(() => {\n        loadAllIngredients();\n    }, [location.key]);\n\n    // Handle ingredient search\n    const handleSearch = (e) => {\n        e.preventDefault();\n        if (searchText.trim()) {\n            const ingredientName = searchText.trim();\n\n            const newIngredient = {\n                ingredient_name: ingredientName,\n                ingredient_type: \"Other\",\n                source: \"manual\"\n            };\n\n            setSelectedIngredients([...selectedIngredients, newIngredient]);\n            setSearchText(\"\");\n\n            const existingIngredients = getIngredientsFromLocalStorage();\n            saveIngredientsToLocalStorage([...existingIngredients, newIngredient]);\n            loadAllIngredients();\n\n            setShowAddedMessage(true);\n            setTimeout(() => {\n                setShowAddedMessage(false);\n            }, 2000);\n        }\n    };\n\n    const handleCameraClick = () => {\n        navigate(\"/camera-search\");\n    };\n\n    const handleSearchRecipe = () => {\n        const existingIngredients = getIngredientsFromLocalStorage();\n        const cameraIngredients = getCameraIngredientsFromLocalStorage();\n\n        const allIngredients = [\n            ...existingIngredients,\n            ...selectedIngredients,\n            ...cameraIngredients\n        ];\n\n        saveIngredientsToLocalStorage(allIngredients);\n        navigate('/ingredient-preview');\n    };\n\n    const toggleImage = (index) => {\n        const newImages = [...activeImages];\n        const ingredientNames = ['Bread', 'Tomato', 'Celery', 'Pork'];\n        const ingredientTypes = ['Grains, nuts, and baking products', 'Vegetables', 'Vegetables', 'Meat, sausages and fish'];\n\n        const ingredientName = ingredientNames[index];\n        const ingredientType = ingredientTypes[index];\n\n        const isSelected = selectedIngredients.some(ing => ing.ingredient_name === ingredientName);\n\n        if (isSelected) {\n            // ลบ ingredient ออกจาก selectedIngredients\n            const updatedSelected = selectedIngredients.filter(ing => ing.ingredient_name !== ingredientName);\n            setSelectedIngredients(updatedSelected);\n\n            // ลบ ingredient จาก localStorage\n            const manualIngredients = getIngredientsFromLocalStorage().filter(ing => ing.ingredient_name !== ingredientName);\n            saveIngredientsToLocalStorage(manualIngredients);\n\n            // เปลี่ยนรูปกลับไปเป็นปกติ\n            switch (index) {\n                case 0: newImages[0] = bread; break;\n                case 1: newImages[1] = tomato; break;\n                case 2: newImages[2] = celery; break;\n                case 3: newImages[3] = pork; break;\n            }\n        } else {\n            // เพิ่ม ingredient ไปยัง selectedIngredients\n            const newIngredient = {\n                ingredient_name: ingredientName,\n                ingredient_type: ingredientType,\n                source: \"manual\"\n            };\n            const updatedSelected = [...selectedIngredients, newIngredient];\n            setSelectedIngredients(updatedSelected);\n\n            // เพิ่ม ingredient ลง localStorage\n            const manualIngredients = getIngredientsFromLocalStorage();\n            saveIngredientsToLocalStorage([...manualIngredients, newIngredient]);\n\n            // เปลี่ยนรูปเป็น clicked\n            switch (index) {\n                case 0: newImages[0] = breadclick; break;\n                case 1: newImages[1] = tomatoclick; break;\n                case 2: newImages[2] = celeryclick; break;\n                case 3: newImages[3] = porkclick; break;\n            }\n        }\n\n        setActiveImages(newImages);\n        loadAllIngredients();\n    };\n\n    const handleIngredientPreview = () => {\n        loadAllIngredients();\n        const manualIngredients = getIngredientsFromLocalStorage();\n        const cameraIngredients = getCameraIngredientsFromLocalStorage();\n\n        const currentIngredients = [\n            ...selectedIngredients,\n            ...manualIngredients,\n            ...cameraIngredients\n        ];\n\n        navigate('/ingredient-preview', {\n            state: {\n                currentIngredients,\n                fromSearchBar: true\n            }\n        });\n    };\n\n    return (\n        <div className=\"search-container\">\n            <div className=\"back-home\">\n                <button className=\"back-button\" onClick={() => navigate(\"/home\")}></button>\n                <h1>Searching</h1>\n                <button\n                    className=\"list-icon-btn\"\n                    onClick={handleIngredientPreview}\n                >\n                    <img src={listicon} alt=\"Ingredient List\" />\n                    {allIngredients.length > 0 && (\n                        <span className=\"ingredient-count-badge\">\n                            {allIngredients.length}\n                        </span>\n                    )}\n                </button>\n            </div>\n\n            <div className=\"logo-section\">\n                <img src={logo} alt=\"Logo Icon\" className=\"main-logo\" />\n                <img src={textlogo} alt=\"Text Logo\" className=\"text-logo\" />\n            </div>\n\n            <form className=\"search-bar\" onSubmit={handleSearch}>\n                <input\n                    type=\"text\"\n                    className=\"search-input\"\n                    placeholder=\"Search for ingredients...\"\n                    value={searchText}\n                    onChange={e => setSearchText(e.target.value)}\n                />\n                <button type=\"button\" className=\"camera-icon-btn\" onClick={handleCameraClick}>\n                    <img src={IconCamera} alt=\"camera\" className=\"camera-icon\" />\n                </button>\n                <button type=\"submit\" className=\"search-btn\" style={{ display: 'none' }}></button>\n            </form>\n\n            <div className=\"ingredients-container\">\n                <p className=\"ingredients-text\">Recommended ingredients</p>\n                <div className=\"ingredients-scroll\">\n                    {activeImages.map((img, idx) => (\n                        <img\n                            key={idx}\n                            src={img}\n                            alt={`Ingredient ${idx}`}\n                            onClick={() => toggleImage(idx)}\n                            style={{ cursor: \"pointer\" }}\n                        />\n                    ))}\n                </div>\n            </div>\n\n            <div className=\"divider\"></div>\n\n            <div className=\"search-recipe-row\">\n                <div className=\"search-recipe-button\" onClick={handleSearchRecipe}>\n                    <p className=\"search-recipe-text\">SEARCH FOR RECIPE</p>\n                </div>\n            </div>\n\n            {showAddedMessage && (\n                <div className=\"ingredient-added-popup\">\n                    <p>Ingredient added.</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default SearchBar;","import React, { useState, useEffect } from 'react';\nimport '../css/History.css';\nimport '../css/Navbar.css';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { getUserId } from '../utils/auth.js';\n\n// ฟังก์ชันคำนวณ \"time ago\"\nconst formatTimeAgo = (date) => {\n    const now = new Date();\n    const then = new Date(date);\n    let seconds = Math.floor((now - then) / 1000);\n    if (seconds < 0) seconds = 0; // ไม่ให้ติดลบ\n    let interval = seconds / 31536000;\n    if (interval > 1) return Math.floor(interval) + \" years ago\";\n    interval = seconds / 2592000;\n    if (interval > 1) return Math.floor(interval) + \" months ago\";\n    interval = seconds / 86400;\n    if (interval > 1) return Math.floor(interval) + \" days ago\";\n    interval = seconds / 3600;\n    if (interval > 1) return Math.floor(interval) + \" hours ago\";\n    interval = seconds / 60;\n    if (interval > 1) return Math.floor(interval) + \" minutes ago\";\n    return Math.floor(seconds) + \" seconds ago\";\n};\n\nconst HistoryScreen = () => {\n    const [selected, setSelected] = useState('history');\n    const [historyItems, setHistoryItems] = useState([]);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchHistory = async () => {\n            const userId = getUserId();\n            if (!userId) return;\n\n            try {\n                const userFavorites = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/favorites/${userId}`);\n                const favoriteMenuIds = userFavorites.data.map(f => f.menu_id);\n                const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/history/${userId}`);\n                const formattedHistory = response.data\n                    .map(item => ({\n                        id: item.history_id,\n                        menuId: item.menu_id,\n                        title: item.menu_name,\n                        prepTime: item.prep_time,\n                        cookingTime: item.cooking_time,\n                        image: item.image,\n                        alt: item.menu_name,\n                        createdAt: new Date(item.created_at), // เก็บเป็น Date object\n                        isLiked: favoriteMenuIds.includes(item.menu_id),\n                    }))\n                    .sort((a, b) => b.createdAt - a.createdAt) // เรียงล่าสุดก่อน\n                    .map(item => ({\n                        ...item,\n                        timeAgo: formatTimeAgo(item.createdAt)\n                    }));\n\n                setHistoryItems(formattedHistory);\n            } catch (error) {\n                console.error('Failed to fetch history:', error);\n            }\n        };\n\n        fetchHistory();\n    }, []);\n\n    const goToMenuDetail = (menu) => {\n        navigate('/menu-detail', { state: { menu_id: menu.menuId } });\n    };\n\n   const handleLike = async (item) => {\n        const userId = localStorage.getItem('user_id');\n        if (!userId) return;\n\n        try {\n            if (!item.isLiked) {\n                // ถ้ายังกด like → เพิ่มเข้า favorites\n                await axios.post(`${process.env.REACT_APP_BACKEND_URL}/favorites`, {\n                    user_id: userId,\n                    menu_id: item.menuId\n                });\n            } else {\n                // ถ้าเคย like แล้วกดอีกครั้ง → ลบออก\n                await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/favorites`, {\n                    data: { user_id: userId, menu_id: item.menuId }\n                });\n            }\n\n            // อัปเดต state\n            setHistoryItems(prevItems =>\n                prevItems.map(his =>\n                    his.id === item.id ? { ...his, isLiked: !his.isLiked } : his\n                )\n            );\n        } catch (error) {\n            console.error(\"Error toggling favorite:\", error);\n        }\n    };\n\n\n    return (\n        <div className=\"history-menu-container\">\n            <div className=\"header\">\n                <h1 className=\"title-meal\">History</h1>\n            </div>\n            <div className=\"meal-lists\">\n            {historyItems.length === 0 ? (\n                <div className=\"no-history-message\">\n                    <p>No history found. Start exploring some menus!</p>\n                </div>\n            ) : (\n                    historyItems.map((item, index) => (\n                        <div key={item.id}>\n                            <div className=\"meal-cards\">\n                            <div \n                                onClick={() => goToMenuDetail(item)} //คลิกแล้วไปหน้า detail\n                            >\n                                <div className=\"meal-content\">\n                                    <div className=\"meal-image\">\n                                        <img src={item.image} alt={item.alt} />\n                                    </div>\n                                    <div className=\"meal-info\">\n                                        <h3>{item.title}</h3>\n                                        <p>Prep time: {item.prepTime}</p>\n                                        <p>Cooking time: {item.cookingTime}</p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-right-section\">\n                                <button className=\"liker-button\" onClick={() => handleLike(item)}>\n                                    <i className={`fas fa-heart heart-icon ${item.isLiked ? 'liked' : ''}`}></i>\n                                </button>\n                                <p className=\"time-ago\">{item.timeAgo}</p>\n                            </div>\n                            {index < historyItems.length - 1 && <div className=\"meal-separator\"></div>}\n                            </div>\n                        </div>\n                    ))\n            )}\n            </div>\n        </div>\n    );\n};\n\nexport default HistoryScreen;","import React, { useState, useEffect } from 'react';\nimport '../css/Setting.css';\nimport defaultProfile from '../image/profile.jpg';\nimport backicon from '../image/searchbar/Back.svg';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { getUserId, logout } from '../utils/auth';\n\nconst Setting = () => {\n    const navigate = useNavigate();\n    const userIdStr = getUserId();\n    const userId = parseInt(userIdStr, 10);\n    const [userData, setUserData] = useState({\n        username: '',\n        email: '',\n        avatar: '',\n        phone_number: '',\n        birth_date: '',\n        country: '',\n        allergies: [],\n    });\n    const [profilePic, setProfilePic] = useState(defaultProfile);\n    const [newProfileFile, setNewProfileFile] = useState(null);\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [allergyInput, setAllergyInput] = useState('');\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n\n    const formatDateForInput = (dateString) => {\n        if (!dateString) return '';\n        const date = new Date(dateString);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    };\n\n    useEffect(() => {\n        if (!userId || isNaN(userId)) {\n            console.error('Invalid userId:', userIdStr);\n            navigate('/login');\n            return;\n        }\n\n        const fetchUserData = async () => {\n            try {\n                const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/users/${userId}`);\n                const user = response.data.user;\n\n                setUserData({\n                    ...user,\n                    birth_date: formatDateForInput(user.birth_date),\n                    allergies: user.allergies || []\n                });\n\n                setAllergyInput((user.allergies || []).join(', '));\n\n                if (user.avatar_url) {\n                    setProfilePic(user.avatar_url);\n                } else if (user.avatar && user.avatar.length > 0) {\n                    setProfilePic(`${process.env.REACT_APP_BASE_URL}/uploads/avatars/${user.avatar}`);\n                } else {\n                    setProfilePic(defaultProfile);\n                }\n\n            } catch (error) {\n                console.error('Error fetching user data:', error);\n                setProfilePic(defaultProfile);\n                if (error.response?.status === 401 || error.response?.status === 403) {\n                    navigate('/login');\n                }\n            }\n        };\n\n        fetchUserData();\n    }, [userId, navigate, userIdStr]);\n\n    const handleChange = (e) => {\n        let { name, value } = e.target;\n\n        if (name === \"phone_number\") {\n            value = value.replace(/\\D/g, '');\n            if (value.length > 10) value = value.slice(0, 10);\n        }\n\n        if (name === \"allergies\") {\n            setAllergyInput(value);\n            return;\n        }\n\n        setUserData({\n            ...userData,\n            [name]: value,\n        });\n    };\n\n    const handleProfileChange = (e) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            setProfilePic(URL.createObjectURL(file));\n            setNewProfileFile(file);\n        }\n    }\n\n    const handleSave = async () => {\n        try {\n            const allergiesArray = allergyInput\n                .split(',')\n                .map(a => a.trim().toLowerCase())\n                .filter(a => a.length > 0);\n\n            const formData = new FormData();\n            formData.append('username', userData.username);\n            formData.append('email', userData.email);\n            formData.append('phone_number', userData.phone_number || '');\n            formData.append('birth_date', userData.birth_date || '');\n            formData.append('country', userData.country || '');\n            formData.append('allergies', JSON.stringify(allergiesArray));\n\n            if (newProfileFile) {\n                formData.append('avatar', newProfileFile);\n            }\n\n            const response = await axios.put(\n                `${process.env.REACT_APP_BACKEND_URL}/users/${userId}`,\n                formData,\n                { headers: { 'Content-Type': 'multipart/form-data' } }\n            );\n\n            const updatedUser = response.data.user;\n            setUserData({\n                ...updatedUser,\n                birth_date: formatDateForInput(updatedUser.birth_date),\n                allergies: updatedUser.allergies || []\n            });\n\n            setAllergyInput((updatedUser.allergies || []).join(', '));\n\n            if (updatedUser.avatar_url) {\n                setProfilePic(updatedUser.avatar_url);\n            } else if (updatedUser.avatar && updatedUser.avatar.length > 0) {\n                setProfilePic(`${process.env.REACT_APP_BASE_URL}/uploads/avatars/${updatedUser.avatar}`);\n            } else {\n                setProfilePic(defaultProfile);\n            }\n\n            setNewProfileFile(null);\n\n            alert(\"User info updated successfully\");\n            navigate(\"/account\");\n\n        } catch (error) {\n            console.error('Error updating user data:', error);\n            alert(\"Failed to update user info.\");\n        }\n    };\n\n    const handleDeleteAccount = async () => {\n        try {\n            await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/users/${userId}`);\n\n            logout();\n\n            alert(\"Account deleted successfully\");\n            navigate(\"/login\");\n        } catch (error) {\n            console.error('Error deleting account:', error);\n            alert(\"Failed to delete account. Please try again.\");\n        } finally {\n            setShowDeleteModal(false);\n        }\n    };\n\n    const countries = [\n        \"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"Antigua and Barbuda\", \"Argentina\", \"Armenia\", \"Australia\", \"Austria\",\n        \"Azerbaijan\", \"Bahamas\", \"Bahrain\", \"Bangladesh\", \"Barbados\", \"Belarus\", \"Belgium\", \"Belize\", \"Benin\", \"Bhutan\",\n        \"Bolivia\", \"Bosnia and Herzegovina\", \"Botswana\", \"Brazil\", \"Brunei\", \"Bulgaria\", \"Burkina Faso\", \"Burundi\", \"Cabo Verde\", \"Cambodia\",\n        \"Cameroon\", \"Canada\", \"Central African Republic\", \"Chad\", \"Chile\", \"China\", \"Colombia\", \"Comoros\", \"Congo (Congo-Brazzaville)\", \"Costa Rica\",\n        \"Croatia\", \"Cuba\", \"Cyprus\", \"Czechia (Czech Republic)\", \"Democratic Republic of the Congo\", \"Denmark\", \"Djibouti\", \"Dominica\", \"Dominican Republic\", \"Ecuador\",\n        \"Egypt\", \"El Salvador\", \"Equatorial Guinea\", \"Eritrea\", \"Estonia\", \"Eswatini\", \"Ethiopia\", \"Fiji\", \"Finland\", \"France\",\n        \"Gabon\", \"Gambia\", \"Georgia\", \"Germany\", \"Ghana\", \"Greece\", \"Grenada\", \"Guatemala\", \"Guinea\", \"Guinea-Bissau\",\n        \"Guyana\", \"Haiti\", \"Holy See\", \"Honduras\", \"Hungary\", \"Iceland\", \"India\", \"Indonesia\", \"Iran\", \"Iraq\",\n        \"Ireland\", \"Israel\", \"Italy\", \"Jamaica\", \"Japan\", \"Jordan\", \"Kazakhstan\", \"Kenya\", \"Kiribati\", \"Kuwait\",\n        \"Kyrgyzstan\", \"Laos\", \"Latvia\", \"Lebanon\", \"Lesotho\", \"Liberia\", \"Libya\", \"Liechtenstein\", \"Lithuania\", \"Luxembourg\",\n        \"Madagascar\", \"Malawi\", \"Malaysia\", \"Maldives\", \"Mali\", \"Malta\", \"Marshall Islands\", \"Mauritania\", \"Mauritius\", \"Mexico\",\n        \"Micronesia\", \"Moldova\", \"Monaco\", \"Mongolia\", \"Montenegro\", \"Morocco\", \"Mozambique\", \"Myanmar (Burma)\", \"Namibia\", \"Nauru\",\n        \"Nepal\", \"Netherlands\", \"New Zealand\", \"Nicaragua\", \"Niger\", \"Nigeria\", \"North Korea\", \"North Macedonia\", \"Norway\", \"Oman\",\n        \"Pakistan\", \"Palau\", \"Palestine State\", \"Panama\", \"Papua New Guinea\", \"Paraguay\", \"Peru\", \"Philippines\", \"Poland\", \"Portugal\",\n        \"Qatar\", \"Romania\", \"Russia\", \"Rwanda\", \"Saint Kitts and Nevis\", \"Saint Lucia\", \"Saint Vincent and the Grenadines\", \"Samoa\", \"San Marino\", \"Sao Tome and Principe\",\n        \"Saudi Arabia\", \"Senegal\", \"Serbia\", \"Seychelles\", \"Sierra Leone\", \"Singapore\", \"Slovakia\", \"Slovenia\", \"Solomon Islands\", \"Somalia\",\n        \"South Africa\", \"South Korea\", \"South Sudan\", \"Spain\", \"Sri Lanka\", \"Sudan\", \"Suriname\", \"Sweden\", \"Switzerland\", \"Syria\",\n        \"Tajikistan\", \"Tanzania\", \"Thailand\", \"Timor-Leste\", \"Togo\", \"Tonga\", \"Trinidad and Tobago\", \"Tunisia\", \"Turkey\", \"Turkmenistan\",\n        \"Tuvalu\", \"Uganda\", \"Ukraine\", \"United Arab Emirates\", \"United Kingdom\", \"United States of America\", \"Uruguay\", \"Uzbekistan\", \"Vanuatu\", \"Venezuela\",\n        \"Vietnam\", \"Yemen\", \"Zambia\", \"Zimbabwe\"\n    ].sort();\n\n    return (\n        <div className=\"setting-page\">\n            <div className=\"back-container\">\n                <img\n                    src={backicon}\n                    alt=\"back\"\n                    className=\"back-icon\"\n                    onClick={() => navigate(\"/account\")}\n                    style={{ cursor: \"pointer\" }}\n                />\n                <p className=\"back-text\">Account Setting</p>\n            </div>\n\n            <div className=\"setting-box\">\n                <label className=\"profile-image-label\">\n                    <img src={profilePic} className=\"profile-image\" alt=\"profile\" />\n                    <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleProfileChange}\n                        style={{ display: 'none' }}\n                    />\n                </label>\n\n                <div className=\"form-setting\">\n                    <label>Username</label>\n                    <input\n                        type=\"text\"\n                        name=\"username\"\n                        value={userData.username}\n                        onChange={handleChange}\n                    />\n                </div>\n                <div className=\"form-setting\">\n                    <label>Email</label>\n                    <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={userData.email}\n                        onChange={handleChange}\n                    />\n                </div>\n                <div className=\"form-setting\">\n                    <label>Phone number</label>\n                    <input\n                        type=\"text\"\n                        name=\"phone_number\"\n                        value={userData.phone_number || ''}\n                        onChange={handleChange}\n                        maxLength={10}\n                    />\n                </div>\n                <div className=\"form-setting\">\n                    <label>Date of Birth</label>\n                    <input\n                        type=\"date\"\n                        name=\"birth_date\"\n                        value={userData.birth_date || ''}\n                        onChange={handleChange}\n                    />\n                </div>\n                <div className=\"form-setting\">\n                    <label>Country</label>\n                    <div className=\"dropdown-container\">\n                        <div\n                            className=\"dropdown-selected\"\n                            onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                        >\n                            {userData.country || \"Select a country\"}\n                        </div>\n\n                        {isDropdownOpen && (\n                            <div className=\"dropdown-options\">\n                                {countries.map((c) => (\n                                    <div\n                                        key={c}\n                                        className=\"dropdown-option\"\n                                        onClick={() => {\n                                            handleChange({ target: { name: \"country\", value: c } });\n                                            setIsDropdownOpen(false);\n                                        }}\n                                    >\n                                        {c}\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"form-setting\">\n                    <label>Allergies</label>\n                    <input\n                        type=\"text\"\n                        name=\"allergies\"\n                        value={allergyInput}\n                        onChange={handleChange}\n                        placeholder=\"Enter allergies separated by comma, e.g. peanuts, milk, seafood\"\n                    />\n                </div>\n\n                <button className=\"save-button\" onClick={handleSave}>Save</button>\n            </div>\n            <button\n                className=\"delete-button\"\n                onClick={() => setShowDeleteModal(true)}\n            >\n                Delete Account\n            </button>\n\n            {showDeleteModal && (\n                <div className=\"modal-overlay\">\n                    <div className=\"modal-content\">\n                        <h2>Delete Account</h2>\n                        <p>Are you sure you want to delete your account?</p>\n                        <div className=\"modal-buttons\">\n                            <button\n                                className=\"cancel-button\"\n                                onClick={() => setShowDeleteModal(false)}\n                            >\n                                Cancel\n                            </button>\n                            <button\n                                className=\"confirm-delete-button\"\n                                onClick={handleDeleteAccount}\n                            >\n                                Delete\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Setting;","import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport '../css/ResetPassword.css';\nimport logo from '../image/Logo1.svg';\nimport axios from 'axios';\n\nconst NewPasswordPage = () => {\n  const [formData, setFormData] = useState({ password: '', confirmPassword: '' });\n  const [errors, setErrors] = useState({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [touched, setTouched] = useState({});\n  const [message, setMessage] = useState('');\n  const navigate = useNavigate();\n\n  const validateField = (name, value) => {\n    if (name === 'password') {\n      if (!value) return 'Password is required';\n      if (value.length < 8) return 'Password must be at least 8 characters';\n      if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/.test(value)) return 'Password must contain uppercase, lowercase, and number';\n      return '';\n    }\n    if (name === 'confirmPassword') {\n      if (!value.trim()) return 'Please confirm your password';\n      if (value !== formData.password) return 'Passwords do not match';\n      return '';\n    }\n    return '';\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    Object.keys(formData).forEach((key) => {\n      const error = validateField(key, formData[key]);\n      if (error) newErrors[key] = error;\n    });\n    return newErrors;\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n\n    if (errors[name]) {\n      setErrors((prev) => ({ ...prev, [name]: '' }));\n    }\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setErrors((prev) => ({ ...prev, [name]: error }));\n    }\n\n    // Re-validate confirmPassword when password changes\n    if (name === 'password' && touched.confirmPassword && formData.confirmPassword) {\n      const confirmError = validateField('confirmPassword', formData.confirmPassword);\n      setErrors((prev) => ({ ...prev, confirmPassword: confirmError }));\n    }\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    setTouched((prev) => ({ ...prev, [name]: true }));\n    const error = validateField(name, value);\n    setErrors((prev) => ({ ...prev, [name]: error }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const formErrors = validateForm();\n    if (Object.keys(formErrors).length > 0) {\n      setErrors(formErrors);\n      setTouched({ password: true, confirmPassword: true });\n      return;\n    }\n\n    setIsLoading(true);\n    setErrors({});\n    setMessage('');\n\n    try {\n      const res = await axios.post('/api/auth/new-password', {\n        password: formData.password,\n      });\n\n      setMessage(res.data?.message || 'Your password has been reset successfully!');\n      setFormData({ password: '', confirmPassword: '' });\n      setTouched({});\n      \n      setTimeout(() => navigate('/login'), 2000);\n    } catch (error) {\n      setErrors({\n        submit: error.response?.data?.message || 'An error occurred. Please try again.',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getInputClasses = (fieldName) => {\n    const baseClasses = 'login-input';\n    return errors[fieldName] ? `${baseClasses} login-input-error` : baseClasses;\n  };\n\n  return (\n    <div className=\"reset-container\">\n      <button\n        className=\"back-arrow\"\n        onClick={() => navigate('/login')}\n        aria-label=\"Go back to login\"\n      >\n        ‹\n      </button>\n\n      <div className=\"logo-header\">\n        <div className=\"logo-circle\">\n          <img\n            src={logo}\n            alt=\"Company Logo\"\n            className=\"Logo\"\n          />\n        </div>\n      </div>\n\n      <div className=\"reset-card\">\n        <div className=\"reset-header\">\n          <h1 className=\"reset-title\">SET NEW PASSWORD</h1>\n          <p className=\"reset-subtitle\">\n            Please enter your new password and confirm it below.\n          </p>\n        </div>\n\n        <form className=\"reset\" onSubmit={handleSubmit}>\n          {/* Password Input Wrapper */}\n          <div className=\"input-wrapper\">\n            <input\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              value={formData.password}\n              onChange={handleInputChange}\n              onBlur={handleBlur}\n              placeholder=\"New Password\"\n              className={getInputClasses('password')}\n              aria-describedby={errors.password ? 'password-error' : undefined}\n              aria-invalid={errors.password ? 'true' : 'false'}\n              autoComplete=\"new-password\"\n              disabled={isLoading}\n            />\n            {errors.password && (\n              <div id=\"password-error\" className=\"login-error\" role=\"alert\">\n                {errors.password}\n              </div>\n            )}\n          </div>\n\n          {/* Confirm Password Input Wrapper */}\n          <div className=\"input-wrapper\">\n            <input\n              id=\"confirmPassword\"\n              name=\"confirmPassword\"\n              type=\"password\"\n              value={formData.confirmPassword}\n              onChange={handleInputChange}\n              onBlur={handleBlur}\n              placeholder=\"Confirm Password\"\n              className={getInputClasses('confirmPassword')}\n              aria-describedby={errors.confirmPassword ? 'confirm-error' : undefined}\n              aria-invalid={errors.confirmPassword ? 'true' : 'false'}\n              autoComplete=\"new-password\"\n              disabled={isLoading}\n            />\n            {errors.confirmPassword && (\n              <div id=\"confirm-error\" className=\"login-error\" role=\"alert\">\n                {errors.confirmPassword}\n              </div>\n            )}\n          </div>\n\n          {/* Success Message */}\n          {message && (\n            <div className=\"login-success\" role=\"alert\">\n              {message}\n            </div>\n          )}\n\n          {/* Submit Error */}\n          {errors.submit && (\n            <div className=\"login-error\" role=\"alert\">\n              {errors.submit}\n            </div>\n          )}\n\n          <button\n            type=\"submit\"\n            className=\"send-reset-button\"\n            disabled={\n              !formData.password || \n              !formData.confirmPassword || \n              !!errors.password || \n              !!errors.confirmPassword || \n              isLoading\n            }\n          >\n            {isLoading ? 'Saving...' : 'Save New Password'}\n          </button>\n\n          <div className=\"reset-link\">\n            <Link to=\"/login\" className=\"login-link-text\">\n              Back to Sign In\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default NewPasswordPage;","import React, { useState, useEffect } from 'react';\nimport '../css/MenuReview.css';  // Import the CSS file\nimport logo from '../image/Logo1.svg';\nimport backicon from '../image/searchbar/Back.svg';\nimport defaultProfile from '../image/profile.jpg';\nimport deleteicon from '../Icon/Button/Delete_btn.png';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\nconst MenuReview = () => {\n    const navigate = useNavigate();\n    // const { index } = useParams();\n    const location = useLocation();\n    const menuIdStr = location.state?.menu_id;\n    const menuId = parseInt(menuIdStr, 10);\n\n    const userIdStr = localStorage.getItem('user_id');\n    const userId = parseInt(userIdStr, 10);\n\n    const [userData, setUserData] = useState({\n        username: '',\n        avatar: '',\n        avatar_url: defaultProfile\n    });\n\n    // const [profileImage, setProfileImage] = useState(defaultProfile);\n\n    const [formReview, setReviewData] = useState({\n        user_id: '',\n        menu_id: '',\n        comment: '',\n        rating: ''\n    });\n\n    const [reviews, setReview] = useState([{\n        menu_id: '',\n        comment: '',\n        rating: '',\n        created_at: '',\n        updated_at: '',\n        username: '',\n        avatar: '',\n        avatar_url: defaultProfile\n    }]);\n\n    const [ratings, setRating] = useState({\n        sum_rating: 0,\n        avg_rating: 0,\n        rate_5: 0,\n        rate_4: 0,\n        rate_3: 0,\n        rate_2: 0,\n        rate_1: 0,\n        percent_rate_5: 0,\n        percent_rate_4: 0,\n        percent_rate_3: 0,\n        percent_rate_2: 0,\n        percent_rate_1: 0\n    });\n\n    const [hasReviewed, setHasReview] = useState(false);\n\n    const [confirmUpdate, setUpdate] = useState(false);\n    \n    const [confirmDelete, setDelete] = useState(false);\n\n    const [showUpdatePopup, setShowUpdatePopup] = useState(false);\n\n    const [showDeletePopup, setShowDeletePopup] = useState(false);\n\n    useEffect(() => {\n        if (!userId || isNaN(userId)) {\n            console.error('Invalid userId:', userIdStr);\n            navigate('/login');\n            return;\n        }\n        const fetchUserData = async () => {\n            try {\n                const response = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/users/${userId}`);\n                const user = response.data.user;        \n                setUserData(user);\n                if (user.avatar_url) {\n                    setUserData(prevData => ({\n                        ...prevData,\n                        avatar_url: `${user.avatar_url}?t=${Date.now()}` // แล้วอัปเดตเฉพาะ avatar_url\n                    }));\n                }\n            } catch (error) {\n                console.error('Error fetching user data:', error);\n            }\n        };\n        \n        fetchUserData();\n    }, [userId, navigate]);\n\n    const fetchReviewData = async () => {\n        try {\n            const response = await axios.get(`${process.env.REACT_APP_BASE_URL}/api/menu-detail/${menuId}/reviews`);\n            const { reviews, menu_id, sum_rating, avg_rating, rate_5, rate_4, rate_3, rate_2, rate_1 } = response.data;\n            if (!menu_id) { \n                console.error(\"Backend did not return a valid menu_id.\");\n                return; \n            }\n            setReview(reviews || []);\n            setRating({\n                sum_rating: sum_rating || 0,\n                avg_rating: avg_rating || 0,\n                rate_5: rate_5 || 0,\n                rate_4: rate_4 || 0,\n                rate_3: rate_3 || 0,\n                rate_2: rate_2 || 0,\n                rate_1: rate_1 || 0,\n                percent_rate_5: (reviews.length > 0 ? (rate_5 / reviews.length) * 100 : 0),\n                percent_rate_4: (reviews.length > 0 ? (rate_4 / reviews.length) * 100 : 0),\n                percent_rate_3: (reviews.length > 0 ? (rate_3 / reviews.length) * 100 : 0),\n                percent_rate_2: (reviews.length > 0 ? (rate_2 / reviews.length) * 100 : 0),\n                percent_rate_1: (reviews.length > 0 ? (rate_1 / reviews.length) * 100 : 0)\n            });\n            setReviewData(prevData => ({\n                ...prevData,\n                menu_id: menuId,\n                user_id: userIdStr\n            }));\n            \n            const foundReview = reviews && Array.isArray(reviews) ? \n            reviews.some(review => review.user_id === userId) : false; \n            setHasReview(foundReview);\n            console.log('check has review in fetch', foundReview, userId)\n\n        } catch (error) {\n            console.error('Error fetching review data:', error);\n        }\n    };\n\n\n    useEffect(() => {\n        fetchReviewData();\n    }, [menuId]);\n\n\n\n    const renderStars = (rate) => {\n        const numericRating = parseFloat(rate) || 0;\n        const finalRating = Math.round(numericRating); \n        \n        const STAR_VALUES = [5, 4, 3, 2, 1];\n        \n        return STAR_VALUES.map((starValue) => (\n            <span \n                key={starValue} \n                className={`fa fa-star fa-1x star-base ${\n                    starValue <= finalRating\n                        ? 'star-check' \n                        : '' \n                }`}\n            >\n            </span>\n        ));\n    };\n\n    const showProfle = (review) => {\n        let final_profile = defaultProfile;\n        let avatarUrl = `${process.env.REACT_APP_BASE_URL}/uploads/avatars/${review.avatar}`\n        final_profile = `${avatarUrl}?t=${Date.now()}`;\n        return  (\n            <img\n                src={final_profile\n                ? `${final_profile}`\n                : defaultProfile\n                }  \n                className=\"my-review-pro\"\n                alt=\"avatar\"\n            />\n        );\n    };\n\n    const showDate = (review) => {\n        if (review.updated_at) {\n            review.updated_at = review.updated_at.split('T')[0];\n            return (<div className=\"show-date-review\">{review.updated_at}</div>);\n        } else {\n            review.created_at = review.created_at.split('T')[0];\n            return (<div className=\"show-date-review\">{review.created_at}</div>);\n        }\n    };\n\n    // const showUpdate = () => {\n    //     return ()\n    // };\n\n    const showDeleteReview = (review) => {\n        if (review.user_id === userId) {\n            return (<button className=\"del-rew-bttn\" onClick={() => setShowDeletePopup(true)}><img src={deleteicon}/></button>)\n        }\n    };\n\n    const handleChange = (e) => {\n        setReviewData({ ...formReview, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const rating_int = parseInt(formReview.rating, 10);\n\n        if (hasReviewed) {\n            setShowUpdatePopup(true); \n        } else {\n            if (rating_int < 1 || rating_int > 5) {\n            console.error(\"rate should be in 1 - 5\")\n            return;\n        }\n\n        if (!menuId) {\n            console.error(\"Cannot submit review: menu_id is missing.\");\n            // setError(\"Menu ID not set. Please refresh.\"); // ถ้าคุณมี setError\n            return; \n        }\n\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_BASE_URL}/api/menu-detail/${menuId}/reviews`, formReview);\n            setReviewData({\n                comment: '',\n                rating: ''\n            });\n            fetchReviewData(); \n        } catch (error) {\n            console.error('Error for post review:', error);\n        }\n        }\n        \n    };\n\n    const handleUpdateReview = async (e) => {\n        e.preventDefault();\n            try {\n                const response = await axios.put(`${process.env.REACT_APP_BASE_URL}/api/reviews`, formReview);\n                // setUpdate(false);\n                setShowUpdatePopup(false);\n                setReviewData({\n                    comment: '',\n                    rating: ''\n                });\n                fetchReviewData(); \n            } catch (error) {\n                console.error('Error for put review:', error);\n            }\n    };\n\n    const handleDeleteReview = async (e) => {\n        try {\n            const response = await axios.delete(`${process.env.REACT_APP_BASE_URL}/api/${menuId}/${userId}/reviews`);\n            setShowDeletePopup(false);\n            fetchReviewData();\n        } catch (error) {\n            console.error('Error for delete review:', error);\n        }\n    };\n\n    return (\n        <div className=\"review-page\">\n            <div className=\"rating-container\">\n                <div className=\"top-blank\">\n                    <img\n                        src={backicon}\n                        alt=\"back\"\n                        className=\"back-icon\"\n                        onClick={() => navigate(-1)}\n                        style={{ cursor: \"pointer\" }}\n                    />\n                </div>\n                <div className=\"pic-logo\">\n                    <img src={logo} id=\"logo-review\" alt=\"Sous Cook Logo\"/>\n                    <div className=\"caption-review\">Review this recipe</div>\n                    <div className=\"star-rating menu-rate\">\n                        {renderStars(ratings.avg_rating)}\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"review-container\">\n                <div className=\"rw-rt\">\n                    <div className=\"rw\">{reviews.length} reviews</div>\n                    <div className=\"rt\">{ratings.sum_rating} ratings</div>\n                </div>\n                <div className=\"detail-rating\">\n                    <div className=\"left-rating\">\n                        <div className=\"rating-this-menu\">{ratings.avg_rating}</div>\n                        <div>out of 5</div>\n                    </div>\n                    <div className=\"right-rating\">\n                        {/* <div className=\"row\"> */}\n                        <div className=\"row-rate-right\">\n                            <div className=\"right-star\">\n                                {renderStars(5)}\n                            </div>\n                            <div className=\"all-rate\">\n                                <div className=\"progress-bar-rate\">\n                                    <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_5}%`}}></div>\n                                </div>\n                                \n                            </div>\n                            <div className=\"num-rate\">\n                                <div className=\"num-review\">{ratings.rate_5}</div>\n                            </div>\n                        </div>\n                        <div className=\"row-rate-right\">\n                            <div className=\"right-star\">\n                                {renderStars(4)}\n                            </div>\n                            <div className=\"all-rate\">\n                                <div className=\"progress-bar-rate\">\n                                    <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_4}%`}}></div>\n                                </div>\n                                \n                            </div>\n                            <div className=\"num-rate\">\n                                <div className=\"num-review\">{ratings.rate_4}</div>\n                            </div>\n                        </div>\n                        <div className=\"row-rate-right\">\n                            <div className=\"right-star\">\n                                {renderStars(3)}\n                            </div>\n                            <div className=\"all-rate\">\n                                <div className=\"progress-bar-rate\">\n                                    <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_3}%`}}></div>\n                                </div>\n                                \n                            </div>\n                            <div className=\"num-rate\">\n                                <div className=\"num-review\">{ratings.rate_3}</div>\n                            </div>\n                        </div>\n                        <div className=\"row-rate-right\">\n                            <div className=\"right-star\">\n                                {renderStars(2)}\n                            </div>\n                            <div className=\"all-rate\">\n                                <div className=\"progress-bar-rate\">\n                                    <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_2}%`}}></div>\n                                </div>\n                                \n                            </div>\n                            <div className=\"num-rate\">\n                                <div className=\"num-review\">{ratings.rate_2}</div>\n                            </div>\n                        </div>\n                        <div className=\"row-rate-right\">\n                            <div className=\"right-star\">\n                                {renderStars(1)}\n                            </div>\n                            <div className=\"all-rate\">\n                                <div className=\"progress-bar-rate\">\n                                    <div className=\"percent-progress-bar\" style={{ width: `${ratings.percent_rate_1}%`}}></div>\n                                </div>\n                                \n                            </div>\n                            <div className=\"num-rate\">\n                                <div className=\"num-review\">{ratings.rate_1}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <hr></hr>\n                \n                {reviews.length === 0 ? (\n                    <p className=\"no-review-text\">Be the first to leave a review!</p>\n                    ) : (\n                    reviews.map((review, index_review) => (\n                        <div key={index_review}>\n                            <div className=\"review-profile\">\n                                <div className=\"review-pro-pic\">\n                                    {showProfle(review)}\n                                </div>\n                                <div className=\"review-pro-rate\">\n                                    <div className=\"review-username\">{review.username}</div>\n                                    <div className=\"review-rate my-rate\">\n                                        <div className=\"star-rating all-users-review\">\n                                            {renderStars(review.rating)}\n                                        </div>\n                                    </div> \n                                </div>\n                                {showDeleteReview(review)}\n\n                            </div>\n                            <div className=\"comment-box\">\n                                <div className=\"review-text\">{review.comment}</div>\n                                {showDate(review)}\n                            </div>\n\n                            <hr></hr>\n                        </div>\n                    ))\n                )}\n\n                \n\n            </div>\n\n            <div className=\"post-review-container\">\n                <form className=\"review-form\" onSubmit={handleSubmit}>\n                    <div className=\"review-profile\">\n                        <div className=\"review-pro-pic\">\n                            <img\n                                src={userData.avatar_url\n                                    ? `${userData.avatar_url}`\n                                    : defaultProfile\n                                }\n                                className=\"my-review-pro\"\n                                alt=\"avatar\"\n                                />\n                        </div>\n                        <div className=\"review-pro-rate\">\n                            <div className=\"review-username\">{userData.username}</div>\n                            <div className=\"review-rate my-rate\">\n                                <div className=\"star-rating\">\n                                    <input type=\"radio\" name=\"rating\" id=\"star5\" value={'5'} checked={formReview.rating === '5'} onChange={handleChange}/><label for=\"star5\"></label>\n                                    <input type=\"radio\" name=\"rating\" id=\"star4\" value={'4'} checked={formReview.rating === '4'} onChange={handleChange}/><label for=\"star4\"></label>\n                                    <input type=\"radio\" name=\"rating\" id=\"star3\" value={'3'} checked={formReview.rating === '3'} onChange={handleChange}/><label for=\"star3\"></label>\n                                    <input type=\"radio\" name=\"rating\" id=\"star2\" value={'2'} checked={formReview.rating === '2'} onChange={handleChange}/><label for=\"star2\"></label>\n                                    <input type=\"radio\" name=\"rating\" id=\"star1\" value={'1'} checked={formReview.rating === '1'} onChange={handleChange}/><label for=\"star1\"></label>\n                                </div>\n                            </div> \n                        </div>\n                    </div>\n                    <div className=\"review-message-box\">\n                        <textarea name=\"comment\" placeholder=\"Add a comment...\" id=\"review-message-textarea\" value={formReview.comment} onChange={handleChange}></textarea>\n                    </div>\n                    <div className=\"review-button-box\">\n                        <button type=\"submit\" className=\"post-review-button\">Post</button>\n                    </div>\n                </form>\n            </div>\n            {showUpdatePopup && (\n                <div className=\"popup-overlay\">\n                    <div className=\"popup-content\">\n                        <h2>Update Reiview</h2>\n                        <p>Are you sure you want to update your review?</p>\n                        <div className=\"popup-buttons\">\n                            <button\n                                className=\"cancel-button-review\"\n                                onClick={() => setShowUpdatePopup(false)}\n                            >\n                                Cancel\n                            </button>\n                            <button\n                                className=\"confirm-button-review\"\n                                onClick={handleUpdateReview}\n                            >\n                                Update\n                            </button>\n                        </div>\n                    </div>\n                </div>\n              )}  \n              {showDeletePopup && (\n                <div className=\"popup-overlay\">\n                    <div className=\"popup-content\">\n                        <h2>Delete Reiview</h2>\n                        <p>Are you sure you want to delete your review?</p>\n                        <div className=\"popup-buttons\">\n                            <button\n                                className=\"cancel-button-review\"\n                                onClick={() => setShowDeletePopup(false)}\n                            >\n                                Cancel\n                            </button>\n                            <button\n                                className=\"confirm-button-review\"\n                                onClick={handleDeleteReview}\n                            >\n                                Delete\n                            </button>\n                        </div>\n                    </div>\n                </div>\n              )}  \n            \n        </div>\n    );\n  };\n  \n  export default MenuReview;","import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getShoppingListFromStorage, saveShoppingListToStorage } from '../utils/storageUtils';\nimport { getUserId, isLoggedIn } from '../utils/auth';\nimport \"../css/ShoppingList.css\";\nimport grabLogo from '../image/shopping_list/Grab.svg';\nimport linemanLogo from '../image/shopping_list/Line_man.png';\n\nconst ShoppingList = () => {\n  const navigate = useNavigate();\n  const userId = getUserId();\n\n  const [shoppingList, setShoppingList] = useState([]);\n  const [showPopup, setShowPopup] = useState(false);\n\n  useEffect(() => {\n    if (!isLoggedIn()) {\n      navigate('/login');\n      return;\n    }\n    const savedList = getShoppingListFromStorage(userId);\n    setShoppingList(savedList);\n  }, [userId, navigate]);\n\n  const handleRemoveItem = (index) => {\n    const newList = shoppingList.filter((_, idx) => idx !== index);\n    setShoppingList(newList);\n    saveShoppingListToStorage(newList);\n  };\n\n  return (\n    <div className=\"shopping-list-container\">\n      {/* Header */}\n      <div className=\"shopping-header\">\n        <button className=\"back-button\" onClick={() => navigate(-1)}></button>\n        <h1>Shopping List</h1>\n      </div>\n\n      {/* List Items */}\n      <div className=\"shopping-items\">\n        {Array.isArray(shoppingList) && shoppingList.length > 0 ? (\n          shoppingList.map((item, idx) => (\n            <div key={idx} className=\"shopping-card\">\n              <img src={item.image} alt={item.name} className=\"shopping-image\" />\n              <p>{item.name}</p>\n              <button\n                className=\"remove-item\"\n                onClick={() => handleRemoveItem(idx)}\n              >\n                ×\n              </button>\n            </div>\n          ))\n        ) : (\n          <p className=\"empty-text\">No ingredients added yet.</p>\n        )}\n      </div>\n\n      {/* Order button */}\n      {Array.isArray(shoppingList) && shoppingList.length > 0 && (\n        <button className=\"order-button\" onClick={() => setShowPopup(true)}>\n          Order\n        </button>\n      )}\n\n      {/* Popup Modal */}\n      {showPopup && (\n        <div className=\"popup-overlay\">\n          <div className=\"popup-content\">\n            <h2>Choose Delivery App</h2>\n            <div className=\"popup-buttons\">\n              <button\n                className=\"sponsor-button lineman\"\n                onClick={() =>\n                  window.open(\"https://lineman.line.me/mart\", \"linemanPopup\", \"width=600,height=800\")\n                }\n              >\n                <img src={linemanLogo} alt=\"LINE MAN\"/>\n              </button>\n\n              <button\n                className=\"sponsor-button grab\"\n                onClick={() =>\n                  window.open(\"https://food.grab.com/mart\", \"grabPopup\", \"width=600,height=800\")\n                }\n              >\n                <img src={grabLogo} alt=\"Grab\"/>\n              </button>\n            </div>\n            <button className=\"close-button\" onClick={() => setShowPopup(false)}>\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ShoppingList;\n","import React, { useRef, useCallback, useState } from 'react';\nimport Webcam from 'react-webcam';\nimport { saveCameraIngredientsToLocalStorage, getCameraIngredientsFromLocalStorage } from '../utils/storageUtils';\nimport IconClose from '../image/nav_icon/close_btn.svg';\nimport { FaExclamationTriangle } from 'react-icons/fa'; \nimport { useNavigate } from \"react-router-dom\";\nimport uploadImage from '../image/camera/upload.png';\nimport SwapCamera from '../image/camera/swap_camera.png';\nimport CameraButtonDefault from '../image/camera/takecamera_Default.svg';\nimport CameraButtonHover from '../image/camera/takecamera_Onpress.svg';\nimport RetakeButton from '../image/camera/Retake_Button.svg';\nimport NextButton from '../image/camera/Next_Button.svg';\nimport '../css/camera.css';\nimport '../css/LoadingPage.css';\nimport '../css/PopUpIngedientNotFound.css';\n\nconst CameraSearch = () => {\n  const webcamRef = useRef(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isIngredientNotFound, setIsIngredientNotFound] = useState(false);\n  const [isHovered, setIsHovered] = useState(false);\n  const [facingMode, setFacingMode] = useState(\"environment\");\n  const navigate = useNavigate();\n\n  const handleSwapCamera = () => {\n    setFacingMode((prevState) =>\n      prevState === \"environment\" ? \"user\" : \"environment\"\n    );\n  };\n\n  const capture = useCallback(() => {\n      if (webcamRef.current) {\n        const imageSrc = webcamRef.current.getScreenshot();\n        setIsHovered(false);\n        setCapturedImage(imageSrc);\n      }\n    }, [webcamRef]);\n\n  const sendImageToBackend = async (imageSrc) => {\n    try {\n      setIsLoading(true);\n\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/upload`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ image: imageSrc }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n\n      const data = await response.json();\n      console.log('Response from backend:', data);\n\n      if (data && data.ingredients && data.ingredients.length > 0) {\n        const detectedIngredients = data.ingredients.map(ing => ({\n          ...ing,\n          source: \"camera\"\n        }));\n        \n        console.log('detectedIngredients:', JSON.stringify(detectedIngredients, null, 2));\n        \n        if (detectedIngredients.length > 0) {\n          // Get existing camera ingredients and append new ones\n          const existingCameraIngredients = getCameraIngredientsFromLocalStorage();\n          const updatedCameraIngredients = [...existingCameraIngredients, ...detectedIngredients];\n          \n          // Save all camera ingredients\n          saveCameraIngredientsToLocalStorage(updatedCameraIngredients);\n          \n          navigate(\"/ingredient-preview\");\n        } else {\n          setIsIngredientNotFound(true);\n        }\n      } else {\n        console.error('No ingredients detected in the backend response');\n        setIsIngredientNotFound(true);\n        setCapturedImage(null);\n      }\n      setIsLoading(false);\n\n    } catch (error) {\n      console.error('Error sending image to backend:', error);\n      setIsLoading(false);\n      setIsIngredientNotFound(true);\n      setCapturedImage(null);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCapturedImage(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div>\n      {isLoading && <LoadingIngredientPage />}\n      {isIngredientNotFound && <PopUpIngredientNotFound onClose={() => setIsIngredientNotFound(false)} />}\n\n      <div className=\"camera-container\">\n        {!capturedImage ? (\n          <>\n            <Webcam\n              audio={false}\n              ref={webcamRef}\n              screenshotFormat=\"image/jpeg\"\n              className=\"webcam-view\"\n              videoConstraints={{\n                facingMode: facingMode,\n              }}\n            />\n            <div className=\"camera-header\">\n              <span className=\"header-title\">Add Ingredients</span>\n              <img \n                src={IconClose} \n                className=\"close-button\" \n                alt=\"Close\" \n                onClick={() => navigate('/search')} \n              />\n            </div>\n            <div className='camera-buttom'>\n              <div className='upload-container'>\n                <img\n                  src={uploadImage} \n                  alt=\"Upload\"\n                  onClick={() => document.getElementById('fileInput').click()}\n                  className=\"upload-image\"\n                />\n              </div>\n              <button \n                onClick={capture} \n                className=\"camera-button\"\n                onMouseEnter={() => setIsHovered(true)}\n                onMouseLeave={() => setIsHovered(false)}\n              >\n                <img \n                  src={isHovered ? CameraButtonHover : CameraButtonDefault} \n                  alt=\"Camera Button\" \n                  className=\"camera-button-img\"\n                />\n              </button>\n              <div className=\"swap-container\">\n                <img\n                  src={SwapCamera}\n                  alt=\"Swap Camera\"\n                  className=\"swap-camera\"\n                  onClick={handleSwapCamera}\n                />\n              </div>\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleImageUpload}\n                className=\"upload-button\"\n                id=\"fileInput\"\n                style={{ display: 'none' }}\n              />\n            </div>\n          </>\n        ) : (\n          <>\n            <div className=\"camera-header\">\n              <span className=\"header-title\">Add Ingredients</span>\n              <img \n                src={IconClose} \n                className=\"close-button\" \n                alt=\"Close\" \n                onClick={() => navigate('/search')} \n              />\n            </div>\n            <img src={capturedImage} alt=\"Captured\" className=\"captured-image\" />\n            <div className='camera-buttom-preview'>\n              <button onClick={() => setCapturedImage(null)} className=\"retake-button styled-button\">\n                <img src={RetakeButton} alt=\"Retake\" className=\"button-image\" />\n              </button>\n              <button onClick={() => sendImageToBackend(capturedImage)} className=\"send-button styled-button\">\n                <img src={NextButton} alt=\"Next\" className=\"button-image\" />\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst LoadingIngredientPage = () => {\n  return (\n    <div className=\"loading-overlay\">\n      <div className=\"loading-popup\">\n        <div className=\"spinner\"></div>\n        <p>Processing your image, please wait...</p>\n      </div>\n    </div>\n  );\n};\n\nconst PopUpIngredientNotFound = ({ onClose }) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  const handleClose = () => {\n    setIsVisible(false);\n    if (onClose) onClose();\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"notfound-overlay\">\n      <div className=\"notfound-popup\">\n        <FaExclamationTriangle className=\"error-icon\" />\n        <p>Error Please try again</p>\n        <button className=\"close-button\" onClick={handleClose}>Close</button>\n      </div>\n    </div>\n  );\n};\n\nexport default CameraSearch;","import React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/SmallCommunity.css';\nimport defaultProfile from '../image/profile.jpg';\nimport LikeIcon from '../image/Favorite.svg';\nimport Header from '../image/homepage/Header.svg';\nimport '../css/Navbar.css';\nimport IconHome from '../image/nav_icon/icon_home.svg';\nimport IconHeart from '../image/nav_icon/icon_like.svg';\nimport IconCamera from '../image/nav_icon/icon_camera.svg';\nimport IconClock from '../image/nav_icon/icon_history.svg';\nimport IconUser from '../image/nav_icon/icon_people.svg';\n\nconst SmallCommunity = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const menuId = location.state?.menu_id;\n    const currentUserId = localStorage.getItem('user_id');\n\n    const [posts, setPosts] = useState([]);\n    const [selected, setSelected] = useState('small-community');\n\n  // Fetch posts from backend\n    useEffect(() => {\n        const fetchPosts = async () => {\n        try {\n            const res = await axios.get('http://localhost:5050/api/community', {\n            params: menuId ? { menu_id: menuId } : {}\n            });\n\n            const data = res.data.posts || [];\n            const formatted = data.map(p => ({\n            id: p.post_id,\n            username: p.username,\n            avatar: p.avatar_url || defaultProfile,\n            image: p.image_url || '',\n            caption: p.caption || '',\n            created_at: p.created_at,\n            likes: p.like_count || 0,\n            liked: false\n            }));\n            setPosts(formatted);\n        } catch (err) {\n            console.error('Error fetching posts:', err);\n        }\n        };\n        fetchPosts();\n    }, [menuId]);\n\n    // Toggle like/unlike\n    const handleLike = async (postId) => {\n        try {\n        const res = await axios.post(`http://localhost:5050/api/community/${postId}/like`, {\n            user_id: currentUserId,\n        });\n\n        if (res.data.success) {\n            setPosts(posts.map(p =>\n            p.id === postId\n                ? { ...p, likes: res.data.like_count, liked: res.data.liked }\n                : p\n            ));\n        }\n        } catch (err) {\n        console.error('Error toggling like:', err);\n        }\n    };\n\n    // Navigation\n    const handleNavigation = (page) => {\n        setSelected(page);\n        navigate(`/${page}`);\n    };\n\n    const handleBackNavigation = () => {\n        navigate(-1);\n    };\n\n  // Function to capitalize first letter\n    const capitalize = (str) => {\n    if (!str) return '';\n    return str.charAt(0).toUpperCase() + str.slice(1);\n    };\n\n  return (\n    <div className=\"community-container\">\n      {/* Header */}\n      <div className='community-header-container'>\n        <img src={Header} alt=\"Header\" className=\"community-header-image\" />\n        <div className=\"back-to-menu-detail\">\n        <button className=\"back-button\" onClick={handleBackNavigation}></button>\n        </div>\n      </div>\n\n      {posts.length === 0 && <p className=\"community-no-posts\">No posts yet</p>}\n\n      {posts.map(post => (\n        <div key={post.id} className=\"community-post-card\">\n          {/* Post header */}\n          <div className=\"community-post-header\">\n            <img \n              src={post.avatar} \n              className=\"user-profile-pic\" \n              alt=\"avatar\"\n              onError={(e) => e.target.src = defaultProfile}\n            />\n            <p className=\"community-username\">{capitalize(post.username)}</p>\n          </div>\n\n          {/* Post image */}\n          {post.image && (\n            <img \n              src={post.image} \n              className=\"community-post-image\" \n              alt=\"dish\"\n              onError={(e) => e.target.style.display = 'none'}\n            />\n          )}\n\n          {/* Like button */}\n          <div className=\"community-post-actions\">\n            <button \n              className={`community-like-button ${post.liked ? 'liked' : ''}`}\n              onClick={() => handleLike(post.id)}\n            >\n              <img src={LikeIcon} alt=\"like\" /> \n              <span className=\"community-like-count\">{post.likes}</span>\n            </button>\n          </div>\n          {/* Caption and date */}\n          {post.caption && (\n            <p className=\"community-caption\">\n            <strong className=\"community-username-caption\">{capitalize(post.username)}</strong>\n            {post.caption}\n            </p>\n            )}\n          <p className=\"community-created-at\">\n            {new Date(post.created_at).toLocaleDateString('en-GB', {\n              day: '2-digit',\n              month: '2-digit',\n              year: 'numeric'\n            })}\n          </p>\n        </div>\n      ))}\n\n      {/* Navigation Bar */}\n      <div className=\"navbar\">\n        <a className={`home nav-item ${selected === 'home' ? 'selected' : ''}`} onClick={() => handleNavigation('home')}>\n          <img src={IconHome} alt=\"home\" />\n        </a>\n        <a className={`heart nav-item ${selected === 'favorites' ? 'selected' : ''}`} onClick={() => handleNavigation('favorites')}>\n          <img src={IconHeart} alt=\"favorites\" />\n        </a>\n        <a className={`camera nav-item ${selected === 'camera' ? 'selected' : ''}`} onClick={() => handleNavigation('camera')}>\n          <img src={IconCamera} alt=\"camera\" />\n        </a>\n        <a className={`history nav-item ${selected === 'history' ? 'selected' : ''}`} onClick={() => handleNavigation('history')}>\n          <img src={IconClock} alt=\"history\" />\n        </a>\n        <a className={`account nav-item ${selected === 'account' ? 'selected' : ''}`} onClick={() => handleNavigation('account')}>\n          <img src={IconUser} alt=\"account\" />\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default SmallCommunity;\n","import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport MenuDetail from './components/MenuDetail';\nimport PreferencesPage from './components/PreferencesPage';\nimport MenuSuggestion from './components/MenuSuggestion';\nimport IngredientPreview from './components/IngredientPreview'; \nimport HomePage from './components/HomePage'; \nimport AboutMe from './components/AboutMe';\nimport { useLocation } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport './css/App.css';\nimport Navbar from './components/Navbar';\nimport Camera from './components/Camera';\nimport LoginPage from './pages/LoginPage';\nimport ResetPasswordPage from './pages/ResetPassword'; \nimport SignUpPage from './components/SignUpPage';\nimport UserDataPage from './components/UserDataPage';\nimport FavoriteMenu from './components/FavoriteMenu';\nimport SearchBar from './components/SearchBar';\nimport HistoryScreen from './components/History';\nimport Setting from './components/Setting';\nimport Newpassword from './pages/Newpassword';\nimport MenuReview from './components/MenuReview';\nimport ShoppingList from './components/ShoppingList';\nimport CameraSearch from './components/cameraSearch';\nimport CameraSharedDish from './components/CameraSharedDish';\nimport Community from './components/SmallCommunity';\n\nfunction App() {\n  const location = useLocation();  // Get the current location\n  const route_list = [\"/home\", \"/favorites\", \"/history\", \"/account\"]; \n  return (\n    <div className=\"App\">\n      <Routes>\n      <Route path=\"\" element={<AboutMe />}  />\n        <Route path=\"/\" element={<AboutMe />}  />\n        <Route path=\"/home\" element={<HomePage />}  />\n        <Route path=\"/menu-suggestion\" element={<MenuSuggestion />} />\n        <Route path=\"/camera\" element={<Camera />} />\n        <Route path=\"/camera-search\" element={<CameraSearch />} />\n        <Route path=\"/menu-detail/:index\" element={<MenuDetail />} />\n        <Route path=\"/menu-detail\" element={<MenuDetail />} />\n        <Route path=\"/preferences\" element={<PreferencesPage />} />\n        <Route path=\"/ingredient-preview\" element={<IngredientPreview />} />\n        <Route path=\"/login\" element={<LoginPage />} />\n        <Route path=\"/reset-password\" element={<ResetPasswordPage />} />\n        <Route path=\"/signup\" element={<SignUpPage />} />\n        <Route path=\"/account\" element={<UserDataPage />} />\n        <Route path=\"/favorites\" element={<FavoriteMenu />} />\n        <Route path=\"/history\" element={<HistoryScreen />} />\n        <Route path=\"/search\" element={<SearchBar />} />\n        <Route path=\"/setting\" element={<Setting />} />\n        <Route path=\"/new-password\" element={<Newpassword/>}/>\n        <Route path=\"/reviews\" element={<MenuReview />} />\n        <Route path=\"/shoppinglist\" element={<ShoppingList />} />\n        <Route path=\"/camera-share-dish\" element={<CameraSharedDish />} />\n        <Route path=\"/community\" element={<Community />} />\n      </Routes>\n\n      {route_list.includes(location.pathname) ? (\n        <Navbar />\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","// src/index.js\n\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter as Router } from 'react-router-dom'; // Import BrowserRouter\nimport './css/index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n"],"sourceRoot":""}